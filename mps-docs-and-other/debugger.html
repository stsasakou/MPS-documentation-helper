<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/debugger.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:19.821387382"><meta name="build-number" content="170"><title>Debugger | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"thefundamentals","level":0,"title":"The fundamentals","anchor":"#thefundamentals"},{"id":"debuggingbaselanguageanditsextensions-integrationwiththejavadebugger","level":0,"title":"Debugging BaseLanguage and its extensions - integration with the java debugger","anchor":"#debuggingbaselanguageanditsextensions-integrationwiththejavadebugger"},{"id":"creatingcustomdebugger","level":0,"title":"Creating custom debugger","anchor":"#creatingcustomdebugger"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Debugger | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/debugger.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Debugger | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/debugger.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/debugger.html",
    "name": "Debugger | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="debugger" data-main-title="Debugger" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="debugger" id="debugger.topic">Debugger</h1><p id="-u5a2ma_1">MPS provides an API for creating custom debuggers as well as integrating with debugger for java. See <a href="using-mps-debugger.html" id="-u5a2ma_2">Debugger Usage page</a> for a description of the MPS debugger features.</p><section class="chapter"><h2 id="thefundamentals" data-toc="thefundamentals">The fundamentals</h2><p id="-u5a2ma_3">In order to debug code that gets generated from the user models, MPS needs to:</p><ul class="list _bullet" id="-u5a2ma_4"><li class="list__item" id="-u5a2ma_5"><p>track nodes in user models down to the generated code, in order to be able to match the two worlds seamlessly in the debugger</p></li><li class="list__item" id="-u5a2ma_6"><p>understand, which types of breakpoints can be created on what nodes</p></li><li class="list__item" id="-u5a2ma_7"><p>know the options for starting the debugged code in the debugger</p></li><li class="list__item" id="-u5a2ma_8"><p>optionally also have a set of customized viewers to display the current values of data in memory of the debugged program to the user</p></li></ul><p id="-u5a2ma_9">MPS tries to automate as much of it as possible, however, in some scenarios the language designer also has to do her share of weight-lifting. Suppose you have a language, let's call it&nbsp;<b id="-u5a2ma_10">high.level</b>, which generates code in some language&nbsp;<b id="-u5a2ma_11">low.level</b>, which in turn is generated directly into text (there can be several other steps between&nbsp;<b id="-u5a2ma_12">high.level</b>&nbsp;and&nbsp;<b id="-u5a2ma_13">low.level</b>). Suppose that the text generated from&nbsp;<b id="-u5a2ma_14">low.level</b>&nbsp;consists of java classes, and you want to have your&nbsp;<b id="-u5a2ma_15">high.level</b>&nbsp;language integrated with MPS java debugger engine. See the following explanatory table:</p><div class="table-wrapper"><table class="wide" id="-u5a2ma_16"><thead><tr class="ijRowHead" id="-u5a2ma_17"><th id="-u5a2ma_18"><p id="-u5a2ma_19"><b id="-u5a2ma_20">high.level</b> extends or generates into <em id="-u5a2ma_21">BaseLanguage</em></p></th><th id="-u5a2ma_22"><p id="-u5a2ma_23">Do not have to do anything.</p></th></tr></thead><tbody><tr id="-u5a2ma_24"><td id="-u5a2ma_25"><p id="-u5a2ma_26"><b id="-u5a2ma_27">high.level</b> does not extend nor generates into <em id="-u5a2ma_28">BaseLanguage</em></p></td><td id="-u5a2ma_29"><p id="-u5a2ma_30">Specify which concepts in <b id="-u5a2ma_31">low.level</b> are traceable. Use <code class="code" id="-u5a2ma_32">breakpoint creators</code> to be able to set breakpoints for <b id="-u5a2ma_33">high.level</b>.</p></td></tr></tbody></table></div></section><section class="chapter"><h2 id="debuggingbaselanguageanditsextensions-integrationwiththejavadebugger" data-toc="debuggingbaselanguageanditsextensions-integrationwiththejavadebugger">Debugging BaseLanguage and its extensions - integration with the java debugger</h2><p id="-u5a2ma_34">To integrate your <em id="-u5a2ma_35">BaseLanguage</em>-generated language with the MPS java debugger engine, you rarely need to specify anything. MPS can keep track of the generation trace in the <em id="-u5a2ma_36">trace.info</em> files, so breakpoints can be set as expected and the debugger correctly steps through your DSL code.</p><aside class="prompt" data-type="tip" data-title="" id="-u5a2ma_37"><p id="-u5a2ma_38">The automatic tracing recognizes situations, when a node gets transformed through a <b id="-u5a2ma_39">reduction rule</b>, and keeps a tracking record of the transformation in an appropriate model's <em id="-u5a2ma_40">trace.info</em> file. For concepts that do not get reduced through their own <b id="-u5a2ma_41">reduction rules</b>, you may, however, indicate explicitly, which part of the generated code should be preserved in the <em id="-u5a2ma_42">trace.info</em> file. The <b id="-u5a2ma_43">$TRACE$</b> macro serves this purpose.</p><p id="-u5a2ma_44">For more information and an example on the <b id="-u5a2ma_45">$TRACE$</b> macro usage, refer to <a href="#traceablenodes" id="-u5a2ma_46">Traceable nodes</a>.</p></aside><section class="chapter"><h3 id="startupofarunconfigurationunderjavadebugger" data-toc="startupofarunconfigurationunderjavadebugger">Startup of a run configuration under java debugger</h3><p id="-u5a2ma_47">MPS provides a special language for creating run configurations for languages generated into java â <b id="-u5a2ma_48">jetbrains.mps.baseLanguage.runConfigurations</b>. Those run configurations are able to start under debugger automatically. For more information, refer to <a href="run-configurations.html#introduction" id="-u5a2ma_49">Run configurations for languages generated into java</a>.</p></section><section class="chapter"><h3 id="customviewers" data-toc="customviewers">Custom viewers</h3><p id="-u5a2ma_50">When one views variables and fields in a variable view, one may want to define one's own way to show certain values. For instance, collections could be shown as a collection of elements rather than as an ordinary object with all its internal structure.</p><p id="-u5a2ma_51">For creating custom viewers MPS has <b id="-u5a2ma_52">jetbrains.mps.debugger.java.customViewers</b> language.</p><p id="-u5a2ma_53">The <em id="-u5a2ma_54">jetbrains.mps.debugger.java.customViewers</em> language&nbsp;enables one to write one's own viewers for data of certain form.</p><p id="-u5a2ma_55">A main concept of customViewers language is a custom data viewer. It receives a raw java value (an objects on stack) and returns a list of so-called watchables. A watchable is a pair of a value and its label (a string which categorizes a value, for example, whether a value is a method, a field, an element, a size, and so on) Labels for watchables are defined in <code class="code" id="-u5a2ma_56">custom watchables container</code>. Each label could be assigned an icon.</p><p id="-u5a2ma_57">The viewer for a specific type is defined in a <code class="code" id="-u5a2ma_58">custom viewer</code> root. In the following table <code class="code" id="-u5a2ma_59">custom viewer</code> parts are described:</p><div class="table-wrapper"><table class="wide" id="-u5a2ma_60"><thead><tr class="ijRowHead" id="-u5a2ma_61"><th id="-u5a2ma_62"><p id="-u5a2ma_63">Part</p></th><th id="-u5a2ma_64"><p id="-u5a2ma_65">Description</p></th></tr></thead><tbody><tr id="-u5a2ma_66"><td id="-u5a2ma_67"><p id="-u5a2ma_68"><b id="-u5a2ma_69">for type</b></p></td><td id="-u5a2ma_70"><p id="-u5a2ma_71">A type for which this viewer is intended.</p></td></tr><tr id="-u5a2ma_72"><td id="-u5a2ma_73"><p id="-u5a2ma_74"><b id="-u5a2ma_75">can wrap</b></p></td><td id="-u5a2ma_76"><p id="-u5a2ma_77">An additional filter for viewed objects.</p></td></tr><tr id="-u5a2ma_78"><td id="-u5a2ma_79"><p id="-u5a2ma_80"><b id="-u5a2ma_81">get presentation</b></p></td><td id="-u5a2ma_82"><p id="-u5a2ma_83">A string representation of an object.</p></td></tr><tr id="-u5a2ma_84"><td id="-u5a2ma_85"><p id="-u5a2ma_86"><b id="-u5a2ma_87">get custom watchables</b></p></td><td id="-u5a2ma_88"><p id="-u5a2ma_89">Subvalues of this object. Result of this function must be of type <code class="code" id="-u5a2ma_90">watchable list</code>.</p></td></tr></tbody></table></div><p id="-u5a2ma_91">Custom Viewers language introduces two new types: <code class="code" id="-u5a2ma_92">watchable list</code> and <code class="code" id="-u5a2ma_93">watchable</code>.</p><p id="-u5a2ma_94">This is the custom viewer specification for <code class="code" id="-u5a2ma_95">java.util.Map.Entry</code> class:</p><figure id="-u5a2ma_96"><img alt="Map entry viewer" src="https://resources.jetbrains.com/help/img/idea/2024.1/map-entry-viewer.png" title="Map entry viewer" width="924" height="456"></figure><p id="-u5a2ma_97">And here we see how a map entry is displayed in debugger view:</p><figure id="-u5a2ma_98"><img alt="Map entry" src="https://resources.jetbrains.com/help/img/idea/2024.1/map-entry.png" title="Map entry" width="260" height="58"></figure><aside class="prompt" data-type="tip" data-title="" id="-u5a2ma_99"><p id="-u5a2ma_100">Note that the <em id="-u5a2ma_101">JDT-tools</em> solution must be imported into your plugin solution in order to compile your custom viewers.</p></aside></section></section><section class="chapter"><h2 id="creatingcustomdebugger" data-toc="creatingcustomdebugger">Creating custom debugger</h2><p id="-u5a2ma_102">If generation of your language avoids&nbsp;<em id="-u5a2ma_103">BaseLanguage</em>, you'll need to take care of node tracing and breakpoint specification manually. Additionally, if you are generating languages other than Java, you'll have to attach the target platform debugger into MPS. The <b id="-u5a2ma_104">Debugger API</b> provided by MPS allows you to create such non-java debuggers. All the necessary classes are located in the "Debugger API for MPS" plugin. See also <a href="debugger-api.html" id="-u5a2ma_105">Debugger API description</a>.</p><p id="-u5a2ma_106">To summarize, when you target a language other than <em id="-u5a2ma_107">BaseLanguage</em>, you typically need to specify:</p><ul class="list _bullet" id="-u5a2ma_108"><li class="list__item" id="-u5a2ma_109"><p>nodes which should be traced (see&nbsp;<a href="#traceablenodes" id="-u5a2ma_110">Traceable nodes</a>)</p></li><li class="list__item" id="-u5a2ma_111"><p>on which nodes breakpoints could be created (see&nbsp;<a href="#breakpointcreators" id="-u5a2ma_112">Breakpoint creators</a>)</p></li><li class="list__item" id="-u5a2ma_113"><p>how to compile your generated sources (refer to <a href="howto-integrating-into-the-mps-make-framework.html" id="-u5a2ma_114">Make facets</a>)</p></li><li class="list__item" id="-u5a2ma_115"><p>how to start your application under debug (refer to <a href="run-configurations.html#introduction" id="-u5a2ma_116">Run configurations for languages generated into java</a>)</p></li></ul><p id="-u5a2ma_117">Not all of those steps are absolutely necessary - which of them are depends on the actual language.</p><aside class="prompt" data-type="tip" data-title="" id="-u5a2ma_118"><p id="-u5a2ma_119">The <b id="-u5a2ma_120">customizedDebugger</b> sample project bundled with MPS will give you an easy-to-follow example of a non-<em id="-u5a2ma_121">BaseLanguage</em> Java-generating language that customizes the breakpoints as well as node traces in order to support debugging.</p></aside><section class="chapter"><h3 id="traceablenodes" data-toc="traceablenodes">Traceable Nodes</h3><p id="-u5a2ma_122">This section describes how to specify which nodes require to save some additional information in <span class="filepath" id="-u5a2ma_123">trace       .info</span> file (like information about positions text, generated from the node, visible variables, name of the file the node was generated into, and so on). <span class="filepath" id="-u5a2ma_124">trace.info</span> files contain information allowing to connect nodes in MPS with generated text. For example, if a breakpoint is hit, java debugger tells MPS the line number in source file and to get the actual node from this information MPS uses information from <span class="filepath" id="-u5a2ma_125">trace          .info</span> files.</p><p id="-u5a2ma_126">Specifically, <span class="filepath" id="-u5a2ma_127">trace.info</span> files contain the following information:</p><ul class="list _bullet" id="-u5a2ma_128"><li class="list__item" id="-u5a2ma_129"><p>position information: name of text file and position in it where the node was generated;</p></li><li class="list__item" id="-u5a2ma_130"><p>scope information: for each "scope" node (such that has some variables, associated with it and visible in the scope of the node) â names and ids of variables visible in the scope;</p></li><li class="list__item" id="-u5a2ma_131"><p>unit information: for each "unit node" (such that represent some unit of a language, for example a class in java) â name of the unit the node is generated into.</p></li></ul><figure id="-u5a2ma_132"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/tracex1.png" class="lightbox"><img alt="trace" src="https://resources.jetbrains.com/help/img/idea/2024.1/tracex1.png" title="trace" width="500" height="432"></a></figure><p id="-u5a2ma_133">Concepts <code class="code" id="-u5a2ma_134">TraceableConcept</code>, <code class="code" id="-u5a2ma_135">ScopeConcept</code> and <code class="code" id="-u5a2ma_136">UnitConcept</code> of language <code class="code" id="-u5a2ma_137">jetbrains.mps.lang.traceable</code> are used for that purpose. To save some information into <span class="filepath" id="-u5a2ma_138">trace.info</span> file, user should derive from one of those concepts and implement the specific behavior method. The concepts are described in the table below.</p><div class="table-wrapper"><table class="wide" id="-u5a2ma_139"><thead><tr class="ijRowHead" id="-u5a2ma_140"><th id="-u5a2ma_141"><p id="-u5a2ma_142">Concept</p></th><th id="-u5a2ma_143"><p id="-u5a2ma_144">Description</p></th><th id="-u5a2ma_145"><p id="-u5a2ma_146">Behavior method to implement</p></th><th id="-u5a2ma_147"><p id="-u5a2ma_148">Example</p></th></tr></thead><tbody><tr id="-u5a2ma_149"><td id="-u5a2ma_150"><p id="-u5a2ma_151"><code class="code" id="-u5a2ma_152">TraceableConcept</code></p></td><td id="-u5a2ma_153"><p id="-u5a2ma_154">Concepts for which location in text is saved and for which breakpoints could be created.</p></td><td id="-u5a2ma_155"><p id="-u5a2ma_156"><code class="code" id="-u5a2ma_157">getTraceableProperty</code> â some property to be saved into <span class="filepath" id="-u5a2ma_158">trace.info</span> file.</p></td><td id="-u5a2ma_159"><figure id="-u5a2ma_160"><img alt="Position info" src="https://resources.jetbrains.com/help/img/idea/2024.1/positionInfo.png" title="Position info" width="462" height="207"></figure></td></tr><tr id="-u5a2ma_161"><td id="-u5a2ma_162"><p id="-u5a2ma_163"><code class="code" id="-u5a2ma_164">ScopeConcept</code></p></td><td id="-u5a2ma_165"><p id="-u5a2ma_166">Concepts which have some local variables, visible in the scope.</p></td><td id="-u5a2ma_167"><p id="-u5a2ma_168"><code class="code" id="-u5a2ma_169">getScopeVariables</code> â variable declarations in the scope.</p></td><td id="-u5a2ma_170"><figure id="-u5a2ma_171"><img alt="Scope info" src="https://resources.jetbrains.com/help/img/idea/2024.1/scopeInfo.png" title="Scope info" width="607" height="181"></figure></td></tr><tr id="-u5a2ma_172"><td id="-u5a2ma_173"><p id="-u5a2ma_174"><code class="code" id="-u5a2ma_175">UnitConcept</code></p></td><td id="-u5a2ma_176"><p id="-u5a2ma_177">Concepts which are generated into separate units, like classes or inner classes in java.</p></td><td id="-u5a2ma_178"><p id="-u5a2ma_179"><code class="code" id="-u5a2ma_180">getUnitName</code> â name of the generated unit.</p></td><td id="-u5a2ma_181"><figure id="-u5a2ma_182"><img alt="Unit info" src="https://resources.jetbrains.com/help/img/idea/2024.1/unitInfo.png" title="Unit info" width="611" height="322"></figure></td></tr></tbody></table></div><p id="-u5a2ma_183"><span class="filepath" id="-u5a2ma_184">trace.info</span> files are created on the last stage of generation â while generating text. So the described concepts are only to be used in languages generated into text. The entries are filled in automatically, whenever a&nbsp;<em id="-u5a2ma_185">TraceableConcept</em> ,&nbsp;<em id="-u5a2ma_186">ScopeConcept</em> or <em id="-u5a2ma_187">UnitConcept</em> are being generated through a&nbsp;<b id="-u5a2ma_188">reduction rule</b>.</p><p id="-u5a2ma_189">When automatic tracing is impossible, the $TRACE$ macro can be used in order to match the desired input node of a concept from <b id="-u5a2ma_190">language.high</b> with the generated code explicitly.</p><figure id="-u5a2ma_191"><img alt="Trace marco" src="https://resources.jetbrains.com/help/img/idea/2024.1/traceMacro.png" title="Trace marco" width="741" height="343"></figure></section><section class="chapter"><h3 id="breakpointcreators" data-toc="breakpointcreators">Breakpoint Creators</h3><p id="-u5a2ma_192">To specify how breakpoints are created on various nodes, root <code class="code" id="-u5a2ma_193">breakpoint creators</code> is used. This is a root of concept <code class="code" id="-u5a2ma_194">BreakpointCreator</code> from <code class="code" id="-u5a2ma_195">jetbrains.mps.debugger.api.lang</code> language. The root should be located in the language plugin model. It contains a list of <code class="code" id="-u5a2ma_196">BreakpointableNodeItem</code>, each of them specify a list of concept to create breakpoint for and a method actually creating a breakpoint. <code class="code" id="-u5a2ma_197">jetbrains.mps.debugger.api.lang</code>&nbsp;provides several concepts to operate with debuggers, and specifically to create breakpoints. They are described below.</p><ul class="list _bullet" id="-u5a2ma_198"><li class="list__item" id="-u5a2ma_199"><p><b id="-u5a2ma_200">DebuggerReference</b> â a reference to a specific debugger, like java debugger;</p></li><li class="list__item" id="-u5a2ma_201"><p><b id="-u5a2ma_202">CreateBreakpointOperation</b> â an operation which creates a location breakpoint of specified kind on a given node for a given project;</p></li><li class="list__item" id="-u5a2ma_203"><p><b id="-u5a2ma_204">DebuggerType</b> â a special type for references to debuggers.</p></li></ul><p id="-u5a2ma_205">On the following example <code class="code" id="-u5a2ma_206">breakpoint creators</code> node from <code class="code" id="-u5a2ma_207">baseLanguage</code> is shown.</p><figure id="-u5a2ma_208"><img alt="breakpoints creator" src="https://resources.jetbrains.com/help/img/idea/2024.1/breakpoint-creators.png" title="breakpoints creator" width="734" height="262"></figure><p id="-u5a2ma_209">In order to provide more complex filtering behavior, instead of a plain complex list breakpoint creators can use <code class="code" id="-u5a2ma_210">isApplicable</code> function. There is an intention to switch to using this function.</p></section></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="mps-console.html" class="navigation-links__prev">Console</a><a href="debugger-api.html" class="navigation-links__next">Debugger API</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>