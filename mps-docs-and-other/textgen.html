<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/textgen.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:23.27627267"><meta name="build-number" content="170"><title>TextGen | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"textgenlanguageaspect","level":0,"title":"TextGen language aspect","anchor":"#textgenlanguageaspect"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="TextGen | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/textgen.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="TextGen | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/textgen.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/textgen.html",
    "name": "TextGen | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="textgen" data-main-title="TextGen" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///language-definition.topic|Language-definition"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="textgen" id="textgen.topic">TextGen</h1><section class="chapter"><h2 id="textgenlanguageaspect" data-toc="textgenlanguageaspect">TextGen language aspect</h2><section class="chapter"><h3 id="introduction" data-toc="introduction">Introduction</h3><p id="br30yt_1">The <em id="br30yt_2">TextGen</em> language aspect defines a model to text transformation. It comes in handy each time you need to convert your models into the text form directly. The language contains constructs to print out text, transform nodes into text values and give the output some reasonable layout.</p></section><section class="chapter"><h3 id="operations" data-toc="operations">Operations</h3><p id="br30yt_3">The <em id="br30yt_4">append</em> command performs the transformation and adds resulting text to the output. You can use <em id="br30yt_5">found error</em> command to report problems in the model. The <em id="br30yt_6">with indent</em> command demarcates blocks with increased indentation. Alternatively, the <em id="br30yt_7">increase depth</em> and <em id="br30yt_8">decrease depth</em> commands manipulate the current indentation depth without being limited to a block structure. The <em id="br30yt_9">indent buffer</em> command applies the current indentation (as specified by <em id="br30yt_10">with ident</em> or <em id="br30yt_11">increase/decrease depth</em>) for the current line.</p><div class="table-wrapper"><table class="wide" id="br30yt_12"><thead><tr class="ijRowHead" id="br30yt_13"><th id="br30yt_14"><p id="br30yt_15">Operation</p></th><th id="br30yt_16"><p id="br30yt_17">Arguments</p></th></tr></thead><tbody><tr id="br30yt_18"><td id="br30yt_19"><p id="br30yt_20"><b id="br30yt_21">append</b></p></td><td id="br30yt_22"><p id="br30yt_23">any number of:</p><ul class="list _bullet" id="br30yt_24"><li class="list__item" id="br30yt_25"><p><b id="br30yt_26">{string value}</b>, <em id="br30yt_27">to insert use the " char, or pick constant from the completion menu</em></p></li><li class="list__item" id="br30yt_28"><p><b id="br30yt_29">\n</b></p></li><li class="list__item" id="br30yt_30"><p><b id="br30yt_31">$list{node.list}</b> - list without separator</p></li><li class="list__item" id="br30yt_32"><p><b id="br30yt_33">$list{node.list with ,}</b> - with separator (intentions to add/remove a separator are available)</p></li><li class="list__item" id="br30yt_34"><p><b id="br30yt_35">$ref{node.reference}</b>, e.g. <em id="br30yt_36">$ref{node.reference&lt;target&gt;} - deprecated and will be removed</em></p></li><li class="list__item" id="br30yt_37"><p><b id="br30yt_38">${node.child}</b></p></li><li class="list__item" id="br30yt_39"><p><b id="br30yt_40">${attributed node}$</b> - available in attribute nodes, delegates to the attributed node</p></li></ul></td></tr><tr id="br30yt_41"><td id="br30yt_42"><p id="br30yt_43"><b id="br30yt_44">found error</b></p></td><td id="br30yt_45"><p id="br30yt_46">error text</p></td></tr><tr id="br30yt_47"><td id="br30yt_48"><p id="br30yt_49"><b id="br30yt_50">decrease depth</b></p></td><td id="br30yt_51"><p id="br30yt_52">decrease indentation level from now onwards</p></td></tr><tr id="br30yt_53"><td id="br30yt_54"><p id="br30yt_55"><b id="br30yt_56">increase depth</b></p></td><td id="br30yt_57"><p id="br30yt_58">increase indentation level from now on</p></td></tr><tr id="br30yt_59"><td id="br30yt_60"><p id="br30yt_61"><b id="br30yt_62">indent buffer</b></p></td><td id="br30yt_63"><p id="br30yt_64">apply indentation to the current line</p></td></tr><tr id="br30yt_65"><td id="br30yt_66"><p id="br30yt_67"><b id="br30yt_68">with indent { &lt;code&gt; }</b></p></td><td id="br30yt_69"><p id="br30yt_70">increase indentation level for the &lt;code&gt;</p></td></tr></tbody></table></div><aside class="prompt" data-type="tip" data-title="" id="br30yt_71"><p id="br30yt_72">The parameters to the <b id="br30yt_73">append</b>&nbsp;command may have the <em id="br30yt_74">with indent</em>&nbsp;flag in the <b id="br30yt_75">Inspector tool window</b>&nbsp;set to <em id="br30yt_76">true</em> to get prepended with the current indentation buffer.</p></aside></section><section class="chapter"><h3 id="indentation" data-toc="indentation">Indentation</h3><p id="br30yt_77">Proper indentation is easy to get right once you understand the underlying principle. <em id="br30yt_78">TextGen</em> flushes the AST into text. The <em id="br30yt_79">TextGen</em>&nbsp;commands simply manipulate sequentially the output buffer and output some text to it, one node at a time. A variable holding the current depth of indentation (<b id="br30yt_80">indentation buffer</b>) is preserved for each root concept. <b id="br30yt_81">Indentation buffer</b>&nbsp;starts at zero and is changed by <b id="br30yt_82">increase/decrease depth</b>&nbsp;and <b id="br30yt_83">with indent</b>&nbsp;commands.</p><p id="br30yt_84">The "indentation", however, must be inserted into the output stream explicitly by the <b id="br30yt_85">append</b> commands. Simply marking a block with <b id="br30yt_86">with indent</b>&nbsp;will not automatically indent the text generated by the wrapped TextGen code.&nbsp;The <b id="br30yt_87">with indent</b>&nbsp;block only increases the value of the <b id="br30yt_88">indentation buffer</b>, but the individual <b id="br30yt_89">appends</b>&nbsp;may or may not wish to be prepended with the <b id="br30yt_90">indentation buffer</b> of the current size.</p><p id="br30yt_91">There are two ways to explicitly insert <b id="br30yt_92">indentation buffer</b>&nbsp;into the output stream:</p><ul class="list _bullet" id="br30yt_93"><li class="list__item" id="br30yt_94"><p><b id="br30yt_95">indent buffer</b>&nbsp;command</p></li><li class="list__item" id="br30yt_96"><p><b id="br30yt_97">with indent</b>&nbsp;flag in the inspector for the parameters of the <b id="br30yt_98">append</b>&nbsp;command</p></li></ul><p id="br30yt_99">For example, to properly indent&nbsp;<b id="br30yt_100">Constants</b>&nbsp;in a list of constants, we call <b id="br30yt_101">indent buffer</b>&nbsp;at the beginning of each emitted line. This ensures that the indentation is inserted only at the beginning of each line.</p><div class="code-block" data-lang="none">text gen component for concept Constants {&nbsp;
file name : Constants &nbsp; &nbsp;
extension : &lt;no extension&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
encoding : utf-8 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;
&nbsp; (node)-&gt;void {&nbsp;
&nbsp; &nbsp; append ${node.name} \n ;&nbsp;
&nbsp; &nbsp; with indent {&nbsp;
&nbsp; &nbsp; &nbsp; node.constants.forEach({~constant =&gt;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; indent buffer ;&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; append ${constant.name} {=} ${constant.initializer} \n ;&nbsp;
&nbsp; &nbsp; &nbsp; });&nbsp;
&nbsp; &nbsp; }&nbsp;
&nbsp; }&nbsp;
}&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
</div><p id="br30yt_103">Alternatively, we could specify the <b id="br30yt_104">with indent</b>&nbsp;flag in the inspector for the first parameter to the <b id="br30yt_105">append</b>&nbsp;command. This will also insert the indentation only at the beginning of each line.</p><figure id="br30yt_106"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/TextGen1.png" class="lightbox"><img alt="TextGen1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/TextGen1.png" title="TextGen1.png" width="800" height="278"></a></figure></section><section class="chapter"><h3 id="rootconcepts" data-toc="rootconcepts">Root concepts</h3><p id="br30yt_107">TextGen provides two types of root concepts:</p><ul class="list _bullet" id="br30yt_108"><li class="list__item" id="br30yt_109"><p><b id="br30yt_110">text gen component</b>, represented by the&nbsp;<em id="br30yt_111">ConceptTextGenDeclaration</em>&nbsp;concept, which encodes a transformation of a concept into text. For&nbsp;<b id="br30yt_112">rootable</b> concepts the target file can also be specified.</p></li><li class="list__item" id="br30yt_113"><p><b id="br30yt_114">base text gen component</b>, represented by the&nbsp;<em id="br30yt_115">LanguageTextGenDeclaration</em>&nbsp;concept, which allows definition of reusable textgen operations and utility methods. These can be called from other text gen components of the same language as well as extending languages</p></li></ul></section><section class="chapter"><h3 id="textgeninextendedconcepts" data-toc="textgeninextendedconcepts">TextGen in extended concepts</h3><p id="br30yt_116">MPS does not create files for root concept automatically. Even sub-concepts of a concept that has TextGen defined will have no file created automatically. Only exact concept matches are considered. If an extending concept desires to re-use textgen component of an ancestor as is, it should declare its own <b id="br30yt_117">empty</b> TextGen component, stating the essentials as the file name, encoding and extension, and leaving the body of the component empty.</p><aside class="prompt" data-type="tip" data-title="" id="br30yt_118"><p id="br30yt_119">Note that this only applies to <b id="br30yt_120">rootable</b> concepts. For non-roots you can only inherit a super-concept's textgen definition by not defining a textgen in your concept at all.</p></aside></section><section class="chapter"><h3 id="layout" data-toc="layout">Layout</h3><p id="br30yt_121">There's provisional mechanism to control layout of output files.&nbsp;The&nbsp;<b id="br30yt_122">text layout</b>&nbsp;section of&nbsp;<em id="br30yt_123">ConceptTextGenDeclaration</em>&nbsp;(available only in&nbsp;<b id="br30yt_124">rootable</b> concepts) allows the authors to define multiple logical sections (with a default one) and then optionally specify for each&nbsp;<b id="br30yt_125">append</b>, to which section to append the text.</p><p id="br30yt_126">Text generation is not always possible in a sequence that corresponds to lines in a physical file. For example, a Java source, one could distinguish 2 distinct areas, e.g.&nbsp;<b id="br30yt_127">imports</b>&nbsp;and&nbsp;<b id="br30yt_128">class body</b>, where&nbsp;<b id="br30yt_129">imports</b>&nbsp;is populated along with the&nbsp;<b id="br30yt_130">body</b>. A passionate language designer might want to break up the file further, e.g. up to<b id="br30yt_131">file comment</b> ,&nbsp;<b id="br30yt_132">package statement</b> ,&nbsp;<b id="br30yt_133">imports</b>, and&nbsp;<b id="br30yt_134">class body</b>&nbsp;that consists of&nbsp;<b id="br30yt_135">fields</b>&nbsp;and&nbsp;<b id="br30yt_136">methods</b>, and populate each one independently while traversing a&nbsp;<em id="br30yt_137">ClassConcept</em>. That's what we call a&nbsp;<em id="br30yt_138">layout</em>&nbsp;of an output file, and that's what we give control over now. MPS veterans might be aware of two buffers (<em id="br30yt_139">TOP</em>&nbsp;and&nbsp;<em id="br30yt_140">BOTTOM</em>) that used to be available in TextGen for years. These were predefined, hard-coded values. Now it's up to language designer to designate areas of an output file and their order.</p><p id="br30yt_141">Note, distinct areas come handy especially when generating text from attributes, as they change order of execution. With them, it's even more tricky to make sure flow of text gen corresponds to physical text lines, and designated areas make generation a lot more comfortable.</p><p id="br30yt_142">Layout of the file could be specified for a top text gen, the one that produces files.</p><p id="br30yt_143">The support for this mechanism is preliminary and is quite rudimentary now. We utilize it in our&nbsp;<em id="br30yt_144">BaseLanguage</em>&nbsp;implementation, so this notice is to explain you what's going on rather than encourage you to put this into production.</p><figure id="br30yt_145"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/tgp1.png" class="lightbox"><img alt="tgp1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/tgp1.png" title="tgp1.png" width="700" height="877"></a></figure></section><section class="chapter"><h3 id="contextobjects" data-toc="contextobjects">Context objects</h3><p id="br30yt_146">It is vital for certain model-to-text conversion scenarios to preserve some context information during TextGen. In BaseLanguage, for example, TextGen has to track model imports and qualified class names. The cumbersome and low-level approach of previous versions based on direct text buffer manipulation&nbsp;has been replaced with the possibility to define&nbsp;and use customized objects as part of the concept's textgen specification.</p><figure id="br30yt_147"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/ContextObject1.png" class="lightbox"><img alt="ContextObject1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/ContextObject1.png" title="ContextObject1.png" width="500" height="273"></a></figure><p id="br30yt_148">At the moment, regular java class (with a no-arg or a single-arg constructor that takes concept instance) are supported as context objects.&nbsp;You reference context objects from code as a regular variable.</p></section><section class="chapter"><h3 id="handlingattributesintextgen" data-toc="handlingattributesintextgen">Handling attributes in TextGen</h3><p id="br30yt_149">When nodes are annotated with <b id="br30yt_150">Attributes</b>, the <em id="br30yt_151">TexGen</em> for these attributes is processed first. The <em id="br30yt_152">${attributed node}</em>&nbsp;construct within the attribute's TextGen will then insert the TextGen of the attributes node itself.</p><p id="br30yt_153">If there are multiple attributes on a single node, they are processed in turn, starting with the last-assigned (top-most) attribute.&nbsp;Attributes without TextGen associated are ignored and skipped.</p><aside class="prompt" data-type="tip" data-title="" id="br30yt_154"><p id="br30yt_155">The top-most attribute is technically the last in the containment (the way editor depicts the attributes is&nbsp;<b id="br30yt_156"><em id="br30yt_157">visually</em></b> &nbsp;different from the order one may notice in&nbsp;<b id="br30yt_158">Node Explorer</b>). That is a node with attributes A1 and A2 in the editor looks like A2(A1(N)), and TextGen processes A2 first, then A1, then N. When TextGen is asked to generate text for N, it looks up the last attribute in the containment that has textgen defined (if any), and delegates to it. Let's assume A2 has TextGen, and A1 not. Then, if the attribute's component has ${attributedNode}, TextGen would check the previous attributes for associated textgen. If there are none (and in our sample A1 has none), text generation for the actual node N is the last to receive control.</p></aside></section><section class="chapter"><h3 id="examples" data-toc="examples">Examples</h3><p id="br30yt_159">Here is an example of the <b id="br30yt_160">text gen</b> component for the <em id="br30yt_161">ForeachStatement</em> (jetbrains.mps.baseLanguage).</p><div class="code-block" data-lang="none">text gen component for concept ForeachStatement {
  (node)-&gt;void {
    if (node.loopLabel != null) {
      append \n ${node.loopLabel.name} {:} ;
    } else if (node.label != null) {
      append \n ${node.label} {:} ;
    }
    append \n ;
    indent buffer ;
    append {for (} ${node.variable} { : } ${node.iterable} {) {} ;
    with indent {
      append ${node.body} ;
    }
    append \n {}} ;
  }
}
</div><p id="br30yt_163">This is an artificial example of the <b id="br30yt_164">text gen</b>:</p><div class="code-block" data-lang="none">text gen component for concept CodeBlockConcept {
  (node)-&gt;void {
      indent buffer ;
      append {codeBlock {} \n ;
      with indent {
        indent buffer ;
        append {// Begin of codeBlock} \n ;

        indent buffer ;
        append {int i = 0} \n ;

        indent buffer ;
        append {// End of codeBlock} \n ;
      }
      append {}} ;
  }
}
</div><p id="br30yt_166">producing following code block containing a number of lines with indentation:</p><div class="code-block" data-lang="none">text gen component for concept CodeBlockConcept {
codeBlock {
  // Begin of codeBlock
  int i = 0
  // End of codeBlock
}
</div><p id="br30yt_168">An example of <b id="br30yt_169">TextGen</b> for attribute that adds extra text to output of attributed node:</p><figure id="br30yt_170"><img alt="MethodDocCommentAttribute.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/MethodDocCommentAttribute.png" title="MethodDocCommentAttribute.png" width="407" height="182"></figure></section></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="generator-user-guide-demo7.html" class="navigation-links__prev">Generator User Guide Demo7</a><a href="migrations.html" class="navigation-links__next">Migrations</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>