<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/diagramming-editor.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:21.574851563"><meta name="build-number" content="170"><title>Diagramming Editor | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"addingelements","level":0,"title":"Adding elements","anchor":"#addingelements"},{"id":"samples","level":0,"title":"Samples","anchor":"#samples"},{"id":"dependencies","level":0,"title":"Dependencies","anchor":"#dependencies"},{"id":"diagramdefinition","level":0,"title":"Diagram definition","anchor":"#diagramdefinition"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Diagramming Editor | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/diagramming-editor.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Diagramming Editor | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/diagramming-editor.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/diagramming-editor.html",
    "name": "Diagramming Editor | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="diagramming-editor" data-main-title="Diagramming Editor" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///language-definition.topic|Language-definition///editor.topic|Editor"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="diagramming-editor" id="diagramming-editor.topic">Diagramming Editor</h1><p id="fn2wgs_1">The diagramming support in MPS allows the language designers to provide graphical editors to their concepts. The diagrams typically consist of <b id="fn2wgs_2">blocks</b>, represented by boxes, and <b id="fn2wgs_3">connectors</b>, represented by lines connecting the boxes. Both blocks and connectors are visualization of nodes from the underlying model.</p><aside class="prompt" data-type="warning" data-title="" id="fn2wgs_4"><p id="fn2wgs_5">The diagramming support in MPS has been deprecated and should not be used. We encourage the users to use the <a href="https://plugins.jetbrains.com/plugin/13240-de-itemis-mps-editor-diagram" id="fn2wgs_6" data-external="true" rel="noopener noreferrer">de.itemis.mps.editor.diagram</a> plugin (also available in the Plugin manager in MPS itself). <br> If you cannot find a version of the plugin suitable for your version of MPS and you have an adventurous spirit, you can try to build it yourself from the <a href="https://github.com/JetBrains/MPS-extensions.git" id="fn2wgs_8" data-external="true" rel="noopener noreferrer">sources</a>. Simply checkout the branch corresponding to the desired MPS version (e.g. origin/mps/2021.3) and run "gradlew" from the command line.</p></aside><figure id="fn2wgs_9"><img alt="Diagramm" src="https://resources.jetbrains.com/help/img/idea/2024.1/di403.png" title="Diagramm" width="557" height="409"></figure><p id="fn2wgs_10"><b id="fn2wgs_11">Ports</b>&nbsp;(optional) are predefined places on the shapes of the <b id="fn2wgs_12">blocks</b>, to which <b id="fn2wgs_13">connectors</b> may be attached to. MPS allows for two types of ports - input and output ones.</p><p id="fn2wgs_14">Optionally, a palette of available <b id="fn2wgs_15">blocks</b> may be displayed on the side of the diagram, so the user could quickly pick the type of the box they need to add to the diagram.</p><section class="chapter"><h2 id="addingelements" data-toc="addingelements">Adding elements</h2><p id="fn2wgs_16">Blocks get added by double-clicking in a free area of the editor. The type of the block is chosen either by activating the particular block type in the palette or by choosing from a popup completion menu that shows up after clicking in the free area.</p><p id="fn2wgs_17">Connectors get created by dragging from an output port of a block to an input port of another or the same block.</p></section><section class="chapter"><h2 id="samples" data-toc="samples">Samples</h2><p id="fn2wgs_18">MPS comes with bundled samples of diagramming editors. You can try the <em id="fn2wgs_19">componentDependencies</em>&nbsp;or the <em id="fn2wgs_20">mindMaps</em>&nbsp;sample projects for initial familiarization with how diagrams can be created.</p><aside class="prompt" data-type="tip" data-title="" id="fn2wgs_21"><p id="fn2wgs_22">This document uses the <em id="fn2wgs_23">componentDependencies</em> sample for most of the code examples. The sample defines a simple language for expressing dependencies among components in a system (a component set). Use the "Push Editor Hints" option in the popup menu to activate the diagramming editor.</p><figure id="fn2wgs_24"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Push1.png" class="lightbox"><img alt="Pucj Editor Hints" src="https://resources.jetbrains.com/help/img/idea/2024.1/Push1.png" title="Pucj Editor Hints" width="300" height="298"></a></figure><figure id="fn2wgs_25"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Push2.png" class="lightbox"><img alt="Selecting Diagram View" src="https://resources.jetbrains.com/help/img/idea/2024.1/Push2.png" title="Selecting Diagram View" width="300" height="249"></a></figure></aside></section><section class="chapter"><h2 id="dependencies" data-toc="dependencies">Dependencies</h2><p id="fn2wgs_26">In order to be able to define diagramming editors in your language, the language has to have the required dependencies and used languages properly set:</p><figure id="fn2wgs_27"><img alt="Used languages and developer kits" src="https://resources.jetbrains.com/help/img/idea/2024.1/di4.png" title="Used languages and developer kits" width="548" height="346"></figure><figure id="fn2wgs_28"><img alt="Dependencies" src="https://resources.jetbrains.com/help/img/idea/2024.1/di5.png" title="Dependencies" width="548" height="344"></figure><ul class="list _bullet" id="fn2wgs_29"><li class="list__item" id="fn2wgs_30"><p><em id="fn2wgs_31">jetbrains.mps.lang.editor.diagram</em>&nbsp;- the language for defining diagrams</p></li><li class="list__item" id="fn2wgs_32"><p><em id="fn2wgs_33">jetbrains.mps.lang.editor.figures</em>&nbsp;(optional) - a language for defining custom visual elements (blocks and connectors)</p></li><li class="list__item" id="fn2wgs_34"><p><em id="fn2wgs_35">jetbrains.jetpad</em>&nbsp;and&nbsp;<em id="fn2wgs_36">jetbrains.mps.lang.editor.diagram.runtime</em>&nbsp;- runtime libraries that handle the diagram rendering and behavior</p></li></ul></section><section class="chapter"><h2 id="diagramdefinition" data-toc="diagramdefinition">Diagram definition</h2><p id="fn2wgs_37">Let's start from the concept that should be the root of the diagram. The diagramming editor for that node will contain the <em id="fn2wgs_38">diagram</em>&nbsp;editor cell:</p><figure id="fn2wgs_39"><img alt="Editor cell" src="https://resources.jetbrains.com/help/img/idea/2024.1/di6.png" title="Editor cell" width="731" height="569"></figure><aside class="prompt" data-type="tip" data-title="" id="fn2wgs_40"><p id="fn2wgs_41">Note that the <b id="fn2wgs_42">diagram</b>&nbsp;editor cell does not have to be the root of the editor definition. Just like any other editor cell it can be composed with other editor cells into a larger editor definition.</p></aside><p id="fn2wgs_43">The <em id="fn2wgs_44">diagram</em>&nbsp;cell needs its <em id="fn2wgs_45">content</em>&nbsp;parameter to hold all the nodes that should become part of the diagram. In our case we pass in all the components (will be rendered as blocks) and their dependencies (will be rendered as connectors). The way these nodes are rendered is defined by their respective editor definitions, as explained later.</p><p id="fn2wgs_46">Down in the <em id="fn2wgs_47">Inspector</em>&nbsp;<b id="fn2wgs_48">element creation</b>&nbsp;handlers can be defined. These get invoked whenever a new visual block is to be created in the diagram. Each handler has several properties to set:</p><ul class="list _bullet" id="fn2wgs_49"><li class="list__item" id="fn2wgs_50"><p><em id="fn2wgs_51">name</em>&nbsp;- an arbitrary name to represent the option of creating a new element in the completion menu and in the palette</p></li><li class="list__item" id="fn2wgs_52"><p><em id="fn2wgs_53">container</em>&nbsp;- a collection of nodes that the newly created node should be added to</p></li><li class="list__item" id="fn2wgs_54"><p><em id="fn2wgs_55">concept</em>&nbsp;- the concept of the node that gets created through the handler, defaults to the type of the nodes in the <em id="fn2wgs_56">container</em>, but allows sub-types to be specified instead</p></li><li class="list__item" id="fn2wgs_57"><p><em id="fn2wgs_58">on create</em>&nbsp;- a handler that can manipulate the node before it gets added to the model and rendered in the diagram. Typically the name is set to some meaningful value and the position of the block on the screen is saved into the model.</p></li></ul><p id="fn2wgs_59">There can be multiple <b id="fn2wgs_60">element creation</b>&nbsp;handlers defined.</p><p id="fn2wgs_61">Similarly, <b id="fn2wgs_62">connector creation</b>&nbsp;handlers can be defined for the diagram cell to handle connector creation. On top of the attributes already described for <b id="fn2wgs_63">element creation</b>&nbsp;handlers, <b id="fn2wgs_64">connector creation</b>&nbsp;handlers have these specific attributes:</p><ul class="list _bullet" id="fn2wgs_65"><li class="list__item" id="fn2wgs_66"><p><em id="fn2wgs_67">can create</em>&nbsp;- a concept function returning a boolean value and indicating whether a connector with the specified properties can be legally constructed and added to the diagram.</p></li><li class="list__item" id="fn2wgs_68"><p><em id="fn2wgs_69">on create</em>&nbsp;- a concept function that handles creation of a now connector.</p></li><li class="list__item" id="fn2wgs_70"><p>the <em id="fn2wgs_71">from</em>&nbsp;and <em id="fn2wgs_72">to</em>&nbsp;parameters to these functions specify the source and target nodes (represented by a <b id="fn2wgs_73">Block</b> or a <b id="fn2wgs_74">Port</b>) for the new connection.</p></li><li class="list__item" id="fn2wgs_75"><p>the <em id="fn2wgs_76">fromId</em>&nbsp;and <em id="fn2wgs_77">toId</em>&nbsp;parameters to these functions&nbsp;specify the ids of the source and target nodes (represented by a&nbsp;<b id="fn2wgs_78">Block</b>&nbsp;or a&nbsp;<b id="fn2wgs_79">Port</b>) for the new connection.</p></li></ul><p id="fn2wgs_80">Elements get created when the user double-clicks in the editor. If multiple element types are available, a completion popup menu shows up.</p><p id="fn2wgs_81"><b id="fn2wgs_82">Connectors</b> get created when the user drags from the <b id="fn2wgs_83">source block</b> or its <b id="fn2wgs_84">output port</b> to a <b id="fn2wgs_85">target block</b> or its <b id="fn2wgs_86">input port</b>.</p><section class="chapter"><h3 id="palette" data-toc="palette">Palette</h3><figure id="fn2wgs_87"><img alt="Pallete" src="https://resources.jetbrains.com/help/img/idea/2024.1/di400.png" title="Pallete" width="551" height="237"></figure><p id="fn2wgs_88">The optional palette will allow developers to pick a type of blocks and links to create whenever double-clicking or dragging in the diagram. The palette is defined for diagram editor cells and apart from specifying the <b id="fn2wgs_89">creation</b>&nbsp;components&nbsp;allows for visual grouping and separating of the palette items..</p></section><section class="chapter"><h3 id="blocks" data-toc="blocks">Blocks</h3><p id="fn2wgs_90">The concepts for the nodes that want to participate in diagramming as <b id="fn2wgs_91">blocks</b> need to provide properties that will preserve useful diagramming qualities, such as <b id="fn2wgs_92">x/y coordinates</b>, <b id="fn2wgs_93">size</b>, <b id="fn2wgs_94">color</b>, <b id="fn2wgs_95">title</b>, and so on.</p><figure id="fn2wgs_96"><img alt="Diagram properties" src="https://resources.jetbrains.com/help/img/idea/2024.1/di7.png" title="Diagram properties" width="371" height="277"></figure><p id="fn2wgs_97">Additionally, the nodes should provide input and output ports, which connectors can visually&nbsp;connect to.</p><p id="fn2wgs_98">The editor will then use the <em id="fn2wgs_99">diagram node</em>&nbsp;cell:</p><figure id="fn2wgs_100"><img alt="Diagram node cell" src="https://resources.jetbrains.com/help/img/idea/2024.1/di9.png" title="Diagram node cell" width="570" height="156"></figure><p id="fn2wgs_101">The <b id="fn2wgs_102">diagram node</b>&nbsp;cell requires a <b id="fn2wgs_103">figure</b> to be specified. This is a reference to a <em id="fn2wgs_104">figure</em>&nbsp;class that defines the visual layout of the block using the&nbsp;<em id="fn2wgs_105">jetpad</em>&nbsp;framework. MPS comes with a set of pre-defined graphical shapes in the <em id="fn2wgs_106">jetbrains.mps.lang.editor.figures.library</em>&nbsp;solution, which you can import and use. Each figure may expose several <b id="fn2wgs_107">property fields</b>&nbsp;that hold visual characteristics of the figure.&nbsp;All the figure parameters should be specified in the editor definition, most likely by mapping them to the node's properties defined in the concept:</p><figure id="fn2wgs_108"><img alt="Diagram editor for the concept" src="https://resources.jetbrains.com/help/img/idea/2024.1/di8.png" title="Diagram editor for the concept" width="856" height="118"></figure><p id="fn2wgs_109">The values for parameters may ether be references to the node's properties, or&nbsp;<em id="fn2wgs_110">BaseLanguage</em>&nbsp;expressions prepended with the&nbsp;<b id="fn2wgs_111">#</b>&nbsp;character. You can use&nbsp;<em id="fn2wgs_112">this</em>&nbsp;to refer to the edited node from within the expression.</p><p id="fn2wgs_113">If the node defines input and output ports, they should also be specified as parameters here so that they get displayed in the diagram. Again, to specify ports you can either refer to the node's properties or use a <em id="fn2wgs_114">BaseLanguage</em>&nbsp;expression prepended with the <b id="fn2wgs_115">#</b>&nbsp;character.</p><aside class="prompt" data-type="tip" data-title="" id="fn2wgs_116"><p id="fn2wgs_117">As all editor cells, diagramming cells can have&nbsp;<b id="fn2wgs_118">Action Maps</b>&nbsp;associated with them. This way you can enable the&nbsp;<b id="fn2wgs_119">Delete</b>&nbsp;key to delete a block or a connector.</p></aside></section><section class="chapter"><h3 id="customfigures" data-toc="customfigures">Custom figures</h3><p id="fn2wgs_120">Alternatively you can define your own figures. These are <em id="fn2wgs_121">BaseLanguage</em>&nbsp;classes implementing the&nbsp;<em id="fn2wgs_122">jetbrains.jetpad.projectional.view.View</em>&nbsp;interface (or its descendants) and annotated with the <em id="fn2wgs_123">@Figure</em>&nbsp;annotation. Use the <em id="fn2wgs_124">@FigureParameter</em>&nbsp;annotation to demarcate property fields, such as&nbsp;<em id="fn2wgs_125">width</em> ,&nbsp;<em id="fn2wgs_126">height</em>, and so on.</p><figure id="fn2wgs_127"><img alt="myCell" src="https://resources.jetbrains.com/help/img/idea/2024.1/di10.png" title="myCell" width="774" height="447"></figure><p id="fn2wgs_128">The <em id="fn2wgs_129">MovableContentView</em>&nbsp;interface provides additional parameters to the figure class:</p><figure id="fn2wgs_130"><img alt="MovableContentView" src="https://resources.jetbrains.com/help/img/idea/2024.1/di11.png" title="MovableContentView" width="804" height="106"></figure><p id="fn2wgs_131">By studying <em id="fn2wgs_132">jetbrains.mps.lang.editor.figures.library</em>&nbsp;you may get a better understanding of the&nbsp;<em id="fn2wgs_133">jetpad</em>&nbsp;library and its inner workings.</p></section><section class="chapter"><h3 id="connectors" data-toc="connectors">Connectors</h3><p id="fn2wgs_134">The nodes that will be represented by connectors do not need to preserve any diagramming properties. As of version 3.1 connectors cannot be visually customized and will be always rendered as a solid black line. This will most likely change in one of the following versions of MPS.</p><figure id="fn2wgs_135"><img alt="Connectors" src="https://resources.jetbrains.com/help/img/idea/2024.1/di12.png" title="Connectors" width="376" height="239"></figure><p id="fn2wgs_136">The editor for the node needs to contain a <b id="fn2wgs_137">diagram connector</b>&nbsp;cell:</p><figure id="fn2wgs_138"><img alt="Diagram connector cell" src="https://resources.jetbrains.com/help/img/idea/2024.1/di13.png" title="Diagram connector cell" width="554" height="151"></figure><p id="fn2wgs_139">The cell requires a source and a target for the connector. These can either be <b id="fn2wgs_140">ports</b>:</p><figure id="fn2wgs_141"><img alt="Connector settings" src="https://resources.jetbrains.com/help/img/idea/2024.1/di14.png" title="Connector settings" width="953" height="104"></figure><p id="fn2wgs_142">or <b id="fn2wgs_143">nodes</b> themselves:</p><figure id="fn2wgs_144"><img alt="Connector settings" src="https://resources.jetbrains.com/help/img/idea/2024.1/di15.png" title="Connector settings" width="807" height="101"></figure><p id="fn2wgs_145">The values may again be direct references to node's properties or <em id="fn2wgs_146">BaseLanguage</em>&nbsp;expressions prepended with the <b id="fn2wgs_147">#</b>&nbsp;character.</p></section><section class="chapter"><h3 id="renderingports" data-toc="renderingports">Rendering ports</h3><p id="fn2wgs_148">Input and output ports should use the <em id="fn2wgs_149">input port</em>&nbsp;and <em id="fn2wgs_150">output port</em>&nbsp;editor cells, respectively. The rendering of ports cannot be customized in MPS 3.1, but will be most likely enabled in later versions.</p><aside class="prompt" data-type="tip" data-title="" id="fn2wgs_151"><p id="fn2wgs_152">Use the <b id="fn2wgs_153">T</b> key to rotate the ports of a selected block by 90 degrees. This way you can easily switch between the left-to-right and top-to-bottom port positions.</p></aside></section><section class="chapter"><h3 id="usingimplicitports" data-toc="usingimplicitports">Using implicit ports</h3><p id="fn2wgs_154">In some situations you will not be able to represent ports directly in the model. You'll only want to use blocks and connectors, but ports will have to be somehow derived from the model. This case can easily be supported:</p><ol class="list _decimal" id="fn2wgs_155" type="1"><li class="list__item" id="fn2wgs_156"><p>Decide on the representation of ports. Each port will be represented by a unique identifier, such as number or a string</p></li><li class="list__item" id="fn2wgs_157"><p id="fn2wgs_158">Have the concept for the blocks define behavior methods that return collections of identifiers - separately for input and output ports</p><figure id="fn2wgs_159"><img alt="Defining behavior" src="https://resources.jetbrains.com/help/img/idea/2024.1/di1.png" title="Defining behavior" width="371" height="256"></figure></li><li class="list__item" id="fn2wgs_160"><p id="fn2wgs_161">Use the methods to provide the <b id="fn2wgs_162">inputPorts</b>&nbsp;and <b id="fn2wgs_163">outputPorts</b>&nbsp;parameters to the <b id="fn2wgs_164">DiagramNode</b>&nbsp;editor cell</p><figure id="fn2wgs_165"><img alt="methods of the DiagramNode" src="https://resources.jetbrains.com/help/img/idea/2024.1/di2.png" title="methods of the DiagramNode" width="870" height="78"></figure></li><li class="list__item" id="fn2wgs_166"><p id="fn2wgs_167">In the connector editor cell refer to the block's node as <b id="fn2wgs_168">source</b> and <b id="fn2wgs_169">target</b>. Append the requested id after the <b id="fn2wgs_170">#</b>&nbsp;symbol</p><figure id="fn2wgs_171"><img alt="connector reference" src="https://resources.jetbrains.com/help/img/idea/2024.1/di3.png" title="connector reference" width="580" height="102"></figure></li></ol></section></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="extending-the-transformation-menu-language.html" class="navigation-links__prev">Extending the Transformation Menu Language</a><a href="editor-language-generation-api.html" class="navigation-links__next">Editor language generation API</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>