<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/behavior.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:21.785907383"><meta name="build-number" content="170"><title>Behavior | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"conceptinstancemethods","level":0,"title":"Concept instance methods","anchor":"#conceptinstancemethods"},{"id":"conceptconstructors","level":0,"title":"Concept constructors","anchor":"#conceptconstructors"},{"id":"conceptstaticmethods","level":0,"title":"Concept static methods","anchor":"#conceptstaticmethods"},{"id":"callingbehaviormethodsonnullnodes/concepts","level":0,"title":"Calling behavior methods on null nodes/concepts","anchor":"#callingbehaviormethodsonnullnodes/concepts"}]</script><script type="application/json" id="topic-shortcuts">{"CtrlCommand":{"Windows":{"keystrokes":[{"keys":["mod-Control"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command"]}],"platform":"MAC"}}}</script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Behavior | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/behavior.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Behavior | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/behavior.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/behavior.html",
    "name": "Behavior | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="behavior" data-main-title="Behavior" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///language-definition.topic|Language-definition"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="behavior" id="behavior.topic">Behavior</h1><p id="-vlyucl_1">During syntax tree manipulation, common operations are often extracted to utility methods in order to simplify the task and reuse functionality. It is possible to extract such utilities into static methods or create node wrappers holding the utility code in virtual methods. However, in MPS a better solution is available: the <em id="-vlyucl_2">behavior</em> language aspect. It makes it possible to create virtual and non-virtual instance methods, static methods, and concept instance constructors on nodes.</p><figure id="-vlyucl_3"><img alt="Behavior example" src="https://resources.jetbrains.com/help/img/idea/2024.1/BehaviorExample.png" title="Behavior example" width="706" height="444"></figure><p id="-vlyucl_4">The methods in the Behavior aspect are implemented using <em id="-vlyucl_5">BaseLanguage</em>, typically enhanced with extensions:</p><ul class="list _bullet" id="-vlyucl_6"><li class="list__item" id="-vlyucl_7"><p>the <em id="-vlyucl_8">collections</em> language for intuitive collection API</p></li><li class="list__item" id="-vlyucl_9"><p>the <em id="-vlyucl_10">closures</em> language for easy use of function literals</p></li><li class="list__item" id="-vlyucl_11"><p>the <em id="-vlyucl_12">smodel</em> language for manipulating the code (structure)</p></li></ul><section class="chapter"><h2 id="conceptinstancemethods" data-toc="conceptinstancemethods">Concept instance methods</h2><p id="-vlyucl_13">A Concept instance method is a method, which can be invoked on any specified concept <b id="-vlyucl_14">instance</b>. They can be both <em id="-vlyucl_15">virtual</em> and <em id="-vlyucl_16">non-virtual</em>. While <em id="-vlyucl_17">virtual</em> methods can be <b id="-vlyucl_18">overridden</b> in extending concepts, <em id="-vlyucl_19">non-virtual</em> ones cannot. Also a virtual concept method can be declared abstract, forcing the inheritors to provide an implementation.</p><p id="-vlyucl_20">Concept instance methods can be implemented both in concept declarations and in concept interfaces. This may lead to some method resolution issues. When MPS needs to decide, which virtual method to invoke in the inheritance hierarchy, the following method resolution order (MRO) algorithm is applied:</p><ul class="list _bullet" id="-vlyucl_21"><li class="list__item" id="-vlyucl_22"><p>If the current concept implements a matching method, invoke it. Return the computed value.</p></li><li class="list__item" id="-vlyucl_23"><p>Invoke the algorithm recursively for an extended concept, if there is one. In case of success return the computed value.</p></li><li class="list__item" id="-vlyucl_24"><p>Invoke the algorithm recursively for all implemented concept interfaces in the order of their definition in the&nbsp;<b id="-vlyucl_25">implements</b>&nbsp;section. The first found interface implementing the method is used. In case of success return the computed value.</p></li><li class="list__item" id="-vlyucl_26"><p>Return a failure.</p></li></ul><section class="chapter"><h3 id="overridingbehaviormethods" data-toc="overridingbehaviormethods">Overriding behavior methods</h3><p id="-vlyucl_27">In order to override a method inherited from a super-concept, use the&nbsp;<kbd id="-vlyucl_28" data-key="CtrlCommand">Ctrl</kbd> keyboard shortcut to invoke the&nbsp;<b id="-vlyucl_29">Override</b> dialog. There you can select the method to override. By typing the name of the desired method to override you narrow down the list of methods.</p></section></section><section class="chapter"><h2 id="conceptconstructors" data-toc="conceptconstructors">Concept constructors</h2><p id="-vlyucl_30">When a concept instance is created, it is often useful to initialize some properties/references/children to the default values. This is what concept constructors can be used for. The code inside the concept construction is invoked on each instantiation of a new node of a particular concept.</p><p id="-vlyucl_31">A Behavior constructor will be called when</p><ul class="list _bullet" id="-vlyucl_32"><li class="list__item" id="-vlyucl_33"><p>creating nodes with&nbsp;<b id="-vlyucl_34">add new initialized()</b> ,&nbsp;<b id="-vlyucl_35">set new initialized()</b>&nbsp;and similar methods from&nbsp;<code class="code" id="-vlyucl_36">j.m.lang.actions</code>&nbsp;and&nbsp;<code class="code" id="-vlyucl_37">j.m.lang.smodel</code></p></li><li class="list__item" id="-vlyucl_38"><p>creating a node with&nbsp;<code class="code" id="-vlyucl_39">new node&lt;Car&gt;()</code></p></li></ul><p id="-vlyucl_40">Using quotation like&nbsp;&lt;Car()&gt; will&nbsp;<b id="-vlyucl_41">not</b>&nbsp;call the Behaviors constructor. Consider using the&nbsp;<a href="quotations.html" id="-vlyucl_42">smodel constructor</a>&nbsp;instead.</p><aside class="prompt" data-type="tip" data-title="" id="-vlyucl_43"><p id="-vlyucl_44">The node's constructor is invoked before the node gets attached to the model. Therefore it is pointless to investigate the node's&nbsp;<b id="-vlyucl_45">parent</b> ,&nbsp;<b id="-vlyucl_46">ancestors</b> ,&nbsp;<b id="-vlyucl_47">children</b>&nbsp;or&nbsp;<b id="-vlyucl_48">descendants</b>&nbsp;in the behaviour constructor. These calls will always evaluate to&nbsp;<em id="-vlyucl_49">null</em>. You should define&nbsp;<b id="-vlyucl_50">NodeFactories</b>&nbsp;(<a href="editor-actions.html" id="-vlyucl_51">Editor Actions</a>) in order to have your nodes initialized with values depending on their context within the model.</p></aside></section><section class="chapter"><h2 id="conceptstaticmethods" data-toc="conceptstaticmethods">Concept static methods</h2><p id="-vlyucl_52">Some utility methods do not belong to concept instances and so should not be created as instance methods. For concept-wide functionality, MPS provides static concept methods. See also <a href="constraints.html" id="-vlyucl_53">Constraints</a></p></section><section class="chapter"><h2 id="callingbehaviormethodsonnullnodes/concepts" data-toc="callingbehaviormethodsonnullnodes/concepts">Calling behavior methods on null nodes/concepts</h2><p id="-vlyucl_54">When a behavior method is invoked on a null object that represents a node or a concept, the call does not result in a NullPointerException. Instead, a null value is returned, provided the return type of the invoked method is a ClassifierType or a StringType. For a PrimitiveType, the default value of that type is returned.</p></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="constraintrules.html" class="navigation-links__prev">Constraint Rules</a><a href="typesystem.html" class="navigation-links__next">Typesystem</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>