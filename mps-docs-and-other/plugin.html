<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/plugin.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:20.613857383"><meta name="build-number" content="170"><title>Plugin | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"plugininstantiation","level":0,"title":"Plugin instantiation","anchor":"#plugininstantiation"},{"id":"actionsandactiongroups","level":0,"title":"Actions and action groups","anchor":"#actionsandactiongroups"},{"id":"keymapchanges","level":0,"title":"KeyMap Changes","anchor":"#keymapchanges"},{"id":"nondumbawareactions","level":0,"title":"NonDumbAwareActions","anchor":"#nondumbawareactions"},{"id":"editortabs","level":0,"title":"Editor Tabs","anchor":"#editortabs"},{"id":"editorTabsOrder","level":0,"title":"Order","anchor":"#editorTabsOrder"},{"id":"tools","level":0,"title":"Tools","anchor":"#tools"},{"id":"tabbedtools","level":0,"title":"Tabbed Tools","anchor":"#tabbedtools"},{"id":"preferencescomponents","level":0,"title":"Preferences components","anchor":"#preferencescomponents"},{"id":"custompluginparts(projectplugin,applicationplugin)","level":0,"title":"Custom plugin parts (ProjectPlugin, ApplicationPlugin)","anchor":"#custompluginparts(projectplugin,applicationplugin)"},{"id":"ideainitializerdescriptor","level":0,"title":"IdeaInitializerDescriptor","anchor":"#ideainitializerdescriptor"}]</script><script type="application/json" id="topic-shortcuts">{"jetbrains.mps.ide.editor.actions.AddModelImport_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command","char-M"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command","char-M"]}],"platform":"MAC"}}}</script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Plugin | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/plugin.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Plugin | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/plugin.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/plugin.html",
    "name": "Plugin | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="plugin" data-main-title="Plugin" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="plugin" id="plugin.topic">Plugin</h1><p id="ia73us_1">Plugin is a way to integrate your code with the MPS IDE functionality.</p><p id="ia73us_2">The <em id="ia73us_3">jetbrains.mps.lang.plugin</em>&nbsp;and <em id="ia73us_4">jetbrains.mps.lang.plugin.standalone</em>&nbsp;languages give you&nbsp;a number of root concepts that can be used in your plugin. This chapter describes all of them.</p><section class="chapter"><h2 id="plugininstantiation" data-toc="plugininstantiation">Plugin instantiation</h2><p id="ia73us_5">While developing a plugin, you have a solution holding the plugin and want the plugin classes to be automatically reloadable so as not to have to restart MPS after each change to see its effect. To set the development phase correctly, do the following:</p><ol class="list _decimal" id="ia73us_6" type="1"><li class="list__item" id="ia73us_7"><p>Create a new solution for your plugin</p></li><li class="list__item" id="ia73us_8"><p>Create a model in this solution named <em id="ia73us_9">&lt;solution_name&gt;.plugin</em></p></li><li class="list__item" id="ia73us_10"><p>Import <em id="ia73us_11">j.m.lang.plugin</em> and <em id="ia73us_12">j.m.lang.plugin.standalone</em> languages into the solution and the model</p></li><li class="list__item" id="ia73us_13"><p>Create a root <em id="ia73us_14">StandalonePluginDescriptor</em>&nbsp;in the model (it comes from the <em id="ia73us_15">j.m.lang.plugin.standalone</em> language)</p></li><li class="list__item" id="ia73us_16"><p>Custmize the solution's compilation and class-loading on the <em id="ia73us_17">Java</em> tab to <em id="ia73us_18">Regular MPS module contributing extensions to MPS</em>: </p><figure id="ia73us_19"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/MPS_plugin0.png" class="lightbox"><img alt="MPS_plugin0.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/MPS_plugin0.png" title="MPS_plugin0.png" width="450" height="280"></a></figure><p> You can now edit your plugin model and see the changes applied to the current MPS instance just after generation.&nbsp;You can also distribute the solution and have the plugin successfully working for the users.</p></li></ol></section><section class="chapter"><h2 id="actionsandactiongroups" data-toc="actionsandactiongroups">Actions and action groups</h2><p id="ia73us_20">One can add custom actions to any menu in MPS by using <b id="ia73us_21">action</b> and <b id="ia73us_22">action group</b> entities.</p><p id="ia73us_23">An&nbsp;<b id="ia73us_24">action</b> describes one concrete action. <b id="ia73us_25">Action groups</b> are named lists of actions intended for structuring of actions - adding them to other groups and MPS groups (which represent menus themselves) and combining them into popup menus. You can also create groups with dynamically changing contents.</p><p id="ia73us_26">How to add new actions to existing groups?</p><p id="ia73us_27">In order to add new actions to existing groups, the following should be done:</p><ol class="list _decimal" id="ia73us_28" type="1"><li class="list__item" id="ia73us_29"><p>actions should be described</p></li><li class="list__item" id="ia73us_30"><p>described actions should be composed into groups</p></li><li class="list__item" id="ia73us_31"><p>these groups should be added to existing groups (e.g. to predefined MPS groups to add new actions to MPS menus).</p></li></ol><p id="ia73us_32">Predefined MPS groups are stored in the <em id="ia73us_33">jetbrains.mps.ide.actions</em> model, which is an accessory model to <em id="ia73us_34">jetbrains.mps.lang.plugin</em>&nbsp;language, so you don't need to import it explicitly into your model.</p><section class="chapter"><h3 id="actionstructure" data-toc="actionstructure">Action structure</h3><section class="chapter"><h4 id="actionproperties" data-toc="actionproperties">Action properties</h4><p id="ia73us_35"><b id="ia73us_36">Name</b> - The name of an action. You can give any name you want, the only obvious constraint is that the names must be unique in the scope of the model.</p><p id="ia73us_37"><b id="ia73us_38">Mnemonic -</b> &nbsp;if mnemonic is specified, the action will be available via the <em id="ia73us_39">alt+mnemonic</em> shortcut when any group that contains this action is displayed. Note that the mnemonic (if specified) must be one of the chars in action's caption. Mnemonic is displayed as an underlined symbol in the action's <b id="ia73us_40">caption</b>.</p><p id="ia73us_41"><b id="ia73us_42">Required access -</b> specifies the access control that MPS should provide to the action:</p><ul class="list _bullet" id="ia73us_43"><li class="list__item" id="ia73us_44"><p><em id="ia73us_45">none</em> - no access control will be provided, all eventual locking must be performed manually by the action. The action can perform UI operations without the risk of locking the UI.</p></li><li class="list__item" id="ia73us_46"><p><em id="ia73us_47">read</em> - a read access is granted. The action can perform UI operations without the risk of locking the UI.</p></li><li class="list__item" id="ia73us_48"><p><em id="ia73us_49">command</em> - all operations with MPS models are executed within <em id="ia73us_50">commands</em>. A <em id="ia73us_51">command</em> is an item in the undo list (you don't control it manually, MPS does it for you), so the user can undo changes brought into the model by action's execution. Also, all the code executed in a command, has read-write access to the model. The catch is that if you show visual dialogs to the user from inside of a command, it can cause a deadlock by blocking while holding the read/write locks. It is thus recommended to use this option, only if you are not using UI in your action.</p></li><li class="list__item" id="ia73us_52"><p><em id="ia73us_53">editor command</em> - similarly to the option above, the action is performed in the context of a undoable command, read and write access is granted. The command is obtained from the editor context, so an editor context must be provided as one of the action's context parameters.</p></li></ul><p id="ia73us_54"><b id="ia73us_55">Execute outside command -</b> (this option should be gradually abandoned in favour of <b id="ia73us_56">required access</b>, if set to <b id="ia73us_57">true</b>, it overrides any settings for the <b id="ia73us_58">required access</b> property) all operations with MPS models are executed within <em id="ia73us_59">commands</em>. A <em id="ia73us_60">command</em> is an item in the undo list (you don't control it manually, MPS does it for you), so the user can undo changes brought into the model by action's execution. Also, all the code executed in a command, has read-write access to the model. The catch is that if you show visual dialogs to the user from inside of a command, it can cause a deadlock by blocking while holding the read/write locks. It is thus recommended to have the <em id="ia73us_61">execute outside command</em>&nbsp;option set to false, only if you are not using UI in your action. Otherwise it should be set to true and proper read/write access locking should be performed manually with the <b id="ia73us_62">read action</b> and <b id="ia73us_63">command</b> statements within the action.</p><figure id="ia73us_64"><img alt="MPS_plugin1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/MPS_plugin1.png" title="MPS_plugin1.png" width="900" height="617"></figure><p id="ia73us_65"><b id="ia73us_66">Also available in</b>&nbsp;- currently, this can only be set to "everywhere", which means the action will not only be available in the context, where you can invoke it through the completion menu, but also in any other context. E.g. if some action is added to the editor context menu group, but the author wants it to be available when the focus is in the logical view, or just when all the editors are closed, "also available in" should be set to "everywhere".</p><p id="ia73us_67"><b id="ia73us_68">Caption -</b> the string representing the action in menus</p><p id="ia73us_69"><b id="ia73us_70">Description -</b> this string (if specified) will be displayed in the status bar when this action is active (selected in any menu)</p><p id="ia73us_71"><b id="ia73us_72">Icon -</b> this icon will be displayed near the action in all menus. You can select an icon file or describe the icon using a DSL. Note that the icon file must be placed <b id="ia73us_73">near your language</b> (because it's stored not as an image, but as a path relative to the language's root).</p></section><section class="chapter"><h4 id="constructionparameters" data-toc="constructionparameters">Construction parameters</h4><p id="ia73us_74">Each action can be parameterized at construction time using <b id="ia73us_75">construction parameters</b>. This can be any data determining action's behavior. Thus, a single action that uses construction parameters can represent multiple different behaviors. To manage actions and handle keymaps MPS needs a unique identifier for each concrete behavior represented by an action. So, the&nbsp;<b id="ia73us_76">toString</b> function was introduced for each construction parameter (can be seen in the inspector). For primitive types there is no need to specify this function explicitly - MPS can do it automatically. For more complex parameters, you need to write this function explicitly so that for each concrete behavior of an action there is a different set of values returned from the toString() functions.</p></section><section class="chapter"><h4 id="enable/disableactioncontrol" data-toc="enable/disableactioncontrol">Enable/disable action control</h4><p id="ia73us_77"><b id="ia73us_78">Is always visible flag -</b> if you want your action to be visible even in the disabled state (when the action is not applicable in the current context), set this to true, otherwise to false.</p><p id="ia73us_79"><b id="ia73us_80">Context parameters -</b> specifies which items must be present in the current context for the action to be able to execute. They are extracted from the context before any action's method is executed. Context parameters have conditions associated with them -&nbsp;<b id="ia73us_81">required</b>, <b id="ia73us_82">custom</b> andd <b id="ia73us_83">id</b> are the three most frequently used ones. If some <b id="ia73us_84">required</b> parameters were not extracted, the action state is set to <em id="ia73us_85">disabled</em> and the&nbsp;<b id="ia73us_86">isApplicable/update/execute</b> methods are not executed. If all required action parameters were extracted, you can use their values in all the action methods. <b id="ia73us_87">Custom</b>&nbsp;context parameters give you the option to decide whether the context parameter is mandatory on case-by-case basis using the supplied function. The <b id="ia73us_88">is</b> condition tests the obtained objact against a supplied class.</p><p id="ia73us_89">There are 2 types of action parameters - <b id="ia73us_90">simple</b> and <b id="ia73us_91">complex</b> action parameters.</p><ul class="list _bullet" id="ia73us_92"><li class="list__item" id="ia73us_93"><p><b id="ia73us_94">Simple</b> action parameters (represented by <em id="ia73us_95">ActionDataParameterDeclaration</em>) allow to simply extract all available data from the current data context. The data is provided "by key", so you should specify the <em id="ia73us_96">name</em> and the <em id="ia73us_97">key</em> in the declaration. The type of the parameter will be set automatically.</p></li><li class="list__item" id="ia73us_98"><p><b id="ia73us_99">Complex</b> action parameters (represented by&nbsp;<em id="ia73us_100">ActionParameterDeclaration</em> )&nbsp;were introduced to perform some frequently used checks and typecasts. Now there are 3 types available for the context parameter of this type: </p><ul class="list _bullet" id="ia73us_101"><li class="list__item" id="ia73us_102"><p><b id="ia73us_103">node&lt;concept&gt;</b> <em id="ia73us_104">-</em> currently selected node, which is an instance of a specified concept. Action won't be enabled, if the selected node isn't an instance of this concept.</p></li><li class="list__item" id="ia73us_105"><p><b id="ia73us_106">nlist&lt;concept&gt;</b> <em id="ia73us_107">-</em> currently selected nodes. It is checked that all nodes are instances of the&nbsp;<b id="ia73us_108">concept</b> (if specified). As with <b id="ia73us_109">node&lt;concept&gt;</b>, the action won't be enabled if the check fails.</p></li><li class="list__item" id="ia73us_110"><p><b id="ia73us_111">model</b> <em id="ia73us_112">-</em>&nbsp;the current model holding the selected node</p></li></ul></li></ul><aside class="prompt" data-type="tip" data-title="" id="ia73us_113"><p id="ia73us_114">The available <em id="ia73us_115">keys</em> that the user can type into the <b id="ia73us_116">context</b> <b id="ia73us_117">parameters</b> declaration are obtained automatically from all imported models. MPS searches the imported models for subclasses of the <em id="ia73us_118">CommonDataKeys</em> (<em id="ia73us_119">com.intellij.openapi.actionSystem</em>) class. Typical such subclasses are:</p><ul class="list _bullet" id="ia73us_120"><li class="list__item" id="ia73us_121"><p><em id="ia73us_122"></em></p></li><li class="list__item" id="ia73us_123"><p><em id="ia73us_124">PlatformDataKeys</em> (<em id="ia73us_125">com.intellij.openapi.actionSystem</em>)</p></li><li class="list__item" id="ia73us_126"><p><em id="ia73us_127">MPSCommonDataKeys</em> (<em id="ia73us_128">jetbrains.mps.ide.actions</em>)</p></li><li class="list__item" id="ia73us_129"><p><em id="ia73us_130">MPSEditorDataKeys</em> (<em id="ia73us_131">jetbrains.mps.ide.editor</em>)</p></li><li class="list__item" id="ia73us_132"><p><em id="ia73us_133">MPSDataKeys</em> (<em id="ia73us_134">jetbrains.mps.workbench</em>)</p></li></ul><p id="ia73us_135">Be sure to import these models (<kbd id="ia73us_136" data-key="jetbrains.mps.ide.editor.actions.AddModelImport_Action">Ctrl+M</kbd>) in order to see them in the completion menu for <b id="ia73us_137">context parameters</b>.</p></aside><p id="ia73us_138"><b id="ia73us_139">Is Applicable / update</b> - In cooperation with the context parameters, this method controls the&nbsp;<em id="ia73us_140">enabled/disabled</em> state of the action. You can pick either of the two options:</p><ul class="list _bullet" id="ia73us_141"><li class="list__item" id="ia73us_142"><p>The <b id="ia73us_143">isApplicable</b> method returns the new state of an action</p></li><li class="list__item" id="ia73us_144"><p>The&nbsp;<b id="ia73us_145">update</b> method is designed to update the state manually. You can also update any of your action's properties (caption, icon etc.) by accessing action's presentation via <em id="ia73us_146">event.getPresentation()</em> .&nbsp;Call the&nbsp;<em id="ia73us_147">setEnabledState()</em>&nbsp;method on an action to enable or disable it manually.</p></li></ul><p id="ia73us_148">These methods are executed only if all&nbsp;<b id="ia73us_149">required</b>&nbsp;context parameters have been successfully extracted from the context.</p><p id="ia73us_150">Note: The <em id="ia73us_151">this</em>&nbsp;keyword refers to the current action, use action&lt;...&gt; to get hold of any visible action from your code.</p><aside class="prompt" data-type="tip" data-title="" id="ia73us_152"><p id="ia73us_153">Do not use the&nbsp;<em id="ia73us_154">isApplicable()</em>&nbsp;method if you want to modify the presentation manually. Although no errors would be reported from within&nbsp;<em id="ia73us_155">isApplicable()</em>, it is not guaranteed to work in all cases properly. The <em id="ia73us_156">update()</em> method is a more suitable place for complex presentation manipulations.</p></aside><p id="ia73us_157"><b id="ia73us_158">Execute</b> - this method is executed when the action is performed. It is guaranteed that it is executed only if the action's <b id="ia73us_159">update</b> method for the same event left the action in active state (or <b id="ia73us_160">isApplicable</b> returned <b id="ia73us_161">true</b>) and all the required context parameters are present in the current context and were filled in.</p><p id="ia73us_162"><b id="ia73us_163">Methods</b> - in this section you can declare utility methods.</p></section><section class="chapter"><h4 id="groupstructure" data-toc="groupstructure">Group structure</h4><p id="ia73us_164">Group describes a set of actions and provides the information about how to modify other groups with current group.</p></section><section class="chapter"><h4 id="presentation" data-toc="presentation">Presentation</h4><p id="ia73us_165"><b id="ia73us_166">Name -</b> The name of the group. You can give any name you want, the only obvious constraint is that the names must be unique in the scope of the model.</p><p id="ia73us_167"><b id="ia73us_168">is popup -</b> if this is true, the group represents a popup menu, otherwise it represents a list of actions.</p></section><section class="chapter"><h4 id="when&quot;ispopup&quot;istrue:" data-toc="when&quot;ispopup&quot;istrue:">When "is popup" is true:</h4><ul class="list _bullet" id="ia73us_169"><li class="list__item" id="ia73us_170"><p><b id="ia73us_171">Caption -</b> string that will be displayed as the name of the popup menu</p></li><li class="list__item" id="ia73us_172"><p><b id="ia73us_173">Mnemonic -</b> if mnemonic is specified, the popup menu will be available via the <em id="ia73us_174">alt+mnemonic</em> shortcut when any group that contains it is displayed. Note that the mnemonic (if specified) must be one of the chars in <b id="ia73us_175">caption</b>. Mnemonic is displayed as an underlined symbol in the popup menu caption.</p></li><li class="list__item" id="ia73us_176"><p><b id="ia73us_177">Is invisible when disabled -</b> if set to true, the group will not be shown in case it has no enabled actions or is disabled manually in the&nbsp;<em id="ia73us_178">update()</em>&nbsp;method. Call the <em id="ia73us_179">enable()/disable()</em>&nbsp;methods on an action group to enable or disable it manually.</p></li></ul></section><section class="chapter"><h4 id="contents" data-toc="contents">Contents</h4><p id="ia73us_180">There are 3 possibilities to describe group contents:</p><p id="ia73us_181"><b id="ia73us_182">Element list -</b> this is just a static list of actions, groups and labels (see modifications). The available elements are:</p><ul class="list _bullet" id="ia73us_183"><li class="list__item" id="ia73us_184"><p><b id="ia73us_185">-&gt;name</b> - an anchors. Anchors are used for modifying one group with another. For more information, refer to the <b id="ia73us_186">Add statement</b> section.</p></li><li class="list__item" id="ia73us_187"><p><b id="ia73us_188">&lt;---&gt;</b> - separator</p></li><li class="list__item" id="ia73us_189"><p><b id="ia73us_190">ActionName[parameters]</b> - an actions.</p></li></ul><p id="ia73us_191"><b id="ia73us_192">Build -</b> this alternative should be used in groups, the contents of which is static, but depends on some initial conditions - the group is built once and is not updated ever after. Use the&nbsp;<b id="ia73us_193">add</b> statement to add elements inside build block.</p><p id="ia73us_194"><b id="ia73us_195">Update -</b> this goes for dynamically changing groups. Group is updated every time right before it is rendered.</p><aside class="prompt" data-type="tip" data-title="" id="ia73us_196"><p id="ia73us_197">In the update/build blocks use the&nbsp;<b id="ia73us_198">add</b> statement to add group members.</p></aside></section><section class="chapter"><h4 id="modificationsandlabels" data-toc="modificationsandlabels">Modifications and labels</h4><p id="ia73us_199"><b id="ia73us_200">Add to &lt;group&gt; at position &lt;position&gt; -</b> this statement adds the current group to a <em id="ia73us_201">&lt;group&gt;</em> at the given position. Every group has a <em id="ia73us_202">&lt;default&gt;</em> position, which tells to add the current group to the end of the target group. Some groups can provide additional positions by adding so-called <b id="ia73us_203">anchors</b> into themselves. Adding anchors is described in the&nbsp;<em id="ia73us_204">contents</em> section. The anchor itself is invisible and represents a position, in which a group can be inserted.</p><aside class="prompt" data-type="tip" data-title="" id="ia73us_205"><ul class="list _bullet" id="ia73us_206"><li class="list__item" id="ia73us_207"><p>You shouldn't care about the group creation order and modifications order - this statement is fully declarative.</p></li><li class="list__item" id="ia73us_208"><p>If A is added into B, B into C, C will contain A</p></li></ul></aside></section><section class="chapter"><h4 id="actiongroup<...>expression" data-toc="actiongroup<...>expression">actionGroup &lt;...&gt; expression</h4><p id="ia73us_209">There is a specific expression available in the <em id="ia73us_210">jetbrains.mps.lang.plugin</em>&nbsp;language&nbsp;to access any registered group - <b id="ia73us_211">actionGroup&lt;</b> <b id="ia73us_212"><em id="ia73us_213">group</em></b> <b id="ia73us_214">&gt;</b> expression.</p><section class="chapter"><h5 id="groupisinternal" data-toc="groupisinternal">isInternal</h5><p id="ia73us_215">This option is specified in the <b id="ia73us_216">Inspector</b> .Groups marked as "internal" are only visible when MPS is run in the "internal mode".</p></section><section class="chapter"><h5 id="groupregisterviapluginxml" data-toc="groupregisterviapluginxml">register via plugin.xml</h5><p id="ia73us_217">This option is specified in the <b id="ia73us_218">Inspector</b>. This flags controls whether the group's actions are registered statically via a plugin.xml file or dynamically when (re-)loading the group's class. When set to true, you need to provide an instance of <em id="ia73us_219">IdeaComponent.xml</em> (the <em id="ia73us_220">IdeaConfigurationXml</em> concept) in your model that lists (aka registers) your group.</p></section></section><section class="chapter"><h4 id="ideacomponentxml" data-toc="ideacomponentxml">IdeaComponent.xml</h4><p>Registers groups, bootstrap groups and keymaps statically through a generated components.xml file as required by the IntelliJ platform.</p></section><section class="chapter"><h4 id="bootstrapgroups" data-toc="bootstrapgroups">Bootstrap groups</h4><p id="ia73us_221">Bootstrap groups are a way to work with action groups that have been defined outside of MPS (e.g. groups contributed by IDEA or some IDEA plugin).</p><p id="ia73us_222">In this case, a bootstrap group is defined in MPS and its internal ID is set to the ID of the external group. After having this done, you can work with the bootstrap group just like with a normal one - insert it into your groups and vice versa.</p><p id="ia73us_223">A regular user rarely needs to use bootstrap groups.</p><p id="ia73us_224">The <em id="ia73us_225">register via plugin.xml</em> option in the <b id="ia73us_226">Inspector</b> has the same meaning as for ordinary groups, and is described above.</p><aside class="prompt" data-type="tip" data-title="" id="ia73us_227"><p id="ia73us_228">A quick and simple tutorial by Federico Tomassetti on how to create action and show it in a context menu is available here:</p><p id="ia73us_229"><a href="http://www.federico-tomassetti.it/tutorial-how-to-add-an-action-to-the-jetbrains-metaprogramming-system/" id="ia73us_230" data-external="true" rel="noopener noreferrer">http://www.federico-tomassetti.it/tutorial-how-to-add-an-action-to-the-jetbrains-metaprogramming-system/</a></p><p id="ia73us_231">Please bear in mind that this tutorial uses an older version of MPS and the actual workings in MPS have changed since then, Especially we now recommend to use <b id="ia73us_232">plugin solutions</b> instead of the <b id="ia73us_233">plugin aspect</b> of a language to hold your actions. The tutorial may still give you some guidelines and useful insight.</p></aside></section></section><section class="chapter"><h3 id="touchbarsupportonmacos" data-toc="touchbarsupportonmacos">Touch Bar Support on MacOS</h3><p id="ia73us_234">Custom user&nbsp;<b id="ia73us_235">actions</b>&nbsp;and&nbsp;<b id="ia73us_236">action groups</b>&nbsp;can be added to the&nbsp;<em id="ia73us_237">Touch Bar</em>&nbsp;by adding to one of predefined&nbsp;<b id="ia73us_238">InterfaceGroups</b>:</p><ul class="list _bullet" id="ia73us_239"><li class="list__item" id="ia73us_240"><p>IDEATouchBarDefault</p></li><li class="list__item" id="ia73us_241"><p>IDEATouchBarDefault_alt</p></li><li class="list__item" id="ia73us_242"><p>IDEATouchBarDefault_cmd</p></li><li class="list__item" id="ia73us_243"><p>IDEATouchBarDefault_cmd_alt</p></li><li class="list__item" id="ia73us_244"><p>IDEATouchBarDefault_shift</p></li><li class="list__item" id="ia73us_245"><p>IDEATouchBarDebug</p></li></ul></section><section class="chapter"><h3 id="displayingprogressindicators" data-toc="displayingprogressindicators">Displaying progress indicators</h3><p id="ia73us_246">Long-lasting actions should indicate their activity and progress to the user. For more information about progress bars, allowing for cancellation, and enabling actions for running in the background, refer to the <a href="progress-indicators.html" id="ia73us_247">Progress indicators</a> page .</p></section></section><section class="chapter"><h2 id="keymapchanges" data-toc="keymapchanges">KeyMap Changes</h2><p id="ia73us_248">The&nbsp;<em id="ia73us_249">KeymapChangesDeclaration</em>&nbsp;concept allows the plugin to assign key shortcuts to individual actions and group them into&nbsp;shortcuts schemes.</p><p id="ia73us_250">Any action can have a number of keyboard shortcuts. This can be specified using the <em id="ia73us_251">KeyMapChanges</em> concept. For a parameterized action, which has a number of "instances" (one instance per parameter value), a function can be specified, which returns different shortcut for a different parameter value.</p><p id="ia73us_252">In MPS, there are some "default keymaps", which you can see in <em id="ia73us_253">Settings-&gt;Keymaps</em>. The <b id="ia73us_254">for&nbsp;keymap</b>&nbsp;section allows you to specify a keymap that the <em id="ia73us_255">KeyMapChanges</em>&nbsp;definition is contributing to. E.g. one can set different shortcuts for the same action in the MacOS and the Windows keymaps.</p><aside class="prompt" data-type="tip" data-title="" id="ia73us_256"><p id="ia73us_257">If you add a keyboard shortcut to the <b id="ia73us_258">Default</b> keymap, all keymaps are altered with this shortcut.</p></aside><aside class="prompt" data-type="tip" data-title="" id="ia73us_259"><p id="ia73us_260">Note that by default <em id="ia73us_261">ctrl</em> is changed to <em id="ia73us_262">cmd</em> in <b id="ia73us_263">MacOs keymap</b>. If you want your action to have a <em id="ia73us_264">ctrl + something</em> shortcut on MacOs, you should re-define this shortcut for the <b id="ia73us_265">MacOs&nbsp;keymap</b>.</p></aside><p id="ia73us_266">All the actions added by plugins are visible in&nbsp;<b id="ia73us_267">Settings-&gt;Keymap</b>&nbsp;and&nbsp;<b id="ia73us_268">Settings-&gt;Menus and Toolbars</b>. This means that any user can customize the shortcuts used for all MPS actions.</p><figure id="ia73us_269"><img alt="MPS_plugin2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/MPS_plugin2.png" title="MPS_plugin2.png" width="900" height="639"></figure><p id="ia73us_270"><br></p><figure id="ia73us_272"><img alt="MPS_plugin3.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/MPS_plugin3.png" title="MPS_plugin3.png" width="900" height="639"></figure><p id="ia73us_273">A KeyMap Change should be given a name unique within the model, it must specify the <b id="ia73us_274">Keymap</b>&nbsp;that is being altered (or <em id="ia73us_275">Default</em>&nbsp;to change all keymaps)&nbsp;and then assign a keystroke to actions that should have one. The keystroke can either be <em id="ia73us_276">SimpleShortcutChange</em>&nbsp;with a directly specified keystroke or <em id="ia73us_277">ParametrizedShortcutChange</em>, which gives you the ability to handle parametrized actions.</p><p id="ia73us_278">The <em id="ia73us_279">register via plugin.xml</em> option in the <b id="ia73us_280">Inspector</b> has the same meaning as for ordinary groups, and is described above.</p></section><section class="chapter"><h2 id="nondumbawareactions" data-toc="nondumbawareactions">NonDumbAwareActions</h2><p id="ia73us_281">If your action uses platform indices (which is very rare), add it to <em id="ia73us_282">NonDumbAwareActions</em>. Those actions will be automatically disabled while the indices are being built.</p></section><section class="chapter"><h2 id="editortabs" data-toc="editortabs">Editor Tabs</h2><p id="ia73us_283">If you look at any concept declaration you will certainly notice the tabs at the bottom of the editor. You are able to add the same functionality to the concepts from your language.</p><p id="ia73us_284">What is the meaning of these tabs? The answer is pretty simple - they contain the editors for some <em id="ia73us_285">aspects</em> of the "base" node. Each tab can be either single-tabbed (which means that only one node is displayed in it, e.g. <b id="ia73us_286">editor</b> tab) or multi-tabbed (if multiple nodes can be created for this aspect of the base node, see the&nbsp;<b id="ia73us_287">Typesystem</b> tab, for example).</p><p id="ia73us_288">How the editor for a node is created? When you open some node, call it N, MPS tries to find the "base" node for N. If there isn't any base node, MPS just opens the editor for the selected node. If the node is found (call it B), MPS opens some tabs for it, containing editors for some subordinate nodes. Then it selects the tab for N and sets the top icon and caption corresponding to B.</p><p id="ia73us_289">When you create <b id="ia73us_290">tabbed editors,</b> you actually provide rules for:</p><ul class="list _bullet" id="ia73us_291"><li class="list__item" id="ia73us_292"><p>finding the base node</p></li><li class="list__item" id="ia73us_293"><p>finding subordinate nodes</p></li><li class="list__item" id="ia73us_294"><p>optionally an algorithms of subordinate nodes creation</p></li></ul><p id="ia73us_295">The tabs that match the requested base concept are displayed and organized depending on their relative order rules specified in their respective <b id="ia73us_296">order constraints</b>&nbsp;sections.</p><section class="chapter"><h3 id="editortabstructure" data-toc="editortabstructure">Editor Tab Structure</h3><p id="ia73us_297"><b id="ia73us_298">Name -</b> The name of the rule. You can give any name you want, the only obvious constraint is that the names must be unique in the scope of the model.</p><p id="ia73us_299"><b id="ia73us_300">Icon</b>&nbsp;-&nbsp;this icon will be displayed in the header of the tab. You can select an icon file or describe the icon using a DSL. Note that the icon file must be placed <b id="ia73us_301">near your language</b> (because it's stored not as an image, but as a path relative to the language's root).</p><p id="ia73us_302"><b id="ia73us_303">Shortcut char</b>&nbsp;- a char to quickly navigate to the tab using the keyboard</p><p id="ia73us_304"><b id="ia73us_305">Order constraints</b>&nbsp;- an instance of the <em id="ia73us_306">Order</em>&nbsp;concept. <em id="ia73us_307">Orders</em>&nbsp;specify an order, in which the current tab should be displayed relative to the other tabs. You can either refer to an external order or specify one in-place.</p><p id="ia73us_308"><b id="ia73us_309">Base node concept -</b>&nbsp;the concept of the <b id="ia73us_310">base</b> node for this as well as all the related tabs.</p><p id="ia73us_311"><b id="ia73us_312">Base Node</b>&nbsp;- this is a rule for searching for the <b id="ia73us_313">base</b>&nbsp;node given a known node. It should return null, if the <b id="ia73us_314">base</b> node is not found or this <em id="ia73us_315">TabbedEditor</em> can't be applied.</p><p id="ia73us_316"><b id="ia73us_317">Is applicable</b>&nbsp;- indicates whether the tab can be used for the given <b id="ia73us_318">base</b> node</p><p id="ia73us_319"><b id="ia73us_320">getNode/getNodes -</b>&nbsp;should return the node or a list of nodes to edit in this tab</p><p id="ia73us_321"><b id="ia73us_322">command</b>&nbsp;- indicated whether the node creation should be performed as a command, i.e. whether it should be undoable and uses no additional UI interaction with the user.</p><p id="ia73us_323"><b id="ia73us_324">getConcepts</b>&nbsp;- return the concepts of nodes that this tab can be used for to edit</p><p id="ia73us_325"><b id="ia73us_326">Create -</b>&nbsp;if specified, this will be executed when user asks to create a new node from this tab. It is given a requested concept and the <b id="ia73us_327">base</b>&nbsp;node as parameters.</p></section></section><section class="chapter"><h2 id="editorTabsOrder" data-toc="editorTabsOrder">Order</h2><p id="ia73us_328">The <em id="ia73us_329">Order</em> root concept enables you to create ordering rules for the editor tabs. See the chapter above for more details.</p></section><section class="chapter"><h2 id="tools" data-toc="tools">Tools</h2><p id="ia73us_330">Tool is an instrument that has a graphical presentation and aimed to perform some specific tasks. For example, Usages View, Todo Viewer, Model and Module dependencies Viewers are all tools. MPS has rich UI support for tools - you can move it by drag-and-drop from one edge of the window to another, hide, show and perform many other actions.</p><p id="ia73us_331">Tools are created "per project". They are initialized/disposed on class reloading (after language generation, on "reload all" action etc.)</p><section class="chapter"><h3 id="toolstructure" data-toc="toolstructure">Tool structure</h3><p id="ia73us_332"><b id="ia73us_333">Name</b> - The name of the tool. You can give any name you want, the only obvious constraint is that the names must be unique in the scope of the model.</p><p id="ia73us_334"><b id="ia73us_335">Caption -</b> this string will be displayed in tool's header and on the tool's button in tools pane</p><p id="ia73us_336"><b id="ia73us_337">Number -</b> if specified, <em id="ia73us_338">alt+number</em> becomes a shortcut for showing this tool (if it s available)</p><p id="ia73us_339"><b id="ia73us_340">Icon -</b> the icon to be displayed on the tool's button. You can select an icon file or describe the icon using a DSL. Note that the icon file must be placed <b id="ia73us_341">near your language</b> (because it's stored not as an image, but as a path relative to the language's root).</p><p id="ia73us_342"><b id="ia73us_343">Position</b>&nbsp;- on of <em id="ia73us_344">top/bottom/left/right</em> to add the tool to the desired MPS tool bar</p><p id="ia73us_345"><b id="ia73us_346">Init -</b> initialize the tool instance here</p><p id="ia73us_347"><b id="ia73us_348">Dispose -</b> dispose all the tool resources here</p><p id="ia73us_349"><b id="ia73us_350">getComponent -</b> should return a Swing component (instance of a class which extends JComponent) to display inside the tool's window. If you are planning to create tabs in your tool and you are familiar with the tools framework in IDEA, it's better to use IDEA's support for tabs. Using this framework greatly improves tabs functionality and UI.</p><p id="ia73us_351"><b id="ia73us_352">Fields and methods -</b> regular fields and methods, you can use them in your tool and in external code.</p></section><section class="chapter"><h3 id="tooloperation" data-toc="tooloperation">Tool operation</h3><p id="ia73us_353">We added the operation (<em id="ia73us_354">GetToolInProjectOperation</em> concept) to simply access a tool in some project. Use it as <em id="ia73us_355">project.tool&lt;toolName&gt;</em>, where <em id="ia73us_356">project</em> is an IDEA Project. Do not forget to import the&nbsp;<em id="ia73us_357">jetbrains.mps.lang.plugin.standalone</em>&nbsp;language to be able to use it.</p><aside class="prompt" data-type="note" data-title="" id="ia73us_358"><p id="ia73us_359">This operation can't currently be used in the <em id="ia73us_360">dispose()</em> method</p></aside><p> For example, to open the <em id="ia73us_361">TODO</em> tool window use the following code in an action: </p><figure id="ia73us_362"><img alt="TODOToolOpen.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/TODOToolOpen.png" title="TODOToolOpen.png" width="500" height="162"></figure></section></section><section class="chapter"><h2 id="tabbedtools" data-toc="tabbedtools">Tabbed Tools</h2><p id="ia73us_363">It's same as tool window, but additionally can contain multiple tabs</p><section class="chapter"><h3 id="toolstructure-1" data-toc="toolstructure-1">Tool structure</h3><p id="ia73us_364"><b id="ia73us_365">Name</b>&nbsp;- The name of the tool. You can give any name you want, the only obvious constraint is that the names must be unique in the scope of the model.</p><p id="ia73us_366"><b id="ia73us_367">Caption -</b>&nbsp;this string will be displayed in tool's header and on the tool's button in tools pane</p><p id="ia73us_368"><b id="ia73us_369">Number -</b>&nbsp;if specified,&nbsp;<em id="ia73us_370">alt+number</em>&nbsp;becomes a shortcut for showing this tool (if it s available)</p><p id="ia73us_371"><b id="ia73us_372">Icon -</b>&nbsp;the icon to be displayed on the tool's button. You can select an icon file or describe the icon using a DSL. Note that the icon file must be placed <b id="ia73us_373">near your language</b> (because it's stored not as an image, but as a path relative to the language's root).</p><p id="ia73us_374"><b id="ia73us_375">Position</b>&nbsp;- on of&nbsp;<em id="ia73us_376">top/bottom/left/right</em>&nbsp;to add the tool to the desired MPS tool bar</p><p id="ia73us_377"><b id="ia73us_378">Init -</b>&nbsp;initialize the tool instance here</p><p id="ia73us_379"><b id="ia73us_380">Dispose -</b>&nbsp;dispose all the tool resources here</p><p id="ia73us_381"><b id="ia73us_382">Fields and methods -</b>&nbsp;regular fields and methods, you can use them in your tool and in external code.</p></section></section><section class="chapter"><h2 id="preferencescomponents" data-toc="preferencescomponents">Preferences components</h2><p id="ia73us_383">Sometimes you may want to be able to edit and save some settings (e.g. your tools' settings) between MPS startups. We have introduced <b id="ia73us_384">preferences components</b> for these purposes.</p><p id="ia73us_385">Each preferences component includes a number of preferences pages and a number of persistent fields.Preferences page is a dialog for editing user preferences. They are accessible through <b id="ia73us_386">File-&gt;Settings</b>.</p><p id="ia73us_387">Persistent fields are saved to the <em id="ia73us_388">$PROJECT_HOME/.mps/workspace.xml</em> file when the project is closed and restored from them on project open. The saving process uses reflection, so you don't need to care about serialization/deserialization in most cases.</p><section class="chapter"><h3 id="preferencescomponentstructure" data-toc="preferencescomponentstructure">Preferences component structure</h3><p id="ia73us_389"><b id="ia73us_390">name -</b> component name. You can give any name you want, the only obvious constraint is that the names must be unique in the scope of the model.</p><p id="ia73us_391"><b id="ia73us_392">fields</b> - these are the persistent fields. They are initialized before <b id="ia73us_393">after read</b> and pages creation, so their values will be correct in every moment they can be accessed. They can have default values specified, as well.</p><p id="ia73us_394"><b id="ia73us_395">after read</b> <b id="ia73us_396">/</b> <b id="ia73us_397">before write -</b> these blocks are used for custom serialization purposes and for applying/collecting preferences, which have no corresponding preferences pages (e.g. tool dimensions)</p><p id="ia73us_398"><b id="ia73us_399">pages</b> - preferences pages</p></section><section class="chapter"><h3 id="preferencespagestructure" data-toc="preferencespagestructure">Preferences page structure</h3><p id="ia73us_400"><b id="ia73us_401">name -</b> the string to be used as a caption in <em id="ia73us_402">Settings</em> page. The name must be unique within a model.</p><p id="ia73us_403"><b id="ia73us_404">component</b> - a UI component (a Java swing class) to edit the preferences.</p><p id="ia73us_405"><b id="ia73us_406">icon</b> - the icon to show in <em id="ia73us_407">Settings</em> window. The size of the icon can be up to 32x32. The icon is currently not used by MPS.</p><p id="ia73us_408"><b id="ia73us_409">help topic</b> - the auxiliary id of a documentation page that serves as help for this preferences page. It is only effective when the JetBrains documentation system is being utilized.</p><p id="ia73us_410"><b id="ia73us_411">reset</b> - reset the preferences values in the UI component when this method is called.</p><p id="ia73us_412"><b id="ia73us_413">commit</b> - in this method preferences should be collected from the UI component and commited to wherever they are used.</p><p id="ia73us_414"><b id="ia73us_415">isModified -</b> if this method returns false, <b id="ia73us_416">commit</b> won't be executed. This is typically useful for preferences pages with long-running commit method.</p></section><section class="chapter"><h3 id="preferencecomponentexpression" data-toc="preferencecomponentexpression">PreferenceComponent expression</h3><p id="ia73us_417">We added an expression to simply access a <em id="ia73us_418">PreferenceComponent</em> in some project. The concept is named <em id="ia73us_419">GetPreferencesComponentInProjectOperation</em> and you can access it as <em id="ia73us_420">project.preferenceComponent&lt;componentName&gt;</em>, where <em id="ia73us_421">project</em> is an IDEA Project. Do not forget to import the <em id="ia73us_422">jetbrains.mps.lang.plugin.standalone</em>&nbsp;language&nbsp;to use it.</p><aside class="prompt" data-type="note" data-title="" id="ia73us_423"><p>This operation can't currently be used in the <em id="ia73us_424">dispose()</em> method</p></aside></section></section><section class="chapter"><h2 id="custompluginparts(projectplugin,applicationplugin)" data-toc="custompluginparts(projectplugin,applicationplugin)">Custom plugin parts (ProjectPlugin, ApplicationPlugin)</h2><p id="ia73us_425">Custom plugin parts are custom actions performed on plugin initializing/disposing. They behave exactly like plugins. You can create as many custom plugins for your language as you want. There are two types of custom plugins - project and application custom plugins. The project custom plugin is instantiated once per project, while the application custom plugin is instantiated once per application and therefore it doesn't have a project parameter.</p></section><section class="chapter"><h2 id="ideainitializerdescriptor" data-toc="ideainitializerdescriptor">IdeaInitializerDescriptor</h2><p id="ia73us_426">Provides a convenient way to specify a plugin.xml file for registering the plugin in the IntelliJ platform.</p><figure id="ia73us_427"><img alt="IdeaInitDesc1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/IdeaInitDesc1.png" title="IdeaInitDesc1.png" width="500" height="243"></figure></section><div class="last-modified">Last modified: 15 July 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="module-dependencies-tool.html" class="navigation-links__prev">Module Dependencies Tool</a><a href="progress-indicators.html" class="navigation-links__next">Progress indicators</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>