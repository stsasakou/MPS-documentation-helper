<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/mps-console.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:19.658654187"><meta name="build-number" content="170"><title>Console | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"consolecommands","level":0,"title":"Console commands","anchor":"#consolecommands"},{"id":"scopesofconsolequeries","level":0,"title":"Scopes of Console queries","anchor":"#scopesofconsolequeries"},{"id":"copyingnodesintoconsole","level":0,"title":"Copying nodes into Console","anchor":"#copyingnodesintoconsole"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Console | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/mps-console.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Console | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/mps-console.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/mps-console.html",
    "name": "Console | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="mps-console" data-main-title="Console" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="mps-console" id="mps-console.topic">Console</h1><p id="-g2z8sd_1"><em id="-g2z8sd_2">Console</em> is a tool which allows developers to conveniently run DSL code directly in the MPS environment against the active models. It enables you to quickly query the model and change it. You can trigger actions against your models or study statistics about your project.</p><p id="-g2z8sd_3">For example, you can quickly get all (or some) instances of a (deprecated) concept and migrate them to a new concept:</p><div class="code-block" data-lang="none">#instances(TryStatement).where({~it =&gt; it.catchClause.isNotEmpty; }).refactor({~node =&gt;
        if (node.body.statement.size &gt; 5) {
        node.replace with new(TryCatchStatement);
        }
        })
    </div><p id="-g2z8sd_5">The <em id="-g2z8sd_6">Console</em>&nbsp;tool window allows line-by-line execution of any DSL construction in the realtime. After the command is written in the console, it is generated by the MPS generator and executed in the IDE's context. This way the code in the console can access and modify the program's AST, display project statistic, execute IDE actions, launch code generation or initiate classes reloading.</p><p id="-g2z8sd_7">For discoverability reasons, most of the console-specific DSL constructs start with symbol '<b id="-g2z8sd_8">#</b>'. Code-completion (<em id="-g2z8sd_9">Control + Space</em>) assists developers to insert code in the console.</p><aside class="prompt" data-type="tip" data-title="" id="-g2z8sd_10"><p id="-g2z8sd_11">We shot a short informative <a href="https://youtu.be/nPQ-3o7MfPc" id="-g2z8sd_12" data-external="true" rel="noopener noreferrer">screencast about using the MPS Console</a> to investigate and update the user models. Check it out!</p></aside><p id="-g2z8sd_13">In general, there are 3 kinds of commands:</p><ol class="list _decimal" id="-g2z8sd_14" type="1"><li class="list__item" id="-g2z8sd_15"><p id="-g2z8sd_16"><em id="-g2z8sd_17">BaseLanguage</em> statement lists. These commands can contain any <em id="-g2z8sd_18">BaseLanguage</em> constructions. If some construction or class is not available in completion, it may not have been imported. Missing imports can easily be added as in the normal editor, using actions 'Add model import', 'Add model import by root', 'Add language import', or by the corresponding keyboard shortcuts.</p><figure id="-g2z8sd_19"><img alt="blcommand1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/blcommand1.png" title="blcommand1.png" width="560" height="251"></figure><figure id="-g2z8sd_20"><img alt="blcommand2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/blcommand2.png" title="blcommand2.png" width="563" height="313"></figure></li><li class="list__item" id="-g2z8sd_21"><p><em id="-g2z8sd_22">BaseLanguage</em> expressions. Expression is evaluated and, if its type is not void, printed in console as text, AST, or interactive response. <img alt="blexpression.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/blexpression.png" class="inline-icon-" title="blexpression.png" id="-g2z8sd_23" width="125" height="30"></p></li><li class="list__item" id="-g2z8sd_24"><p>Non-BaseLanguage commands. These are simple non-customizable commands, such as <b id="-g2z8sd_25">#reloadClasses</b>.</p></li></ol><section class="chapter"><h2 id="consolecommands" data-toc="consolecommands">Console commands</h2><p id="-g2z8sd_26">There is also a set of languages containing the console commands and <em id="-g2z8sd_27">BaseLanguage</em> constructions, which allow developers to easily make custom refactorings, complex usages search etc.</p><figure id="-g2z8sd_28"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/ConsoleCommandsHelp.png" class="lightbox"><img alt="ConsoleCommandsHelp.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/ConsoleCommandsHelp.png" title="ConsoleCommandsHelp.png" width="500" height="331"></a></figure><ol class="list _decimal" id="-g2z8sd_29" type="1"><li class="list__item" id="-g2z8sd_30"><p id="-g2z8sd_31"><em id="-g2z8sd_32">BaseLanguage</em> constructions for iterating over IDE objects (<b id="-g2z8sd_33">#nodes</b>, <b id="-g2z8sd_34">#references</b>, <b id="-g2z8sd_35">#models</b>, <b id="-g2z8sd_36">#modules</b>). These expressions are lazy sequences, including all nodes/references/models/modules in project or in custom scope.</p><figure id="-g2z8sd_37"><img alt="nodes.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/nodes.png" title="nodes.png" width="710" height="70"></figure><aside class="prompt" data-type="tip" data-title="" id="-g2z8sd_38"><p id="-g2z8sd_39"><em id="-g2z8sd_40">To inspect read-only modules and models, such as imported libraries and used languages, you need to include the</em> <b id="-g2z8sd_41"><em id="-g2z8sd_42">r/o+</em></b> <em id="-g2z8sd_43">parameter to the desired search scope.</em></p></aside></li><li class="list__item" id="-g2z8sd_44"><p id="-g2z8sd_45"><em id="-g2z8sd_46">BaseLanguage</em> constructions for usages searching (<b id="-g2z8sd_47">#usages</b>, <b id="-g2z8sd_48">#instances</b>). These expressions are also sequences, which can be iterated over, but not lazy.</p><p id="-g2z8sd_49">When these expressions are evaluated, find usages mechanism is called, so it runs faster then iterating over all nodes or references and then filtering by concept/target.</p><figure id="-g2z8sd_50"><img alt="usages.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/usages.png" title="usages.png" width="628" height="62"></figure></li><li class="list__item" id="-g2z8sd_51"><p>Commands for quering data from the IDE (<b id="-g2z8sd_52">#stat</b>, <b id="-g2z8sd_53">#showBrokenRefs</b>, <b id="-g2z8sd_54">#showGenPlan</b>)</p></li><li class="list__item" id="-g2z8sd_55"><p id="-g2z8sd_56">Commands for interacting with the IDE (<b id="-g2z8sd_57">#reloadClasses</b>, <b id="-g2z8sd_58">#make</b>, <b id="-g2z8sd_59">#clean</b>, <b id="-g2z8sd_60">#removeGenSources</b>)</p><aside class="prompt" data-type="tip" data-title="" id="-g2z8sd_61"><p id="-g2z8sd_62">To initiate a <b id="-g2z8sd_63">rebuild</b> of a model, first invoke # <em id="-g2z8sd_64">clean</em> followed by <em id="-g2z8sd_65">#make</em>.</p></aside></li><li class="list__item" id="-g2z8sd_66"><p id="-g2z8sd_67">The <b id="-g2z8sd_68">#exec</b> command for running an external script in the console.</p><aside class="prompt" data-type="tip" data-title="" id="-g2z8sd_69"><p id="-g2z8sd_70">There are several steps to follow in order to create and run an external script:</p><ul class="list _bullet" id="-g2z8sd_71"><li class="list__item" id="-g2z8sd_72"><p>Create a model and import <em id="-g2z8sd_73">jetbrains.mps.console.scripts</em> language.</p></li><li class="list__item" id="-g2z8sd_74"><p>Create an instance of the <em id="-g2z8sd_75">ConsoleScript</em> root in the model and write the script using the available console commands.</p></li><li class="list__item" id="-g2z8sd_76"><p>Import the model into the console tool window.</p></li><li class="list__item" id="-g2z8sd_77"><p>Run the script using the <b id="-g2z8sd_78">#exec your_script_name</b> command in the console.</p></li></ul></aside></li><li class="list__item" id="-g2z8sd_79"><p><em id="-g2z8sd_80">BaseLanguage</em> constructions for showing results to user </p><ul class="list _bullet" id="-g2z8sd_81"><li class="list__item" id="-g2z8sd_82"><p><b id="-g2z8sd_83">#show</b> expression opens usages view and shows there nodes, models or modules from sequence passed to the expression as a parameter.</p></li><li class="list__item" id="-g2z8sd_84"><p><b id="-g2z8sd_85">#print</b> expression writes result to the console. There are also specialized versions of this construction: </p><ul class="list _bullet" id="-g2z8sd_86"><li class="list__item" id="-g2z8sd_87"><p><b id="-g2z8sd_88">#printText</b> converts result to string and add it to the response.</p></li><li class="list__item" id="-g2z8sd_89"><p><b id="-g2z8sd_90">#printNode</b> is applicable only to nodes. This construction adds to response the whole node and its subnodes. Since the response is also part of the AST, the node is displayed with its normal editor.</p></li><li class="list__item" id="-g2z8sd_91"><p><b id="-g2z8sd_92">#printNodeRef</b> makes sense with only nodes locates in the project models. This construction prints to the console an interactive response, which can be clicked on in order to open the node in the editor.</p></li><li class="list__item" id="-g2z8sd_93"><p><b id="-g2z8sd_94">#printSeq</b> is applicable to collections of nodes, models or modules. This command prints to the console an interactive response, which describes the size of the collection. When the response is clicked on, the usage view opens to show the nodes or the models.</p></li><li class="list__item" id="-g2z8sd_95"><p><b id="-g2z8sd_96">#print</b> expression is a universal construction, which tries to choose the most appropriate way of displaying its argument, according to its type and value</p></li></ul></li></ul></li><li class="list__item" id="-g2z8sd_97"><p id="-g2z8sd_98"><b id="-g2z8sd_99">refactor</b> operation. This operation applies a function to sequence of nodes (like <b id="-g2z8sd_100">forEach</b> operation), but before that it opens the found nodes in the usages view, where user can review the nodes before the refactoring is started and manually select the nodes to include/exclude in the refactoring and then apply or cancel the refactoring.</p><figure id="-g2z8sd_101"><img alt="refactor.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/refactor.png" title="refactor.png" width="770" height="99"></figure></li></ol><p id="-g2z8sd_102">Additionally, the console languages can be extended by the user, if needed.</p><aside class="prompt" data-type="tip" data-title="" id="-g2z8sd_103"><p id="-g2z8sd_104">The model-querying commands used in the Console are defined in the <em id="-g2z8sd_105">jetbrains.mps.lang.smodel.query</em> language. After importing the language you can use the commands in code to programmatically access and query the models, as well. Details can be found in the <a href="smodel-language-queries.html" id="-g2z8sd_106">smodel queries documentation</a>.</p></aside></section><section class="chapter"><h2 id="scopesofconsolequeries" data-toc="scopesofconsolequeries">Scopes of Console queries</h2><p id="-g2z8sd_107">Queries can have scope specified to constraint the area of the repository to search. The scope is specified in pointy brackets:</p><figure id="-g2z8sd_108"><img alt="mps-completion.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/mps-completion.png" title="mps-completion.png" width="575" height="191"></figure><ul class="list _bullet" id="-g2z8sd_109"><li class="list__item" id="-g2z8sd_110"><p><b id="-g2z8sd_111">project</b> - only the modules in the current project</p></li><li class="list__item" id="-g2z8sd_112"><p><b id="-g2z8sd_113">editable</b> - only editable models in the current project (this is the default scope used when no scope is specified explicitly)</p></li><li class="list__item" id="-g2z8sd_114"><p><b id="-g2z8sd_115">global</b> - the whole module repository</p></li><li class="list__item" id="-g2z8sd_116"><p><b id="-g2z8sd_117">visible</b> - only visible modules from global repository</p></li><li class="list__item" id="-g2z8sd_118"><p><b id="-g2z8sd_119">modules</b> - restrict to the listed modules</p></li><li class="list__item" id="-g2z8sd_120"><p><b id="-g2z8sd_121">models</b> - restrict to the listed models</p></li><li class="list__item" id="-g2z8sd_122"><p><b id="-g2z8sd_123">custom</b> - use the provided Java Scope class to filter the modules</p></li></ul></section><section class="chapter"><h2 id="copyingnodesintoconsole" data-toc="copyingnodesintoconsole">Copying nodes into Console</h2><p id="-g2z8sd_124">In order to point to a concrete node in project from the console, this node can be copied from the editor and then pasted into the console. The node will be pasted as a special construction, called&nbsp;<b id="-g2z8sd_125">nodeRef</b>, with is a <em id="-g2z8sd_126">BaseLanguage</em> expression of type <b id="-g2z8sd_127">node&lt;&gt;</b>, with value of the pasted node. If there is a necessity to paste the piece of code as is, the 'Paste Original Node' action is available from the context menu.</p><figure id="-g2z8sd_128"><img alt="noderef.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/noderef.png" title="noderef.png" width="679" height="428"></figure></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="other-languages.html" class="navigation-links__prev">Other languages</a><a href="debugger.html" class="navigation-links__next">Debugger</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>