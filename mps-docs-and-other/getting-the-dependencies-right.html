<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/getting-the-dependencies-right.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:20.397603864"><meta name="build-number" content="170"><title>Getting the dependencies right | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"motivation","level":0,"title":"Motivation","anchor":"#motivation"},{"id":"usefulkeyboardshortcuts","level":0,"title":"Useful keyboard shortcuts","anchor":"#usefulkeyboardshortcuts"},{"id":"solution","level":0,"title":"Solution","anchor":"#solution"},{"id":"solutionmodels","level":0,"title":"Solution models","anchor":"#solutionmodels"},{"id":"addingexternaljavaclassesandjarstoaproject-runtimesolutions","level":0,"title":"Adding external Java classes and jars to a project - runtime solutions","anchor":"#addingexternaljavaclassesandjarstoaproject-runtimesolutions"},{"id":"language","level":0,"title":"Language","anchor":"#language"},{"id":"languagemodels/aspects","level":0,"title":"Language models/aspects","anchor":"#languagemodels/aspects"},{"id":"generator","level":0,"title":"Generator","anchor":"#generator"}]</script><script type="application/json" id="topic-shortcuts">{"GotoAction":{"Windows":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-A"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["key-Escape"]},{"keys":["char-X"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-A"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-A"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-A"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command","mod-Shift","char-A"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command","mod-Shift","char-P"]}],"platform":"MAC"}},"ShowIntentionActions":{"Windows":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"MAC"}},"jetbrains.mps.ide.editor.actions.AddLanguageImport_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","char-L"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","char-L"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","char-L"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","char-L"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","char-L"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","char-L"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command","char-L"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command","char-L"]}],"platform":"MAC"}},"jetbrains.mps.ide.editor.actions.AddModelImportByRoot_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"MAC"}},"jetbrains.mps.ide.editor.actions.AddModelImport_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","char-M"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command","char-M"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command","char-M"]}],"platform":"MAC"}}}</script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Getting the dependencies right | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/getting-the-dependencies-right.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Getting the dependencies right | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/getting-the-dependencies-right.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/getting-the-dependencies-right.html",
    "name": "Getting the dependencies right | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="getting-the-dependencies-right" data-main-title="Getting the dependencies right" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///mps-dependencies.topic|Dependencies"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="getting-the-dependencies-right" id="getting-the-dependencies-right.topic">Getting the dependencies right</h1><section class="chapter"><h2 id="motivation" data-toc="motivation">Motivation</h2><p id="-kr8zxh_1">Modules and models are typically interconnected by a network of dependencies of various types. Assuming you have understood the basic principles and categorisations of modules and models, as described at the&nbsp;<a href="mps-project-structure.html" id="-kr8zxh_2">MPS project structure</a>&nbsp;page, we can now dive deeper as learn all the details.</p><p id="-kr8zxh_3">Getting dependencies right in MPS is a frequent cause of frustration among inexperienced users as well as seasoned veterans. This page aims to solve the problem once and for all. You should be able to find all the relevant information categorised into sections by the various module and dependency types.</p><p id="-kr8zxh_4">All programming languages have a notion of "imports". In Java you get packages and the "import" statement. In Ruby or Python you have "modules" and "require" or "import" statements. In MPS we provide a similar mechanism for packaging code and expressing dependencies in a way that works universally across languages - code is packages into <b id="-kr8zxh_5">models</b> and these models can express mutual <b id="-kr8zxh_6">dependencies</b>.</p><p id="-kr8zxh_7">In addtion, since MPS is a multi-language development environment, models can specify the languages (aka syntaxes) enabled in them. This is different from when writing code in Java, Ruby or other languages, where the language to be used is given and fixed by conventions (e.g. the file extension).</p></section><section class="chapter"><h2 id="usefulkeyboardshortcuts" data-toc="usefulkeyboardshortcuts">Useful keyboard shortcuts</h2><p id="-kr8zxh_8">Whenever positioned on a&nbsp;<b id="-kr8zxh_9">model</b>&nbsp;or a&nbsp;<b id="-kr8zxh_10">node</b>&nbsp;in the left-hand-side&nbsp;<b id="-kr8zxh_11">Project Tool Window</b>&nbsp;or when editing in the editor, you can invoke quick actions with the keyboard that will add dependencies or used languages into the current model as well as its containing solution.</p><ul class="list _bullet" id="-kr8zxh_12"><li class="list__item" id="-kr8zxh_13"><p><kbd id="-kr8zxh_14" data-key="jetbrains.mps.ide.editor.actions.AddLanguageImport_Action">Ctrl+L</kbd> &nbsp;- Add a used language</p></li><li class="list__item" id="-kr8zxh_15"><p><kbd id="-kr8zxh_16" data-key="jetbrains.mps.ide.editor.actions.AddModelImport_Action">Ctrl+M</kbd> &nbsp;- Add a dependency</p></li><li class="list__item" id="-kr8zxh_17"><p><kbd id="-kr8zxh_18" data-key="jetbrains.mps.ide.editor.actions.AddModelImportByRoot_Action">Ctrl+R</kbd> &nbsp;- Add a dependency that contains a root concept of a given name</p></li><li class="list__item" id="-kr8zxh_19"><p><kbd id="-kr8zxh_20" data-key="GotoAction">Ctrl+Shift+A</kbd> &nbsp;- brings up a generic action-selection dialog, in which you can select the desired action applicable in the current context</p></li></ul></section><section class="chapter"><h2 id="solution" data-toc="solution">Solution</h2><p id="-kr8zxh_21">Solutions represent programs written in one or more languages. They typically serve four purposes:</p><ol class="list _decimal" id="-kr8zxh_22" type="1"><li class="list__item" id="-kr8zxh_23"><p><b id="-kr8zxh_24">Regular solutions</b> - these solutions hold end user code. The IDE typically generates the code on demand and compiles any generated Java code. The compiled code is not loaded into the IDE, but it can be run on demand in a separate Java process.</p></li><li class="list__item" id="-kr8zxh_25"><p><b id="-kr8zxh_26">Sandbox solutions</b> - these solutions are mostly used by language designers during the process of language design to play with the code in order to interactively evolve their languages. The IDE typically generates the code, but does not attempt to compile the generated code.</p></li><li class="list__item" id="-kr8zxh_27"><p><b id="-kr8zxh_28">Runtime</b> <b id="-kr8zxh_29">solutions</b>&nbsp;- these solutions contain code that other modules (Solutions, Languages or Generators) depend on. The code can consist of MPS models as well as of Java classes, sources or jar files. The IDE will generate and compile the code and reload the classes whenever they get compiled or changed externally.</p></li><li class="list__item" id="-kr8zxh_30"><p><b id="-kr8zxh_31">Plugin solutions</b>&nbsp;- these solutions extend the IDE functionality in some way. They can contribute new menu entries, add side tool panel windows, define custom preference screens from the Project settings dialog, etc. Again, MPS will generate and compile the code and keep reloading the classes, whenever they change. Additionally, the IDE functionality will be updated accordingly.</p></li></ol><p id="-kr8zxh_32">We'll start with the properties valid for all solutions and then cover the specifics of sandbox, runtime and plugin solutions.</p><figure id="-kr8zxh_33"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Solution1.png" class="lightbox"><img alt="Solution1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Solution1.png" title="Solution1.png" width="700" height="419"></a></figure><section class="chapter"><h3 id="common" data-toc="common">Common</h3><section class="chapter"><h4 id="properties" data-toc="properties">Properties</h4><ul class="list _bullet" id="-kr8zxh_34"><li class="list__item" id="-kr8zxh_35"><p><b id="-kr8zxh_36">Name</b>&nbsp;- name of the solution</p></li><li class="list__item" id="-kr8zxh_37"><p><b id="-kr8zxh_38">File path</b>&nbsp;- path the module file</p></li><li class="list__item" id="-kr8zxh_39"><p><b id="-kr8zxh_40">Generator output path</b>&nbsp;- points to the folder, where generated sources should be placed</p></li><li class="list__item" id="-kr8zxh_41"><p><b id="-kr8zxh_42">Module version</b> - an internal version number of the module, should not be changed directly by a user</p></li><li class="list__item" id="-kr8zxh_43"><p><b id="-kr8zxh_44">Left-side panel</b>&nbsp;- contains <b id="-kr8zxh_45">model roots</b>, each of which may hold one or more <b id="-kr8zxh_46">models</b>.</p></li><li class="list__item" id="-kr8zxh_47"><p><b id="-kr8zxh_48">Right-side panel</b>&nbsp;- displays the directory structure under the&nbsp;<b id="-kr8zxh_49">model root</b>&nbsp;currently selected in the left-side panel. Folders and jar files can be selected and marked/unmarked as being <b id="-kr8zxh_50">models</b> of the current <b id="-kr8zxh_51">model root</b>.</p></li></ul></section><section class="chapter"><h4 id="modelroottypes" data-toc="modelroottypes">Model root types</h4><p id="-kr8zxh_52">Solutions contain model roots, which in turn contain models. Each model root typically points to a folder and the contained models lie in one or more sub-folders of that folder. Depending on the type of contained models, the model roots are of different kinds:</p><ul class="list _bullet" id="-kr8zxh_53"><li class="list__item" id="-kr8zxh_54"><p><b id="-kr8zxh_55">default</b> - the standard MPS model root type holding MPS models</p></li><li class="list__item" id="-kr8zxh_56"><p><b id="-kr8zxh_57">java_classes</b> - a set of directories or jar files containing Java class files</p></li><li class="list__item" id="-kr8zxh_58"><p id="-kr8zxh_59"><b id="-kr8zxh_60">javasource_stubs</b> - a set of directories or jar files containing Java sources</p><aside class="prompt" data-type="tip" data-title="" id="-kr8zxh_61"><p id="-kr8zxh_62">When included in the project as models, Java classes in directories or jar files will become first-class citizens of the MPS model pool and will become available for direct references from other models, which import these stub models. A second option to include classes and jars in MPS is to use the <b id="-kr8zxh_63">Java tab</b>&nbsp;and define them as libraries. In that case the classes will be loaded, but not directly referenceble from MPS code. This is useful for libraries that are needed by the stub models.</p></aside></li></ul></section></section><section class="chapter"><h3 id="dependencies" data-toc="dependencies">Dependencies</h3><p id="-kr8zxh_64">The dependencies of a solutions are other solutions and languages, the models of which will be visible from within this solution.</p><p id="-kr8zxh_65">The <b id="-kr8zxh_66">Export</b> flag then specifies whether the dependency should be transitively added as a dependency to all modules that depend on the current solution. For example, of module A depends on B with <b id="-kr8zxh_67">export on</b> and C depends on A, then C depends on B.</p></section><section class="chapter"><h3 id="usedlanguages" data-toc="usedlanguages">Used Languages</h3><p id="-kr8zxh_68">The languages as well as devkits that the solution's models may use are listed among used languages. Used languages are specified on the model level and the <em id="-kr8zxh_69">Used Languages</em>&nbsp;tab on modules only shows a collection of used languages of its all models.</p></section><section class="chapter"><h3 id="java" data-toc="java">Java</h3><p id="-kr8zxh_70">This is where the <b id="-kr8zxh_71">different kinds of Solutions differ</b> mostly.</p><p id="-kr8zxh_72">The Java tab contains several options to customize the level of language features as well as the process of compilation and class-loading. Some of these options are only visible when the area with "more advanced" settings is expanded by clicking on the little arrow icon on the left side:</p><figure id="-kr8zxh_73"><img alt="Advanced settings expansion" src="https://resources.jetbrains.com/help/img/idea/2024.1/JavaFacetCollapsed.png" title="Advanced settings expansion" width="700" height="502"></figure><p id="-kr8zxh_74">Not all combinations of these settings make sence so the UI will gray out the visual elements that are irrelevant with respect to the other selected options.</p><figure id="-kr8zxh_75"><img alt="Advanced settings expanded" src="https://resources.jetbrains.com/help/img/idea/2024.1/JavaFacetExpanded.png" title="Advanced settings expanded" width="700" height="501"></figure><ul class="list _bullet" id="-kr8zxh_76"><li class="list__item" id="-kr8zxh_77"><p><b id="-kr8zxh_78">Language level</b> - specifies the java language features that should be supported in the solution.</p></li><li class="list__item" id="-kr8zxh_79"><p><b id="-kr8zxh_80">Compilation</b> - specifies which compiler to use to compile the Java code generated from the module. </p><ul class="list _bullet" id="-kr8zxh_81"><li class="list__item" id="-kr8zxh_82"><p><b id="-kr8zxh_83">with MPS</b> - indicates, whether the generated artifacts should be compiled with the Java compiler directly in MPS as part of the generation process</p></li><li class="list__item" id="-kr8zxh_84"><p><b id="-kr8zxh_85">External compiler</b> - use an external compiler. MPS doesnât take any part in the compilation, it assumes an external compiler will take care of the compilation, but doesnât mandate any compilation process to be performed. For example, for a java libraries containing compiled classes, thereâs no compilation process, and the âexternalâ option here means that MPS expects compilation to happen independently of MPS itself.</p></li><li class="list__item" id="-kr8zxh_86"><p><b id="-kr8zxh_87">Request external IDEA compilation</b> - (for internal use by MPS developers) use IntelliJ IDEA for compilation. This option is only useful for developing MPS itself and requires an additional plugin to work. The <em id="-kr8zxh_88">-Dmps.internal=true</em> vm option must be enabled for this option to show up.</p></li><li class="list__item" id="-kr8zxh_89"><p><b id="-kr8zxh_90">None</b> - No compilation should be done. MPS does not expect this module to contain any classes and so will not include the module content in the classpath.</p></li></ul></li><li class="list__item" id="-kr8zxh_91"><p><b id="-kr8zxh_92">Compiler output path</b> - specifies the folder in which to store the compiled code.</p></li><li class="list__item" id="-kr8zxh_93"><p><b id="-kr8zxh_94">Class loader</b> - specifies how the compiled classes should be loaded. </p><ul class="list _bullet" id="-kr8zxh_95"><li class="list__item" id="-kr8zxh_96"><p><b id="-kr8zxh_97">MPS</b> - It tells MPS to manage classpath of a module based on the information available in <em id="-kr8zxh_98">JavaModuleFacet</em> (namely, the output classes location and the java libraries + the dependencies on other MPS modules). Modules coming from various contributors have the classpath of the contributor as a parent classloader and can access e.g. plugin libraries (in case of a plugin contributor). The difference from the âModule contributorâ option below is that MPS creates a module classloader (that respects classes_gen + module dependencies + parent classpath) when classloading by MPS, while relies solely on contributorâs classpath in case of âModule Contributorâ (i.e. no MPS dependencies or classes_gen).</p></li><li class="list__item" id="-kr8zxh_99"><p><b id="-kr8zxh_100">Module contributor</b> - indicates that the code that provided the module is also responsible for providing a classloader for the module classes. Most common contributors are app/project libraries and plugins. E.g. a plugin contributor provides a classloader that adds the plugin classes (those in plugin-home/lib/*) in addition to the actual MPS module classes.</p></li><li class="list__item" id="-kr8zxh_101"><p><b id="-kr8zxh_102">N/A</b> - do not load the classes.</p></li></ul></li><li class="list__item" id="-kr8zxh_103"><p><b id="-kr8zxh_104">Contributes extensions to MPS</b> - indicates whether the compiled classes should be loaded into MPS as its extensions (e.g. actions, menus, etc.). It is mostly used for scenarios when the code needs to integrate with IDEA or another plugin, i.e. when some classes have to be visible to both IDEA and MPS as coming from the same classpath.</p></li><li class="list__item" id="-kr8zxh_105"><p><b id="-kr8zxh_106">Source Paths</b> - Java sources that should be made available to other Java code in the project, i.e. to get included into module compilation along with generated sources.</p></li><li class="list__item" id="-kr8zxh_107"><p><b id="-kr8zxh_108">Libraries</b> - Java classes and jars that are required to be included on classpath at compile-time as well as at run-time.</p></li></ul></section><section class="chapter"><h3 id="facets" data-toc="facets">Facets</h3><ul class="list _bullet" id="-kr8zxh_109"><li class="list__item" id="-kr8zxh_110"><p><b id="-kr8zxh_111">Custom Generation</b>&nbsp;- allows attaching a generator plan to the module. More on explicit generator plans is to be found at the <a href="generation-plan.html" id="-kr8zxh_112">Generator plans</a> documentation.</p></li><li class="list__item" id="-kr8zxh_113"><p><b id="-kr8zxh_114">Java</b>&nbsp;- checked, if the solution relies on Java on some way. Keep this checked in most cases.</p></li><li class="list__item" id="-kr8zxh_115"><p><b id="-kr8zxh_116">Tests</b>&nbsp;- checked, if the solution contains test models</p></li></ul></section></section><section class="chapter"><h2 id="solutionmodels" data-toc="solutionmodels">Solution models</h2><p id="-kr8zxh_117">Solutions contain one or more models. Models can be mutually nested and form hierarchies, just like, for example, Java packages can. The properties dialog hides a few configuration options that can be tweaked:</p><figure id="-kr8zxh_118"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Model1.png" class="lightbox"><img alt="Model1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Model1.png" title="Model1.png" width="700" height="394"></a></figure><section class="chapter"><h3 id="dependencies-1" data-toc="dependencies-1">Dependencies</h3><p id="-kr8zxh_119">Models from the current or imported modules can be listed here, so that their elements become accessible in code of this model.</p></section><section class="chapter"><h3 id="usedlanguages-1" data-toc="usedlanguages-1">Used languages</h3><p id="-kr8zxh_120">The languages used by this model must be listed here.</p></section><section class="chapter"><h3 id="advanced" data-toc="advanced">Advanced</h3><p id="-kr8zxh_121">A few extra options are listed on the Advanced tab:</p><ul class="list _bullet" id="-kr8zxh_122"><li class="list__item" id="-kr8zxh_123"><p><b id="-kr8zxh_124">Do not generate</b>&nbsp;- exclude this model from code generation, perhaps because it cannot be meaningfully generated</p></li><li class="list__item" id="-kr8zxh_125"><p><b id="-kr8zxh_126">File path</b>&nbsp;- location of the model file</p></li><li class="list__item" id="-kr8zxh_127"><p><b id="-kr8zxh_128">Languages&nbsp;engaged on generation</b>&nbsp;- lists languages needed for proper generation of the model, if the languages are not directly or indirectly associated with any of the used languages and thus the generator fails finding these languages automatically</p></li></ul></section><section class="chapter"><h3 id="virtualpackages" data-toc="virtualpackages">Virtual packages</h3><p id="-kr8zxh_129">Nodes in models can be logically organised into hierarchies of <b id="-kr8zxh_130">virtual packages</b>. Use the <em id="-kr8zxh_131">Set Virtual Package</em>&nbsp;option from the node's context pop-up menu and specify a name, possibly separating nested virtual folder names with the <b id="-kr8zxh_132">dot</b>&nbsp;symbol.</p></section></section><section class="chapter"><h2 id="addingexternaljavaclassesandjarstoaproject-runtimesolutions" data-toc="addingexternaljavaclassesandjarstoaproject-runtimesolutions">Adding external Java classes and jars to a project - runtime solutions</h2><p id="-kr8zxh_133">Runtime solutions represent libraries of reusable code in MPS. They may contain models holding MPS code as well as <b id="-kr8zxh_134">stub models</b> that refer to external Java sources, classes or jar files. To properly include external Java code in a project, you need to follow a few steps:</p><ol class="list _decimal" id="-kr8zxh_135" type="1"><li class="list__item" id="-kr8zxh_136"><p>Create a new Solution in your project.</p></li><li class="list__item" id="-kr8zxh_137"><p>Copy the desired jar files, classes or Java sources into a directory under the solution's root folder, such as "/libs".</p></li><li class="list__item" id="-kr8zxh_138"><p id="-kr8zxh_139">In the Solution's properties dialog (<kbd id="-kr8zxh_140" data-key="ShowIntentionActions">Alt+Enter</kbd>) attach the Java code. This requires a few steps:</p><figure id="-kr8zxh_141"><img alt="model_roots1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/model_roots1.png" title="model_roots1.png" width="1676" height="1132"></figure><ol class="list _decimal" id="-kr8zxh_142" type="1"><li class="list__item" id="-kr8zxh_143"><p>First, in the left-hand side panel of the <b id="-kr8zxh_144">Common tab</b>, which is used to manage model roots (i.e. locations of models that belong to the module), delete the existing model root unless you want to preserve or create code that you write in MPS as part of your runtime library.</p></li><li class="list__item" id="-kr8zxh_145"><p>Second, also in the <b id="-kr8zxh_146">Common tab</b>, click on&nbsp;<em id="-kr8zxh_147">Add Model Root</em> and select the desired type of files: </p><ul class="list _bullet" id="-kr8zxh_148"><li class="list__item" id="-kr8zxh_149"><p><em id="-kr8zxh_150">Java Classes</em> - for classes or jars</p></li><li class="list__item" id="-kr8zxh_151"><p><em id="-kr8zxh_152">Java sources</em> - for Java sources</p></li><li class="list__item" id="-kr8zxh_153"><p><em id="-kr8zxh_154">Kotlin Common</em> - for Kotlin/Common libraries</p></li><li class="list__item" id="-kr8zxh_155"><p><em id="-kr8zxh_156">Kotlin JVM</em> - for compiled Kotlin/JVM libraries</p></li></ul><p> Then navigate MPS to your lib folder (the folder holding the jar files or the folder holding the root of the package hierarchy of your Java classes or sources). This will add a new entry into the list of model roots. This entry will represent the "libs" folder.</p></li><li class="list__item" id="-kr8zxh_157"><p>Third, when the new model root is selected in the left-hand side panel, select the folder(s) or jar(s) listed in the right-side panel of the properties dialog and click the blue "Sources" button at the top of the right-hand side panel. The selected folders and jars will be shown with a blue icon next to them in the right-hand side panel.</p></li><li class="list__item" id="-kr8zxh_158"><p id="-kr8zxh_159">Switch to the <b id="-kr8zxh_160">Dependencies</b> tab and add the <em id="-kr8zxh_161">JDK</em> solution as a dependency. Do not forget to turn on the <b id="-kr8zxh_162">Export</b> flag. This will allow your jar files to refer to the JDK classes.</p><figure id="-kr8zxh_163"><img alt="model_roots6.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/model_roots6.png" title="model_roots6.png" width="906" height="564"></figure></li><li class="list__item" id="-kr8zxh_164"><p id="-kr8zxh_165">Then head to the&nbsp;<b id="-kr8zxh_166">Java tab</b>&nbsp; to add all the jars or the classes root folders to the&nbsp;<b id="-kr8zxh_167">Libraries</b>&nbsp;part of the window, otherwise the solution using the library classes would not be able to compile. When using&nbsp;<b id="-kr8zxh_168">java_sourcestubs</b>, add the sources into the&nbsp;<b id="-kr8zxh_169">Source paths</b>&nbsp;part of the&nbsp;<b id="-kr8zxh_170">Java tab</b>&nbsp;window, instead. Also add any dependencies of the libraries that you have added to the module.</p><figure id="-kr8zxh_171"><img alt="model_roots2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/model_roots2.png" title="model_roots2.png" width="1712" height="1140"></figure><aside class="prompt" data-type="tip" data-title="" id="-kr8zxh_172"><p>To speed things up, you can actually reverse the order and first add the files on the <b id="-kr8zxh_173">Java tab</b>, which will automatically (once you press the "Apply" button and possibly also close and reopen the dialog) create a corresponding model root entry on the <b id="-kr8zxh_174">Common tab</b>.</p></aside><aside class="prompt" data-type="tip" data-title="" id="-kr8zxh_175"><p>Although the paths shown in the dialog appear to be absolute, MPS stores paths relative to the module (provided they refer to locations under the project root directory) using the "${module}" macro or using a user-defined path variable, if available, so the paths adjust automatically to the MPS environment that opens your project.</p></aside></li><li class="list__item" id="-kr8zxh_176"><p>Additionally, still on the <b id="-kr8zxh_177">Java&gt;</b> tab, expand the panel hiding behind the <em id="-kr8zxh_178">Regular MPS module without contributions of MPS extensions</em> label and set <b id="-kr8zxh_179">Contributes extensions to MPS</b> option to <b id="-kr8zxh_180">Yes</b> to have MPS reload the classes properly. </p><figure id="-kr8zxh_181"><img alt="Expand the area behind the label" src="https://resources.jetbrains.com/help/img/idea/2024.1/JavaFacetOptions1.png" title="Expand the area behind the label" width="600" height="432"></figure><figure id="-kr8zxh_182"><img alt="Select Contributes extensions to MPS" src="https://resources.jetbrains.com/help/img/idea/2024.1/JavaFacetOptions2.png" title="Select Contributes extensions to MPS" width="600" height="432"></figure></li></ol></li><li class="list__item" id="-kr8zxh_183"><p id="-kr8zxh_184">A new folder named&nbsp;<b id="-kr8zxh_185">stubs</b>&nbsp;should appear in your solution</p><figure id="-kr8zxh_186"><img alt="model_roots3.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/model_roots3.png" title="model_roots3.png" width="300" height="174"></figure><p id="-kr8zxh_187">.</p></li><li class="list__item" id="-kr8zxh_188"><p>Now after you import the solution into another module (solution, language, generator) the classes will become available in that module's models.</p></li><li class="list__item" id="-kr8zxh_189"><p id="-kr8zxh_190">The languages that want to use the runtime solution as a runtime dependency of the code that gets generated by the language's generator will need to refer to it in the <b id="-kr8zxh_191">Runtime Solutions</b> section of the&nbsp;<b id="-kr8zxh_192">Runtime</b> tab of their module properties.</p><figure id="-kr8zxh_193"><img alt="model_roots4.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/model_roots4.png" title="model_roots4.png" width="1826" height="1196"></figure></li><li class="list__item" id="-kr8zxh_194"><p id="-kr8zxh_195">Include the runtime jars in the build models - If you use the MPS build scripts to build a plugin with your languages you should also package the runtime libraries in the plugin by copying them into the desired location within the target layout definition.</p><figure id="-kr8zxh_196"><img alt="model_roots5.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/model_roots5.png" title="model_roots5.png" width="300" height="143"></figure><p id="-kr8zxh_197">If you forget to do so, you'll be getting errors like "No such path in local layout" when rebuilding the build script's model.</p><p id="-kr8zxh_198">If your runtime solution uses libraries that are located outside of the project folder, your build script should specify the path to the libraries with a <b id="-kr8zxh_199">folder macro</b>.</p></li></ol></section><section class="chapter"><h2 id="language" data-toc="language">Language</h2><p id="-kr8zxh_200">Languages represent a language definition and consist of several models, each of which represent a distinct aspect of the language. Languages may contain one or more <b id="-kr8zxh_201">Generator</b>&nbsp;modules. The properties dialog for languages is in many ways similar to the one of <b id="-kr8zxh_202">Solutions</b>. Below we will only mention the differences:</p><figure id="-kr8zxh_203"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Language1.png" class="lightbox"><img alt="Language1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Language1.png" title="Language1.png" width="700" height="396"></a></figure><section class="chapter"><h3 id="common-1" data-toc="common-1">Common</h3><p id="-kr8zxh_204">A language typically has a single model root that points to a directory, in which all the models for the distinct aspects are located.</p><ul class="list _bullet" id="-kr8zxh_205"><li class="list__item" id="-kr8zxh_206"><p><b id="-kr8zxh_207">Name</b>&nbsp;- name of the language</p></li><li class="list__item" id="-kr8zxh_208"><p><b id="-kr8zxh_209">File path</b>&nbsp;- path the module file</p></li><li class="list__item" id="-kr8zxh_210"><p><b id="-kr8zxh_211">Generator output path</b>&nbsp;- points to the folder, where generated sources should be placed</p></li><li class="list__item" id="-kr8zxh_212"><p><b id="-kr8zxh_213">Language version</b> - a number representing the version of the language incremented with each new migration created in the language, the number should not be changed directly by a user</p></li><li class="list__item" id="-kr8zxh_214"><p><b id="-kr8zxh_215">Module version</b> - an internal version number of the module, should not be changed directly by a user</p></li><li class="list__item" id="-kr8zxh_216"><p><b id="-kr8zxh_217">Left-side panel</b>&nbsp;- contains <b id="-kr8zxh_218">model roots</b>, each of which may hold one or more <b id="-kr8zxh_219">models</b>.</p></li><li class="list__item" id="-kr8zxh_220"><p><b id="-kr8zxh_221">Right-side panel</b>&nbsp;- displays the directory structure under the&nbsp;<b id="-kr8zxh_222">model root</b>&nbsp;currently selected in the left-side panel. Folders and jar files can be selected and marked/unmarked as being <b id="-kr8zxh_223">models</b> of the current <b id="-kr8zxh_224">model root</b>.</p></li></ul></section><section class="chapter"><h3 id="dependencies-2" data-toc="dependencies-2">Dependencies</h3><p id="-kr8zxh_225">The dependencies of a language are other solutions and languages, the models of which will be visible from within this solution. The&nbsp;<b id="-kr8zxh_226">Export</b>&nbsp;flag then specifies whether the dependency should be transitively added as a dependency to all modules that depend on the current language.</p><p id="-kr8zxh_227">A dependency on a language offers thee <b id="-kr8zxh_228">Scope</b>&nbsp;options:</p><ul class="list _bullet" id="-kr8zxh_229"><li class="list__item" id="-kr8zxh_230"><p id="-kr8zxh_231"><b id="-kr8zxh_232">Default</b> - only makes the models of the other language/solution available for references (aggregation)</p><p id="-kr8zxh_233">The structure aspects manifest languages they incorporate by aggregation (i.e. using a foreign concept in a child role), there's no need to import such languages explicitly into a model that uses the aggregating language or to 'extend' language modules.</p></li><li class="list__item" id="-kr8zxh_234"><p><b id="-kr8zxh_235">Extends</b>&nbsp;- allows the language to define concepts extending concepts from the there language</p></li><li class="list__item" id="-kr8zxh_236"><p><b id="-kr8zxh_237">Generation Target</b>&nbsp;- specifies that the current language is generated into the other language, thus placing a generator ordering constraint that the other language must only be generated after the current one has finished generating</p></li></ul></section><section class="chapter"><h3 id="usedlanguages-2" data-toc="usedlanguages-2">Used Languages</h3><p id="-kr8zxh_238">This is the same as for solutions.</p></section><section class="chapter"><h3 id="runtime" data-toc="runtime">Runtime</h3><ul class="list _bullet" id="-kr8zxh_239"><li class="list__item" id="-kr8zxh_240"><p><b id="-kr8zxh_241">Runtime Solutions</b> - lists solutions of reusable code that the language requires. For more information about creating such a solution, refer to the "<em id="-kr8zxh_242">Adding external Java classes and jars to a project - runtime solutions</em>" section.</p></li><li class="list__item" id="-kr8zxh_243"><p><b id="-kr8zxh_244">Accessory models</b>&nbsp;- lists accessory models that the language needs.&nbsp;Nodes contained in these accessory models are implicitly available on the Java classpath and the <em id="-kr8zxh_245">Dependencies</em> of any model using this language.</p></li></ul></section><section class="chapter"><h3 id="java-1" data-toc="java-1">Java</h3><ul class="list _bullet" id="-kr8zxh_246"><li class="list__item" id="-kr8zxh_247"><p><b id="-kr8zxh_248">Source Paths</b> - Java sources that should be made available to other Java code in the project, i.e. to get included into module compilation along with generated sources.</p></li><li class="list__item" id="-kr8zxh_249"><p><b id="-kr8zxh_250">Libraries</b>&nbsp;- Java classes and jars that are required to be included on classpath at compile-time as well as at run-time.</p></li></ul></section><section class="chapter"><h3 id="facets-1" data-toc="facets-1">Facets</h3><p id="-kr8zxh_251">This is the same as for solutions.</p><aside class="prompt" data-type="tip" data-title="" id="-kr8zxh_252"><p id="-kr8zxh_253">When using a runtime solution in a language, you need to set both the dependency in the&nbsp;<b id="-kr8zxh_254">Dependencies</b>&nbsp;tab and the&nbsp;<b id="-kr8zxh_255">Runtime Solutions</b>&nbsp;on the&nbsp;<b id="-kr8zxh_256">Runtime</b>&nbsp;tab.</p></aside></section></section><section class="chapter"><h2 id="languagemodels/aspects" data-toc="languagemodels/aspects">Language models/aspects</h2><section class="chapter"><h3 id="dependencies/&nbsp;usedlanguages/&nbsp;advanced" data-toc="dependencies/&nbsp;usedlanguages/&nbsp;advanced">Dependencies /&nbsp;Used Languages /&nbsp;Advanced</h3><p id="-kr8zxh_257">These settings are the same and have the same meaning as the settings on any other models, as described in the <b id="-kr8zxh_258">Solution</b>&nbsp;section.</p></section></section><section class="chapter"><h2 id="generator" data-toc="generator">Generator</h2><p id="-kr8zxh_259">The generator module settings are very similar to those of other module types:</p><section class="chapter"><h3 id="common-2" data-toc="common-2">Common</h3><ul class="list _bullet" id="-kr8zxh_260"><li class="list__item" id="-kr8zxh_261"><p><b id="-kr8zxh_262">Name</b>&nbsp;- name of the generator module</p></li><li class="list__item" id="-kr8zxh_263"><p><b id="-kr8zxh_264">File path</b>&nbsp;- path the module file</p></li><li class="list__item" id="-kr8zxh_265"><p><b id="-kr8zxh_266">Alias</b> - a logical name representing the generator in the UI, since the <em id="-kr8zxh_267">name</em> typically contains a rather lengthy value</p></li><li class="list__item" id="-kr8zxh_268"><p><b id="-kr8zxh_269">Left-side panel</b>&nbsp;- contains <b id="-kr8zxh_270">model roots</b>, each of which may hold one or more <b id="-kr8zxh_271">models</b>.</p></li><li class="list__item" id="-kr8zxh_272"><p><b id="-kr8zxh_273">Right-side panel</b>&nbsp;- displays the directory structure under the&nbsp;<b id="-kr8zxh_274">model root</b>&nbsp;currently selected in the left-side panel. Folders and jar files can be selected and marked/unmarked as being <b id="-kr8zxh_275">models</b> of the current <b id="-kr8zxh_276">model root</b>.</p></li></ul></section><section class="chapter"><h3 id="dependencies-3" data-toc="dependencies-3">Dependencies</h3><p id="-kr8zxh_277">This is the same as for solutions. Additionally generator modules may depend on other generator modules and specify <b id="-kr8zxh_278">Scope</b>:</p><ul class="list _bullet" id="-kr8zxh_279"><li class="list__item" id="-kr8zxh_280"><p><b id="-kr8zxh_281">Default</b>&nbsp;-&nbsp;only makes the models of the other language/solution available for references</p></li><li class="list__item" id="-kr8zxh_282"><p><b id="-kr8zxh_283">Extends</b>&nbsp;- the current generator will be able to extend the generator elements of the extended generator</p></li><li class="list__item" id="-kr8zxh_284"><p><b id="-kr8zxh_285">Design</b>&nbsp;- the target generator is only needed to be referred from a priority rule of this generator</p></li></ul></section><section class="chapter"><h3 id="usedlanguages-3" data-toc="usedlanguages-3">Used Languages</h3><p id="-kr8zxh_286">This is the same as for languages.</p></section><section class="chapter"><h3 id="generatorspriorities" data-toc="generatorspriorities">Generators priorities</h3><p id="-kr8zxh_287">This tab allows to define <b id="-kr8zxh_288">priority rules</b>&nbsp;for generators, in order to properly order the generators in the generation process. Additionally, three options are configurable through the check-boxes at the bottom of the dialog:</p><ul class="list _bullet" id="-kr8zxh_289"><li class="list__item" id="-kr8zxh_290"><p><b id="-kr8zxh_291">Generate Templates</b>&nbsp;- indicates, whether the generator templates should be generated and compiled into Java, or whether they should be instead interpreted by the generator during generation</p></li></ul></section><section class="chapter"><h3 id="java-2" data-toc="java-2">Java</h3><ul class="list _bullet" id="-kr8zxh_292"><li class="list__item" id="-kr8zxh_293"><p><b id="-kr8zxh_294">Source Paths</b> - Java sources that should be made available to other Java code in the project, i.e. to get included into module compilation along with generated sources.</p></li><li class="list__item" id="-kr8zxh_295"><p><b id="-kr8zxh_296">Libraries</b>&nbsp;- Java classes and jars that are required to be included on classpath at compile-time as well as at run-time.</p></li></ul></section><section class="chapter"><h3 id="facets-2" data-toc="facets-2">Facets</h3><p id="-kr8zxh_297">This is the same as for languages.</p></section><section class="chapter"><h3 id="generatormodels" data-toc="generatormodels">Generator models</h3><p id="-kr8zxh_298">This is the same as for solutions.</p></section></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="mps-dependencies.html" class="navigation-links__prev">Dependencies</a><a href="dependencies-analyzer-analyze-model-dependencies.html" class="navigation-links__next">Dependencies Analyzer - analyze model dependencies</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>