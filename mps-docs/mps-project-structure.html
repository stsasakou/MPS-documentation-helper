<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/mps-project-structure.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:20.500615189"><meta name="build-number" content="170"><title>MPS project structure | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"project","level":0,"title":"Project","anchor":"#project"},{"id":"models","level":0,"title":"Models","anchor":"#models"},{"id":"modules","level":0,"title":"Modules","anchor":"#modules"},{"id":"projects","level":0,"title":"Projects","anchor":"#projects"}]</script><script type="application/json" id="topic-shortcuts">{"ShowIntentionActions":{"Windows":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Alt","key-Enter"]}],"platform":"MAC"}}}</script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="MPS project structure | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/mps-project-structure.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="MPS project structure | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/mps-project-structure.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/mps-project-structure.html",
    "name": "MPS project structure | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="mps-project-structure" data-main-title="MPS project structure" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="mps-project-structure" id="mps-project-structure.topic">MPS project structure</h1><p id="-wvkokw_1">When designing languages and writing code, good structure helps you navigate around and combine the pieces together. MPS is similar to other IDEs in this regard.</p><aside class="prompt" data-type="tip" data-title="" id="-wvkokw_2"><p id="-wvkokw_3">A frequent question related too the structure of the MPS project is about the various type of solution. To quickly learn more about Sandbox, plugin and runtime solutions head to <a href="#solutions" id="-wvkokw_4">Solutions</a>.</p></aside><section class="chapter"><h2 id="project" data-toc="project">Project</h2><p id="-wvkokw_5">Project is the main organizational unit in MPS. Projects consist of one or more modules, which themselves consist of models. Model is the smallest unit for generation/compilation. We describe these concepts in detail right below.</p></section><section class="chapter"><h2 id="models" data-toc="models">Models</h2><p id="-wvkokw_6">Here's a major difference that MPS brings along - programs are not in text form. Ever.</p><p id="-wvkokw_7">You might be used to the fact that any programming is done in text. You edit text. The text is than parsed by a parser to build an AST. Grammars are typically used to define parsers. AST is then used as the core data structure to work with your program further, either by the compiler to generate runnable code or by an IDE to give you clever coding assistance, refactorings and static code analysis.</p><p id="-wvkokw_8">Now, seeing that AST is such a useful, flexible and powerful data structure, how would it help if we could work with AST from the very beginning, avoiding text, grammar and parsers altogether? Well, this is exactly what MPS does.</p><p id="-wvkokw_9">To give your code some structure, programs in MPS are organized into <b id="-wvkokw_10">models</b>. Think of models as somewhat similar to compilation units in text based languages. To give you an example, <em id="-wvkokw_11">BaseLanguage</em>, the bottom-line language in MPS, which builds on Java and extends it in many ways, uses models so that each model represents a Java package. Models typically consist of <b id="-wvkokw_12">root nodes</b>, which represent top level declarations, and <b id="-wvkokw_13">non-root nodes</b>. For example, in <em id="-wvkokw_14">BaseLanguage</em> classes, interfaces, and enums are root nodes. (You can read more about nodes <a href="basic-notions.html" id="-wvkokw_15">here</a>).</p><p id="-wvkokw_16">Models need to hold their meta information:</p><ul class="list _bullet" id="-wvkokw_17"><li class="list__item" id="-wvkokw_18"><p>models they use (imported models)</p></li><li class="list__item" id="-wvkokw_19"><p>languages (and also devkits) they are written in (in used languages section)</p></li><li class="list__item" id="-wvkokw_20"><p>a few extra params, such as the model file and special generator parameters</p></li></ul><p id="-wvkokw_21">This meta information can be altered in <em id="-wvkokw_22">Model Properties</em> of the model's popup menu or using <kbd id="-wvkokw_23" data-key="ShowIntentionActions">Alt+Enter</kbd> when positioned on the model.</p></section><section class="chapter"><h2 id="modules" data-toc="modules">Modules</h2><p id="-wvkokw_24">Models themselves are the most fine-grained grouping elements. <b id="-wvkokw_25">Modules</b> organize models into higher level entities. A module typically consists of several models acompanied with meta information describing module's properties and dependencies. MPS distinguishes several types of modules: <em id="-wvkokw_26">solutions</em>, <em id="-wvkokw_27">languages</em>, <em id="-wvkokw_28">devkits</em>, and <em id="-wvkokw_29">generators</em>.</p><p id="-wvkokw_30">We'll now talk about the meta-information structure as well as the individual module types in detail.</p><section class="chapter"><h3 id="modulemetainformation" data-toc="modulemetainformation">Module meta information</h3><p id="-wvkokw_31">Now when we have stuff organized into modules, we need a way to combine the modules together for better good. Relationships between modules are described through meta information they hold. The possible relationships among modules can be categorized into several groups:</p><ul class="list _bullet" id="-wvkokw_32"><li class="list__item" id="-wvkokw_33"><p><b id="-wvkokw_34">Dependency</b> - if one module depends on another, and so models inside the former can import models from the latter. The <b id="-wvkokw_35">reexport</b> property of the dependency relationship indicates whether the dependency is transitive or not. If module A depends on module B with the <em id="-wvkokw_36">reexport</em> property set to true, every other module that declares depency on A automatically depends on B as well.</p></li><li class="list__item" id="-wvkokw_37"><p><b id="-wvkokw_38">Extended</b> language dependency - if language L extends language M, then every concept from M can be used inside L as a target of a role or an extended concept. Also, all the aspects from language M are available for use and extension in the corresponding aspects of language L.</p></li><li class="list__item" id="-wvkokw_39"><p><b id="-wvkokw_40">Generation Target</b> dependency - a&nbsp;relation between two languages (L2 and L1), when one needs to specify that Generator of L2 generates into L1 and thus needs L1's runtime dependencies.</p></li><li class="list__item" id="-wvkokw_41"><p><b id="-wvkokw_42">Used language</b> - if module A uses language L, then models inside A can use language L.</p></li><li class="list__item" id="-wvkokw_43"><p><b id="-wvkokw_44">Used devkit</b> - if module A uses devkit D, then models inside A can use devkit D.</p></li><li class="list__item" id="-wvkokw_45"><p><b id="-wvkokw_46">Generator output path</b> - generator output path is a folder where all newly generated files will be placed. This is the place you can look for the stuff MPS generates for you.</p></li><li class="list__item" id="-wvkokw_47"><p id="-wvkokw_48"><b id="-wvkokw_49">Facets</b> - Facets specify additional technologies or settings that should be available for the module. Facets associated with a module are recorded inside the module descriptor file, which is thus the ultimate source of facet configuration information. All facets, including the <b id="-wvkokw_50">Tests</b> and <b id="-wvkokw_51">Java</b> ones are completely optional.</p><p id="-wvkokw_52">The <b id="-wvkokw_53">Tests</b> facet ensures that the generated code will be placed in a directory named <em id="-wvkokw_54">test_gen</em> instead of the <em id="-wvkokw_55">source_gen</em> location used for ordinary code.</p><p id="-wvkokw_56">Beware that unchecking the <b id="-wvkokw_57">Java</b> module facet in the Language module properties would exclude the language from the classloading mechanism and thus result in completely different experience.</p></li></ul><p id="-wvkokw_58">Now we'll look at the different types of modules you can find in MPS.</p></section><section class="chapter"><h3 id="solutions" data-toc="solutions">Solutions</h3><p id="-wvkokw_59">Solution is the simplest possible kind of module in MPS. It is just a set of models holding code and unified under a common name. There are four types of solutions:</p><ul class="list _bullet" id="-wvkokw_60"><li class="list__item" id="-wvkokw_61"><p><b id="-wvkokw_62">Ordinary solutions</b> - these solutions hold end user code. The IDE typically generates the code on demand and compiles any generated Java code. The compiled code is not loaded into the IDE, but it can be run on demand in a separate Java process.</p></li><li class="list__item" id="-wvkokw_63"><p><b id="-wvkokw_64">Sandbox solutions</b> - these solutions are mostly used by language designers during the process of language design to play with the code in order to interactively evolve their languages. The IDE typically generates the code, but does not attempt to compile the generated code.</p></li><li class="list__item" id="-wvkokw_65"><p><b id="-wvkokw_66">Runtime solutions</b> - these solutions contain code that other modules (Solutions, Languages or Generators) depend on. The code can consist of MPS models as well as of Java classes, sources or jar files. The IDE will generate and compile the code and reload the classes, whenever they get compiled or changed externally.</p></li><li class="list__item" id="-wvkokw_67"><p><b id="-wvkokw_68">Plugin solutions</b> - these solutions extend the IDE functionality in some way. They can contribute new menu entries, add side tool panel windows, define custom preference screens from the Project settings dialog, etc. Again, MPS will generate and compile the code and keep reloading the classes, whenever they change. Additionally, the IDE functionality will be updated accordingly.</p></li></ul><aside class="prompt" data-type="tip" data-title="" id="-wvkokw_69"><p id="-wvkokw_70">For more information about how to set up dependencies for a runtime or a plugin solution, check out the <a href="getting-the-dependencies-right.html" id="-wvkokw_71">Dependencies</a> page.</p></aside></section><section class="chapter"><h3 id="languages" data-toc="languages">Languages</h3><p id="-wvkokw_72">Language is a module that is more complex than a solution and represents a reusable language. It consists of several models, each defining a certain aspect of the language: <em id="-wvkokw_73">structure</em>, <em id="-wvkokw_74">editor</em>, <em id="-wvkokw_75">actions</em>, <em id="-wvkokw_76">typesysteand so on</em>, and so on</p><p id="-wvkokw_77">Languages can extend other languages. An extending language can then use all concepts from the extended language - derive its own concepts, use inherited concepts as targets for references and also place inherited concepts directly as children inside its own concepts.</p><p id="-wvkokw_78">Languages frequently have runtime dependencies on third-party libraries or solutions. You may, for example, create a language wrapping any Java library, such as Hibernate or Swt. Your language will then give the users a better and smoother alternative to the standard Java API that these libraries come with.</p><p id="-wvkokw_79">Now, for your language to work, you need to include the wrapped library with your language. You do it either through a <em id="-wvkokw_80">runtime classpath</em> or through <em id="-wvkokw_81">a runtime solution</em>. Runtime classpath is suitable for typical scenarios, such as Java-written libraries, while runtime solutions should be prefered for more complex scenarios.</p><ul class="list _bullet" id="-wvkokw_82"><li class="list__item" id="-wvkokw_83"><p>Runtime classpath - makes library classes available as <em id="-wvkokw_84">stubs</em> language generators</p></li><li class="list__item" id="-wvkokw_85"><p>Runtime solutions - these models are visible to all models inside the generator</p></li></ul><section class="chapter"><h4 id="languageaspects" data-toc="languageaspects">Language aspects</h4><p id="-wvkokw_86">Language aspects describe different facets of a language:</p><ul class="list _bullet" id="-wvkokw_87"><li class="list__item" id="-wvkokw_88"><p>structure - describes the nodes and structure of the language AST. This is the only mandatory aspect of any language.</p></li><li class="list__item" id="-wvkokw_89"><p>editor - describes how a language will be presented and edited in the editor</p></li><li class="list__item" id="-wvkokw_90"><p>actions - describes the completion menu customizations specific to a language, that is what happens when you type <em id="-wvkokw_91">Control + Space</em></p></li><li class="list__item" id="-wvkokw_92"><p>constraints - describes the constraints on AST: where a node is applicable, which property and reference are allowed, and so on</p></li><li class="list__item" id="-wvkokw_93"><p>behavior - describes the behavioral aspect of AST, that is AST methods</p></li><li class="list__item" id="-wvkokw_94"><p>typesystem - describes the rules for calculating types in a language</p></li><li class="list__item" id="-wvkokw_95"><p>intentions - describes intentions (context dependent actions available when light bulb pops up or when the user types <kbd id="-wvkokw_96" data-key="ShowIntentionActions">Alt+Enter</kbd>)</p></li><li class="list__item" id="-wvkokw_97"><p>plugin - allows a language to integrate into MPS IDE</p></li><li class="list__item" id="-wvkokw_98"><p>data flow - describes the intended flow of data in code. It allows you to find unreachable statements, uninitialized reads and so on</p></li></ul><p id="-wvkokw_99">You can read more about each aspect in the corresponding section of this guide.</p><aside class="prompt" data-type="tip" data-title="" id="-wvkokw_100"><p id="-wvkokw_101">To learn all about setting dependencies between modules and models, check out the <a href="getting-the-dependencies-right.html" id="-wvkokw_102">Getting the dependencies right</a> page.</p></aside></section></section><section class="chapter"><h3 id="generators" data-toc="generators">Generators</h3><p id="-wvkokw_103">Generators define possible transformations of a language into something else, typically into another languages. Generators may depend on other generators. Since the order in which generators are applied to code is important, ordering constraints can be set on generators. You can read more about generation in the <a href="mps-generator.html" id="-wvkokw_104">corresponding section</a>.</p></section><section class="chapter"><h3 id="devkits" data-toc="devkits">DevKits</h3><p id="-wvkokw_105">DevKits have been created to make your life easier. If you have a large group of interconnected languages, you certainly appreciate a way to treat them as a single unit. For example, you may want to import them without listing all of the individual languages. DevKits make this possible. When building a DevKit, you list languages to include.</p><p id="-wvkokw_106">As expected, DevKits can extend other DevKits. The extending DevKit will then carry along all the inherited languages as if they were its own ones.</p></section></section><section class="chapter"><h2 id="projects" data-toc="projects">Projects</h2><p id="-wvkokw_107">This one is easy. A project wraps modules that you need to group together and work with them as a unit. You can open the <b id="-wvkokw_108">Properties</b>&nbsp;of a project (<kbd id="-wvkokw_109" data-key="ShowIntentionActions">Alt+Enter</kbd> on the Project node in the <b id="-wvkokw_110">Project View</b>&nbsp;panel) and add or remove modules that should be included in the project. You can also create new modules from the project nodes' context pop-up menu.</p><section class="chapter"><h3 id="javacompilation" data-toc="javacompilation">Java compilation</h3><p id="-wvkokw_111">MPS was born from Java and is frequently used in Java environment. Since MPS models are often generated into java files, a way to compile java is needed before we can run our programs. There are generally two options:</p><ul class="list _bullet" id="-wvkokw_112"><li class="list__item" id="-wvkokw_113"><p>Compiling in MPS (recommended)</p></li><li class="list__item" id="-wvkokw_114"><p>Compiling in IntelliJ IDEA (requires IntelliJ IDEA)</p></li></ul><p id="-wvkokw_115">When you compile your classes in MPS, you have to set the module's <em id="-wvkokw_116">source path</em>. The source files will be compiled each time the module gets generated, or whenever you invoke compilation manually by the make or rebuild actions.</p></section></section><div class="last-modified">Last modified: 09 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="basic-notions.html" class="navigation-links__prev">Basic notions</a><a href="glossary.html" class="navigation-links__next">Glossary</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>