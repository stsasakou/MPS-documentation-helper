<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/find-usages.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:20.787538152"><meta name="build-number" content="170"><title>Find usages | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"usingfindusagessubsystem","level":0,"title":"Using Find Usages Subsystem","anchor":"#usingfindusagessubsystem"},{"id":"finders","level":0,"title":"Finders","anchor":"#finders"},{"id":"specificstatements","level":0,"title":"Specific Statements","anchor":"#specificstatements"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Find usages | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/find-usages.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Find usages | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/find-usages.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/find-usages.html",
    "name": "Find usages | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="find-usages" data-main-title="Find usages" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="find-usages" id="find-usages.topic">Find usages</h1><p id="-jq6oh1_1">In MPS, any model consists of nodes. Nodes can have many types of relations. These relations may be expressed in a node structure (e.g. "class descendants" relation on classes) or not (e.g. "overriding method" relation on methods). Find Usages is a tool to display some specifically related nodes for a given node.</p><p id="-jq6oh1_2">In MPS, the Find Usages system is fully customizable - you can write your own entities, so-called <b id="-jq6oh1_3">finders</b>, which represent algorithms for finding related nodes. For every type of relation there is a corresponding finder.</p><p id="-jq6oh1_4">This is how "find usages" result looks like:</p><figure id="-jq6oh1_5"><img alt="Findx1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Findx1.png" title="Findx1.png" width="500" height="292"></figure><section class="chapter"><h2 id="usingfindusagessubsystem" data-toc="usingfindusagessubsystem">Using Find Usages Subsystem</h2><p id="-jq6oh1_6">You can press Alt+F7 on a node (no matter where - in the editor or in the project tree) to see what kind of usages MPS can search for.</p><p id="-jq6oh1_7">You can also right-click a node and select "Find Usages" to open the "Find usages" window.</p><figure id="-jq6oh1_8"><img alt="Image2018_45.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Image2018_45.png" title="Image2018_45.png" width="1025" height="473"></figure><p id="-jq6oh1_9">The Find usages window adopts to the node under caret. For behavior methods, for example, it gives the users to select "Overridden Methods" and "Overriding Methods".</p><figure id="-jq6oh1_10"><img alt="Image2018_11.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Image2018_11.png" title="Image2018_11.png" width="977" height="451"></figure><p id="-jq6oh1_11"><b id="-jq6oh1_12">Finders -</b> select the categories of usages you want to search for</p><p id="-jq6oh1_13"><b id="-jq6oh1_14">Scope -</b> this lets you select <em id="-jq6oh1_15">where</em> you want to search for usages - in concrete model, module, current project or everywhere.</p><p id="-jq6oh1_16"><b id="-jq6oh1_17">View Options -</b> additional view options</p><p id="-jq6oh1_18">After adjusting your search, click OK to run it. Results will be shown in the Find Usages Tool as shown above.</p></section><section class="chapter"><h2 id="finders" data-toc="finders">Finders</h2><p id="-jq6oh1_19">To implement your own mechanism for finding related nodes, you should become familiar with Finders. For every relation there is a specific Finder that provides all the information about the search process.</p><section class="chapter"><h3 id="wheretostoremyfinders?" data-toc="wheretostoremyfinders?">Where to store my finders?</h3><p id="-jq6oh1_20">Finders can be created in any model by importing findUsages language. However, MPS collects finders only from <b id="-jq6oh1_21">findUsages</b> language aspects. So, if you want your finder to be used by the MPS Find Usages subsystem, it must be stored in the <b id="-jq6oh1_22">findUsages</b> aspect of your language.</p></section><section class="chapter"><h3 id="finderstructure" data-toc="finderstructure">Finder structure</h3><div class="table-wrapper"><table class="wide" id="-jq6oh1_23"><thead><tr class="ijRowHead" id="-jq6oh1_24"><th id="-jq6oh1_25"><section class="chapter"><h4 id="name" data-toc="name">name</h4></section></th><th id="-jq6oh1_26"><p id="-jq6oh1_27">The name of a finder. You can choose any name you want, the only obvious constraint being that the names must be unique in the scope of the model.</p></th></tr></thead><tbody><tr id="-jq6oh1_28"><td id="-jq6oh1_29"><section class="chapter"><h4 id="forconcept" data-toc="forconcept">for concept</h4></section></td><td id="-jq6oh1_30"><p id="-jq6oh1_31">Finder will be tested for applicability only to those nodes that are instances of this concept and its subconcepts.</p></td></tr><tr id="-jq6oh1_32"><td id="-jq6oh1_33"><section class="chapter"><h4 id="description" data-toc="description">description</h4></section></td><td id="-jq6oh1_34"><p id="-jq6oh1_35">This string represents the finder in the list of finders. Should be rather short.</p></td></tr><tr id="-jq6oh1_36"><td id="-jq6oh1_37"><section class="chapter"><h4 id="longdescription" data-toc="longdescription">long description</h4></section></td><td id="-jq6oh1_38"><p id="-jq6oh1_39">If it's not clear from the description string what exactly the finder does, you can add a long description, which will be shown as a tooltip for the finder in the list of finders.</p></td></tr><tr id="-jq6oh1_40"><td id="-jq6oh1_41"><section class="chapter"><h4 id="isvisible" data-toc="isvisible">is visible</h4></section></td><td id="-jq6oh1_42"><p id="-jq6oh1_43">Determines whether the finder is visible for the current node. For example, a finder that finds ancestor classes of some class should not be visible when this class has no parent.</p></td></tr><tr id="-jq6oh1_44"><td id="-jq6oh1_45"><section class="chapter"><h4 id="isapplicable" data-toc="isapplicable">is applicable</h4></section></td><td id="-jq6oh1_46"><p id="-jq6oh1_47">Finders that have passed <b id="-jq6oh1_48">for concept</b> are tested for applicability to the current node. If this method returns true, the finder is shown in the list of available finders; otherwise it is not shown. The <b id="-jq6oh1_49">node</b> argument of this method is guaranteed to be an instance of the concept specified in "for concept" or its subconcepts.</p><p id="-jq6oh1_50">Note the difference between <b id="-jq6oh1_51">is visible</b> and <b id="-jq6oh1_52">is applicable</b>. The first one is responsible only for viewing. The second one represents a "valid call" contract between the finder and its caller. This is important because we have an <b id="-jq6oh1_53">execute</b> statement in findUsagesLanguage, which will be described later. For more information, refer to the following <em id="-jq6oh1_54">execute</em> section.</p></td></tr><tr id="-jq6oh1_55"><td id="-jq6oh1_56"><section class="chapter"><h4 id="find" data-toc="find">find</h4></section></td><td id="-jq6oh1_57"><p id="-jq6oh1_58">This method should find given node usages in a given scope. For each found usage of a node, use the <b id="-jq6oh1_59">add result</b> statement to register it. For data other than nodes that the Find Usages dialog is able to visualize use <b id="-jq6oh1_60">add raw result</b>.</p></td></tr><tr id="-jq6oh1_61"><td id="-jq6oh1_62"><section class="chapter"><h4 id="searchednodes" data-toc="searchednodes">searched nodes</h4></section></td><td id="-jq6oh1_63"><p id="-jq6oh1_64">This method returns nodes for which the finder searched. These nodes are shown in <b id="-jq6oh1_65">searched nodes</b> subtree in the tool.</p><p id="-jq6oh1_66">For each node to display, use the <b id="-jq6oh1_67">add node</b> statement to register it.</p></td></tr><tr id="-jq6oh1_68"><td id="-jq6oh1_69"><section class="chapter"><h4 id="getcategory" data-toc="getcategory">get category</h4></section></td><td id="-jq6oh1_70"><p id="-jq6oh1_71">There are a number of variants to group found nodes in the tool. One of them is grouping by category, that is given for every found node by the finder that has found it. This method gives a category to each node found by this finder.</p></td></tr></tbody></table></div></section><section class="chapter"><h3 id="whatdoesthempsfindusagessubsystemdoautomatically?&nbsp;" data-toc="whatdoesthempsfindusagessubsystemdoautomatically?&nbsp;">What does the MPS Find Usages subsystem do automatically?&nbsp;</h3><ul class="list _bullet" id="-jq6oh1_72"><li class="list__item" id="-jq6oh1_73"><p>Stores search options between multiple invocations and between MPS runs</p></li><li class="list__item" id="-jq6oh1_74"><p>Stores search results between MPS runs</p></li><li class="list__item" id="-jq6oh1_75"><p>Automatically handles deleted nodes</p></li><li class="list__item" id="-jq6oh1_76"><p>All the visualization and operations with found nodes is done by the subsystem, not by finders</p></li></ul></section></section><section class="chapter"><h2 id="specificstatements" data-toc="specificstatements">Specific Statements</h2><section class="chapter"><h3 id="execute" data-toc="execute">execute</h3><p id="-jq6oh1_77">Finders can be reused thanks to the <b id="-jq6oh1_78">execute</b> statement. The execution of this statement consists of 2 steps: validating the search query (checking <b id="-jq6oh1_79">for concept</b> and <b id="-jq6oh1_80">isApplicable</b>), and executing the <b id="-jq6oh1_81">find</b> method. That's where you can see the difference between <b id="-jq6oh1_82">isApplicable</b> and <b id="-jq6oh1_83">isShown</b>. If you use <b id="-jq6oh1_84">isApplicable</b> for cases when the finder should be applicable, but not shown, you can get an error when using this finder in the <b id="-jq6oh1_85">execute</b> statement.</p></section><section class="chapter"><h3 id="executeasynchronously" data-toc="executeasynchronously">execute asynchronously</h3><p id="-jq6oh1_86">Furthermore, in order to execute a finder asynchronously one needs to use a special <em id="-jq6oh1_87">OnEachNodeFoundByExpression</em>, which represents a simple finder invocation with a callback which is executed for each found node.</p><figure id="-jq6oh1_88"><img alt="Image2018_25.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Image2018_25.png" title="Image2018_25.png" width="981" height="554"></figure><p id="-jq6oh1_89">Examples</p><p id="-jq6oh1_90">You can see some finder examples in jetbrains.mps.baseLanguage.findUsages</p><p id="-jq6oh1_91">You can also find all finders by going to the FinderDeclaration concept (Ctrl+N, type "FinderDeclaration", then press ENTER) and finding all instances of this concept (Alt+F7, check instances, then check Global Scope).</p></section></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="extension-support.html" class="navigation-links__prev">Extension support</a><a href="run-configurations.html" class="navigation-links__next">Run Configurations</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>