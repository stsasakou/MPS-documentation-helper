<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/typesystem-debugging.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:21.949238748"><meta name="build-number" content="170"><title>Typesystem Debugging | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"tryitoutforyourself","level":0,"title":"Try it out for yourself","anchor":"#tryitoutforyourself"},{"id":"inspectingthetypes","level":0,"title":"Inspecting the types","anchor":"#inspectingthetypes"},{"id":"typeerrors","level":0,"title":"Type errors","anchor":"#typeerrors"},{"id":"type-systemtrace","level":0,"title":"Type-system Trace","anchor":"#type-systemtrace"},{"id":"step-by-stepdebugging","level":0,"title":"Step-by-step debugging","anchor":"#step-by-stepdebugging"}]</script><script type="application/json" id="topic-shortcuts">{"jetbrains.mps.ide.actions.GoToNode_Action":{"Windows":{"keystrokes":[{"keys":["key-F3"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["key-F3"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["key-F3"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["key-F3"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["key-F3"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["key-F3"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["key-F3"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["key-F3"]}],"platform":"MAC"}},"jetbrains.mps.ide.devkit.actions.ShowTypeSystemTrace_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-X"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-X"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-X"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-X"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-X"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-X"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command","mod-Shift","char-X"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command","mod-Shift","char-X"]}],"platform":"MAC"}},"jetbrains.mps.ide.editor.actions.Comment_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","char-/"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","char-/"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","char-/"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","char-/"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","char-/"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","char-/"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command","char-/"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command","char-/"]}],"platform":"MAC"}},"jetbrains.mps.lang.typesystem.pluginSolution.plugin.ShowNodeType_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Control","mod-Shift","char-P"]}],"platform":"MAC"}}}</script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Typesystem Debugging | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/typesystem-debugging.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Typesystem Debugging | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/typesystem-debugging.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/typesystem-debugging.html",
    "name": "Typesystem Debugging | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="typesystem-debugging" data-main-title="Typesystem Debugging" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///language-definition.topic|Language-definition///typesystem.topic|Typesystem"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="typesystem-debugging" id="typesystem-debugging.topic">Typesystem Debugging</h1><p id="-rpkb1i_1">For debugging typesystem MPS provides <b id="-rpkb1i_2">Typesystem Trace</b>&nbsp;- an integrated visual tool that gives you insight into the evaluation process that happens inside the typesystem engine.</p><section class="chapter"><h2 id="tryitoutforyourself" data-toc="tryitoutforyourself">Try it out for yourself</h2><p id="-rpkb1i_3">We prepared a dedicated sample language for you to easily experiment with the typesystem. Open the <b id="-rpkb1i_4">Expressions</b>&nbsp;sample project that comes bundled with MPS and should be available among the sample projects in the user home folder.</p><figure id="-rpkb1i_5"><img alt="tt11.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/tt11.png" title="tt11.png" width="1596" height="1298"></figure><section class="chapter"><h3 id="thesamplelanguage" data-toc="thesamplelanguage">The sample language</h3><p id="-rpkb1i_6">The language to experiment with is a simplified expression language with several types, four arithmetic operations (+, -, *, /), assignment (:=), two types of variable declarations and a variable reference. The editor is very basic with almost no customization, so editing the expressions will perhaps be quite rough. Nevertheless, we expect you to inspect the existing samples and debug their types more than writing new code, so the lack of smooth editing should not be an issue.</p><figure id="-rpkb1i_7"><img alt="TT1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/TT1.png" title="TT1.png" width="2046" height="1244"></figure><p id="-rpkb1i_8">The language can be embedded into Java thanks to the <em id="-rpkb1i_9">SimpleMathWrapper</em> concept, but no interaction between the language and <em id="-rpkb1i_10">BaseLanguage</em> is possible.</p><p id="-rpkb1i_11">The expression language supports six types, organized by subtyping rules into two branches:</p><ol class="list _decimal" id="-rpkb1i_12" type="1"><li class="list__item" id="-rpkb1i_13"><p>Element -&gt; Number -&gt; Float -&gt; Long -&gt; Int</p></li><li class="list__item" id="-rpkb1i_14"><p>Element -&gt; Bool</p></li></ol></section></section><section class="chapter"><h2 id="inspectingthetypes" data-toc="inspectingthetypes">Inspecting the types</h2><p id="-rpkb1i_15">If you open the <em id="-rpkb1i_16">Simple</em> example class, you can place the caret to any part of the expression or select a valid expression block. As soon as you press <kbd id="-rpkb1i_17" data-key="jetbrains.mps.lang.typesystem.pluginSolution.plugin.ShowNodeType_Action">Ctrl+Shift+P</kbd>, you'll see the type of the selected node in a pop-up dialog. As an alternative path, you can right-click any node and select <em id="-rpkb1i_18">Language Debug | Show Type</em> in the context menu.</p><figure id="-rpkb1i_19"><img alt="TT2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/TT2.png" title="TT2.png" width="455" height="346"></figure><figure id="-rpkb1i_20"><img alt="TT3.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/TT3.png" title="TT3.png" width="456" height="344"></figure><p id="-rpkb1i_21">The <em id="-rpkb1i_22">Main</em>&nbsp;sample class will give you a more involved example showing how <b id="-rpkb1i_23">Type-inference</b> correctly propagates the suitable type to variables:</p><figure id="-rpkb1i_24"><img alt="tt4.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/tt4.png" title="tt4.png" width="613" height="399"></figure><p id="-rpkb1i_25">Just check the calculated types for yourself.</p></section><section class="chapter"><h2 id="typeerrors" data-toc="typeerrors">Type errors</h2><p id="-rpkb1i_26">The <em id="-rpkb1i_27">TypeError</em> sample class shows a simple example of a type error. Just uncomment the code <kbd id="-rpkb1i_28" data-key="jetbrains.mps.ide.editor.actions.Comment_Action">Ctrl+/</kbd> and check the reported error:</p><figure id="-rpkb1i_29"><img alt="tt9.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/tt9.png" title="tt9.png" width="363" height="70"></figure><p id="-rpkb1i_30">Since this variable declaration declares its type explicitly to be an <em id="-rpkb1i_31">Int</em>, while the initializer is of type <em id="-rpkb1i_32">Float</em>, the type-system reports an error. You may check the status bar at the bottom or hover over the incorrect piece of code.</p></section><section class="chapter"><h2 id="type-systemtrace" data-toc="type-systemtrace">Type-system Trace</h2><p id="-rpkb1i_33">When you press <kbd id="-rpkb1i_34" data-key="jetbrains.mps.ide.devkit.actions.ShowTypeSystemTrace_Action">Ctrl+Shift+X</kbd> or navigate through the pop-up menu, you get the <em id="-rpkb1i_35">Type-system Trace</em> panel displayed on the right hand-side.</p><figure id="-rpkb1i_36"><img alt="TT6.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/TT6.png" title="TT6.png" width="2322" height="1452"></figure><p id="-rpkb1i_37">The <em id="-rpkb1i_38">Trace</em> shows in <em id="-rpkb1i_39">Panel 2</em> all steps (i.e. type system rules) that the type-system engine executed. The steps are ordered top-to-bottom in the order in which they were performed. When you have <em id="-rpkb1i_40">Button 1</em> selected, the <em id="-rpkb1i_41">Panel 2</em> highlights the steps that directly or indirectly influence the type of the node selected in the editor (<em id="-rpkb1i_42">Panel 1</em>). <em id="-rpkb1i_43">Panel 3</em> details the step selected in <em id="-rpkb1i_44">Panel 2</em> - it describes what changes have been made to the type-system engine's state in the step. The actual state of the engine's working memory is displayed in <em id="-rpkb1i_45">Panel 4</em>.</p></section><section class="chapter"><h2 id="step-by-stepdebugging" data-toc="step-by-stepdebugging">Step-by-step debugging</h2><p id="-rpkb1i_46">The <em id="-rpkb1i_47">Simple</em> sample class is probably the easiest one to start experimenting with. The types get resolved in six steps, following the typesystem rules specified in the language. <kbd id="-rpkb1i_48" data-key="jetbrains.mps.ide.actions.GoToNode_Action">F3</kbd> (Go to Source Node) will navigate you to the node, which is being affected by the current rule.</p><figure id="-rpkb1i_49"><img alt="tt7.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/tt7.png" title="tt7.png" width="1646" height="522"></figure><ol class="list _decimal" id="-rpkb1i_50" type="1"><li class="list__item" id="-rpkb1i_51"><p>The type of a variable declaration has to be a super-type of the type of the initializer. The <em id="-rpkb1i_52">aValue</em> variable is assigned the <em id="-rpkb1i_53">a</em> type-system variable, the initializer expression is assigned the <em id="-rpkb1i_54">b</em>&nbsp;type-system variable and <em id="-rpkb1i_55">a&gt;=b</em>&nbsp;(b sub-type or equal type to a) is added into the working memory.</p></li><li class="list__item" id="-rpkb1i_56"><p>Following the type-system rule for Arithmetic Expressions, <em id="-rpkb1i_57">b</em>&nbsp;has to be a sub-type of <em id="-rpkb1i_58">Number</em>, the value <em id="-rpkb1i_59">10</em>&nbsp;is assigned the <em id="-rpkb1i_60">c</em>&nbsp;variable, <em id="-rpkb1i_61">1.3F</em>&nbsp;is assigned the <em id="-rpkb1i_62">d</em>&nbsp;variable and a <em id="-rpkb1i_63">when-concrete</em>&nbsp;handler is added to wait for <em id="-rpkb1i_64">c</em>&nbsp;to be calculated.</p></li><li class="list__item" id="-rpkb1i_65"><p>Following the rules for float constants <em id="-rpkb1i_66">d</em>&nbsp;is solved as <em id="-rpkb1i_67">Float</em>.</p></li><li class="list__item" id="-rpkb1i_68"><p>Following the rules for integer constants <em id="-rpkb1i_69">c</em>&nbsp;is solved as <em id="-rpkb1i_70">Int</em>. This triggers the <em id="-rpkb1i_71">when-concrete</em>&nbsp;handler registered in step 2 and registered another <em id="-rpkb1i_72">when-concrete</em>&nbsp;handler to wait for&nbsp;<em id="-rpkb1i_73">d</em>. Since <em id="-rpkb1i_74">d</em>&nbsp;has already been resolved to <em id="-rpkb1i_75">Float</em>, the handler triggered and resolves&nbsp;<em id="-rpkb1i_76">b</em> (the whole arithmetic expression) as <em id="-rpkb1i_77">Float</em>. This also solves the earlier equation (step 2) that <em id="-rpkb1i_78">b&lt;=Number</em>.</p></li><li class="list__item" id="-rpkb1i_79"><p>Now <em id="-rpkb1i_80">a</em>&nbsp;can be resolved as <em id="-rpkb1i_81">Float</em>, which also solves the step 1 equation that <em id="-rpkb1i_82">a&gt;=b</em>.</p></li></ol></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="using-typesystem.html" class="navigation-links__prev">Using_typesystem</a><a href="mps-intentions.html" class="navigation-links__next">Intentions</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>