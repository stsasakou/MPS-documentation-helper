<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/scopes.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:22.108058777"><meta name="build-number" content="170"><title>Scopes | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"twoways","level":0,"title":"Two ways","anchor":"#twoways"},{"id":"inheritedscopes","level":0,"title":"Inherited scopes","anchor":"#inheritedscopes"},{"id":"usingreferencescope","level":0,"title":"Using reference scope","anchor":"#usingreferencescope"}]</script><script type="application/json" id="topic-shortcuts">{"jetbrains.mps.ide.editor.actions.AddModelImportByRoot_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Control","char-R"]}],"platform":"MAC"}},"jetbrains.mps.ui.usage.tree.reveal-in-project":{"Windows":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Alt","key-F1"]}],"platform":"MAC"}}}</script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Scopes | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/scopes.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Scopes | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/scopes.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/scopes.html",
    "name": "Scopes | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="scopes" data-main-title="Scopes" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///mps-tutorials.topic|Tutorials"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="scopes" id="scopes.topic">Scopes</h1><p id="-ceq69p_1">We are going to look at two ways to define scopes for custom language elements - the <em id="-ceq69p_2">inherited (hierarchical)</em> and the <em id="-ceq69p_3">referential</em> approaches. We chose the <a href="https://www.jetbrains.com/help/mps/2019.1/mps-calculator-language-tutorial.html" id="-ceq69p_4" data-external="true" rel="noopener noreferrer">Calculator tutorial</a> language as a testbed for our experiments. You can find the <em id="-ceq69p_5">calculator-tutorial</em> project included in the set of sample projects that comes with the MPS distribution.</p><section class="chapter"><h2 id="twoways" data-toc="twoways">Two ways</h2><p id="-ceq69p_6">All references need to know the set of allowed targets. This enables MPS to populate the completion menu whenever the user is about to supply a value for the reference. Existing references can be validated against that set and marked as invalid, if they refer to elements out of the scope. By default, when no scoping is defined for a reference, all targets in the current model as well as in the imported models, are in scope and thus available for the reference.</p><p id="-ceq69p_7">MPS offers two ways to define scopes:</p><ul class="list _bullet" id="-ceq69p_8"><li class="list__item" id="-ceq69p_9"><p>Inherited scopes</p></li><li class="list__item" id="-ceq69p_10"><p>Reference scopes</p></li></ul><p id="-ceq69p_11">Reference scope offers lower ceremony, while Inherited scopes allow the scope to be built gradually following the hierarchy of nodes in the model.</p></section><section class="chapter"><h2 id="inheritedscopes" data-toc="inheritedscopes">Inherited scopes</h2><p id="-ceq69p_12">We will describe the new hierarchical (<em id="-ceq69p_13">inherited</em>) mechanism of scope resolution first. This mechanism delegates scope resolution to the ancestors, who implement <em id="-ceq69p_14">ScopeProvider</em>.</p><ol class="list _decimal" id="-ceq69p_15" type="1"><li class="list__item" id="-ceq69p_16"><p>MPS starts looking for the closest ancestor to the reference node that implements <em id="-ceq69p_17">ScopeProvider</em>&nbsp;and who can provide scope for the current kind.</p></li><li class="list__item" id="-ceq69p_18"><p>If the <em id="-ceq69p_19">ScopeProvider</em>&nbsp;returns <em id="-ceq69p_20">null</em>, MPS continues searching for more distant ancestors.</p></li><li class="list__item" id="-ceq69p_21"><p>Each <em id="-ceq69p_22">ScopeProvider</em>&nbsp;can&nbsp; </p><ul class="list _bullet" id="-ceq69p_23"><li class="list__item" id="-ceq69p_24"><p>build and return a <em id="-ceq69p_25">Scope</em>&nbsp;implementation (more on these later)</p></li><li class="list__item" id="-ceq69p_26"><p>delegate to the&nbsp;<b id="-ceq69p_27">parent scope</b></p></li><li class="list__item" id="-ceq69p_28"><p>add its own elements to the <b id="-ceq69p_29">parent scope</b></p></li><li class="list__item" id="-ceq69p_30"><p>hide elements from <b id="-ceq69p_31">parent scope</b>&nbsp;(more on how to work with scopes will be discussed later)</p></li></ul></li></ol><p id="-ceq69p_32">Call to obtain the <b id="-ceq69p_33">parent scope</b> must be made explicitly from within a <em id="-ceq69p_34">ScopeProvider</em>.</p><p id="-ceq69p_35">Our <em id="-ceq69p_36">InputFieldReference</em> thus searches for <em id="-ceq69p_37">InputField</em> nodes and relies on its ancestors to build a list of those.</p><figure id="-ceq69p_38"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Sc1.png" class="lightbox"><img alt="Sc1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Sc1.png" title="Sc1.png" width="500" height="413"></a></figure><figure id="-ceq69p_39"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Sc2.png" class="lightbox"><img alt="Sc2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Sc2.png" title="Sc2.png" width="300" height="124"></a></figure><p id="-ceq69p_40">Once we have specified that the scope for <em id="-ceq69p_41">InputFieldReference</em> when searching for an <em id="-ceq69p_42">InputField</em> is <em id="-ceq69p_43">inherited</em>, we must indicate that <em id="-ceq69p_44">Calculator</em> is a <em id="-ceq69p_45">ScopeProvider</em>. This ensures that <em id="-ceq69p_46">Calculator</em> will have say in building the scope for all <em id="-ceq69p_47">InputFieldReferences</em> that are placed as its descendants.</p><p id="-ceq69p_48"><b id="-ceq69p_49">Now, go to structure of <em id="-ceq69p_50">Calculator</em> and make sure in implements the <em id="-ceq69p_51">ScopeProvider</em> concept interface concept.</b></p><figure id="-ceq69p_52"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Sc3.png" class="lightbox"><img alt="Sc3.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Sc3.png" title="Sc3.png" width="500" height="363"></a></figure><p id="-ceq69p_53">The <em id="-ceq69p_54">Calculator</em> in our case should return a list of all its <em id="-ceq69p_55">InputFields</em> whenever queried for scope of <em id="-ceq69p_56">InputField</em>. So in the <em id="-ceq69p_57">Behavior</em> aspect of <em id="-ceq69p_58">Calculator</em> we override (<em id="-ceq69p_59">Control + O</em>) the <em id="-ceq69p_60">getScope()</em> method:</p><figure id="-ceq69p_61"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Co1111.png" class="lightbox"><img alt="Co1111.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Co1111.png" title="Co1111.png" width="300" height="465"></a></figure><p id="-ceq69p_62">If <em id="-ceq69p_63">Scope</em> remains unresolved, we need to import the model (<em id="-ceq69p_64">Control + R</em>) that contains it (<em id="-ceq69p_65">jetbrains.mps.scope</em>):</p><figure id="-ceq69p_66"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Sc5.png" class="lightbox"><img alt="Sc5.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Sc5.png" title="Sc5.png" width="900" height="478"></a></figure><p id="-ceq69p_67">The&nbsp;<em id="-ceq69p_68">getScope()</em> method takes two parameters:</p><ul class="list _bullet" id="-ceq69p_69"><li class="list__item" id="-ceq69p_70"><p><b id="-ceq69p_71">kind</b> - the concept of the possible targets for the reference</p></li><li class="list__item" id="-ceq69p_72"><p><b id="-ceq69p_73">child</b> - the child node of the current (this) ScopeProvider, from which the request came, so the actual reference is among descendants of the&nbsp;<b id="-ceq69p_74">child</b> node</p></li></ul><p id="-ceq69p_75">We also need <em id="-ceq69p_76">BaseLanguage</em> since we need to encode some functionality. The <em id="-ceq69p_77">jetbrains.mps.lang.</em> <em id="-ceq69p_78">smodel</em> language needs to be imported in order to query nodes. These languages should have been imported for you automatically. If not, you can import them using the <em id="-ceq69p_79">Control + L</em> shortcut.</p><p id="-ceq69p_80">Now we can complete the scope definition code, which, in essence, returns all input fields from within the calculator (for <b id="-ceq69p_81">parent scope</b> to be available, import the <em id="-ceq69p_82">jetbrains.mps.lang.Scopes</em> language):</p><figure id="-ceq69p_83"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Sc8.png" class="lightbox"><img alt="Sc8.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Sc8.png" title="Sc8.png" width="900" height="335"></a></figure><p id="-ceq69p_84"> <em id="-ceq69p_85">A quick tip: Notice the use of SimpleRoleScope class. It is one of several helper classes that can help you build your own custom scopes. Check them out by Navigating to SimpleRoleScope (Control/Cmd + N) and opening up the containing package structure <kbd id="-ceq69p_86" data-key="jetbrains.mps.ui.usage.tree.reveal-in-project">Alt+F1</kbd>.</em></p><section class="chapter"><h3 id="scopehelperimplementations" data-toc="scopehelperimplementations">Scope helper implementations</h3><p id="-ceq69p_87">MPS comes with several helper <em id="-ceq69p_88">Scope</em>&nbsp;implementations that cover many possible scenarios and you can use them to ease the task of defining a scope:</p><ul class="list _bullet" id="-ceq69p_89"><li class="list__item" id="-ceq69p_90"><p><em id="-ceq69p_91">ListScope</em> - represents the nodes passed into its constructor</p></li><li class="list__item" id="-ceq69p_92"><p><em id="-ceq69p_93">DelegatingScope</em> - delegates to a Scope instance passed into its constructor, typically to be extended by scopes that need to add functionality around an existing scope, e.g. LazyScope</p></li><li class="list__item" id="-ceq69p_94"><p><em id="-ceq69p_95">CompositeScope</em> - delegates to a group of (wrapped) Scope instances</p></li><li class="list__item" id="-ceq69p_96"><p><em id="-ceq69p_97">FilteringScope</em> - delegates to a single Scope instance, filtering its nodes with a predicate (the isExcluded method)</p></li><li class="list__item" id="-ceq69p_98"><p><em id="-ceq69p_99">FilteringByNameScope</em> - delegates to a single Scope instance, filtering its nodes by a name blacklist, which it gets as a constructor parameter</p></li><li class="list__item" id="-ceq69p_100"><p><em id="-ceq69p_101">EmptyScope</em> - scope with no nodes</p></li><li class="list__item" id="-ceq69p_102"><p><em id="-ceq69p_103">SimpleRoleScope</em> - a scope providing all child nodes of a node, which match a given role</p></li><li class="list__item" id="-ceq69p_104"><p><em id="-ceq69p_105">ModelsScope</em> - a scope containing all nodes of a given concept contained in the supplied set of models</p></li><li class="list__item" id="-ceq69p_106"><p><em id="-ceq69p_107">ModelPlusImportedScope</em> - like ModelsScope, but includes all models imported by the given model</p></li></ul><p id="-ceq69p_108">For example, the&nbsp;<em id="-ceq69p_109">getScope()</em> method could be rewritten using&nbsp;<em id="-ceq69p_110">ListScope</em> this way:</p><figure id="-ceq69p_111"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Scopex1001.png" class="lightbox"><img alt="Scopex1001.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Scopex1001.png" title="Scopex1001.png" width="500" height="371"></a></figure></section><section class="chapter"><h3 id="variablereference" data-toc="variablereference">VariableReference</h3><p id="-ceq69p_112">A slightly more advanced example can be found in <em id="-ceq69p_113">BaseLanguage. VariableReference</em>&nbsp;uses <em id="-ceq69p_114">inherited scope</em>&nbsp;for its <em id="-ceq69p_115">variableDeclaration</em>&nbsp;reference.</p><figure id="-ceq69p_116"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/scp1.png" class="lightbox"><img alt="scp1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/scp1.png" title="scp1.png" width="500" height="472"></a></figure><p id="-ceq69p_117">Concepts such as <em id="-ceq69p_118">ForStatement</em>, <em id="-ceq69p_119">LocalVariableDeclaration</em>, <em id="-ceq69p_120">BaseMethodDeclaration</em>, <em id="-ceq69p_121">Classifier</em>&nbsp;as well as some others add variable declarations to the scope and thus implement <em id="-ceq69p_122">ScopeProvider</em>.</p><figure id="-ceq69p_123"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/scp2.png" class="lightbox"><img alt="scp2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/scp2.png" title="scp2.png" width="900" height="595"></a></figure><p id="-ceq69p_124">For example, <em id="-ceq69p_125">ForStatement</em>&nbsp;uses the <em id="-ceq69p_126">Scopes.forVariables</em>&nbsp;helper function to build a scope that enriches the <b id="-ceq69p_127">parent scope</b>&nbsp;with all variables declared in the for loop, potentially hiding variables of the same name in the <b id="-ceq69p_128">parent scope</b>. The <b id="-ceq69p_129">come from</b>&nbsp;expression detects whether the reference that we're currently resolving the scope for lies in the given&nbsp;part of the sub-tree.</p><aside class="prompt" data-type="tip" data-title="" id="-ceq69p_130"><ul class="list _bullet" id="-ceq69p_131"><li class="list__item" id="-ceq69p_132"><p>The <b id="-ceq69p_133">parent scope</b> construct will create an instance of <em id="-ceq69p_134">LazyParentScope()</em> and effectively delegate to an ancestor in the model, which implements <em id="-ceq69p_135">ScopeProvider</em>, to supply the scope.</p></li><li class="list__item" id="-ceq69p_136"><p>The <b id="-ceq69p_137">come from</b> construct will delegate to <em id="-ceq69p_138">ScopeUtils.comeFrom()</em>&nbsp;in order to check, whether the scope is being calculated for a direct child of the current node in the given role.</p></li><li class="list__item" id="-ceq69p_139"><p>The <b id="-ceq69p_140">composite with</b> construct (used as <em id="-ceq69p_141">composite &lt;expr&gt; with parent scope</em>) will create a combined scope of the supplied scope expression and the parent scope.</p></li><li class="list__item" id="-ceq69p_142"><p>MPS offers a mechanism for sharing evaluated scope pieces during a single model read. Several new expressions in <em id="-ceq69p_143">j.m.lang.constraints</em> serve this purpose. <b id="-ceq69p_144">for model [ factory, key]</b>, <b id="-ceq69p_145">visible roots [concept]</b>, and <b id="-ceq69p_146">visible nodes [concept]</b> (the <em id="-ceq69p_147">ModelScopeEval</em>, <em id="-ceq69p_148">RootScopeEval</em> and <em id="-ceq69p_149">NodeScopeEval</em> concepts, respectively). The new expressions are used to save the scope of a model to a cache, so it only needs to be recorded and calculated once.</p></li></ul></aside></section></section><section class="chapter"><h2 id="usingreferencescope" data-toc="usingreferencescope">Using reference scope</h2><p id="-ceq69p_150">Scopes can alternatively be implemented in a faster but less scalable way - using the reference scope:</p><figure id="-ceq69p_151"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/rsc1.png" class="lightbox"><img alt="rsc1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/rsc1.png" title="rsc1.png" width="900" height="497"></a></figure><p id="-ceq69p_152">Instead of delegating to the ancestors of type <em id="-ceq69p_153">ScopeProvider</em> to do the resolution, you can insert the scope resolution code right into the constraint definition.</p><aside class="prompt" data-type="tip" data-title="" id="-ceq69p_154"><p id="-ceq69p_155">You may need to import <kbd id="-ceq69p_156" data-key="jetbrains.mps.ide.editor.actions.AddModelImportByRoot_Action">Ctrl+R</kbd> the <em id="-ceq69p_157">jetbrains.mps.scope</em> model in order to be able to use <em id="-ceq69p_158">SimpleRoleScope</em>.</p></aside><figure id="-ceq69p_159"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/rsc2.png" class="lightbox"><img alt="rsc2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/rsc2.png" title="rsc2.png" width="900" height="150"></a></figure><p id="-ceq69p_160">Instead of the code that originally was inside the <em id="-ceq69p_161">Calculator's getScope()</em> method, it is now <em id="-ceq69p_162">InputFieldReference</em> itself that defines the scope. The function for reference scope is supposed to return a <em id="-ceq69p_163">Scope</em> instance, just like the <em id="-ceq69p_164">ScopeProvider.getScope()</em> method.&nbsp;<em id="-ceq69p_165">Scope</em>&nbsp;is essentially a list of potential reference targets together with logic to resolve these targets with textual values.</p><p id="-ceq69p_166">To remind you, there are several predefined <em id="-ceq69p_167">Scope</em>&nbsp;implementations and related helper factory methods ready for you to use:</p><ul class="list _bullet" id="-ceq69p_168"><li class="list__item" id="-ceq69p_169"><p><em id="-ceq69p_170">SimpleRoleScope</em>&nbsp;- simply adds all nodes connected to the supplied node and being in the specified role.</p></li><li class="list__item" id="-ceq69p_171"><p><em id="-ceq69p_172">ListScope</em>&nbsp;- builds a scope implementation arround a list (sequence) of nodes provided in the constructor.</p></li><li class="list__item" id="-ceq69p_173"><p><em id="-ceq69p_174">ModelPlusImportedScope</em>-&nbsp;provides reference targets from imported&nbsp;models. Allows the user add targets to scope by <em id="-ceq69p_175">ctrl + R / cmd + R</em>&nbsp;(import containing model).</p></li><li class="list__item" id="-ceq69p_176"><p><em id="-ceq69p_177">FilteringScope</em>&nbsp;- allow you to&nbsp;exclude some elements from another&nbsp;scope. Subclasses of FilteringScope with override the isExcluded() method.</p></li><li class="list__item" id="-ceq69p_178"><p><em id="-ceq69p_179">DelegatingScope</em>&nbsp;- delegates to another scope. Meant to be overridden to customize the behavior of the original scope.</p></li></ul><p id="-ceq69p_180">You may also look around yourself in the <em id="-ceq69p_181">scope</em>&nbsp;model:</p><figure id="-ceq69p_182"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/scp3.png" class="lightbox"><img alt="scp3.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/scp3.png" title="scp3.png" width="300" height="482"></a></figure><section class="chapter"><h3 id="cachinglanguageconstructs" data-toc="cachinglanguageconstructs">Caching language constructs</h3><p id="-ceq69p_183">Several expressions are available for reference scope functions that calculate a scope once and then cache it under a provided key. When a model asks for such a cached scope, it is only calculated once and cached for subsequent requests.</p><ul class="list _bullet" id="-ceq69p_184"><li class="list__item" id="-ceq69p_185"><p><b id="-ceq69p_186">for model [factory, key]</b> - the "factory" function calculates a scope for a provided model, the scope is then cached under "key".</p></li><li class="list__item" id="-ceq69p_187"><p><b id="-ceq69p_188">visible roots [ concept declaration ]</b> - creates a scope for all roots of the given concept visible from the current model and caches it</p></li><li class="list__item" id="-ceq69p_189"><p><b id="-ceq69p_190">visible nodes [ concept declaration ]</b> - creates a scope for all nodes of the given concept visible from the current model and caches it</p></li></ul></section></section><div class="last-modified">Last modified: 09 May 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="mps-calculator-language-tutorial.html" class="navigation-links__prev">MPS Calculator Language Tutorial</a><a href="description-comments.html" class="navigation-links__next">Description comments</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>