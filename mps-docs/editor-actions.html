<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/editor-actions.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:21.22147309"><meta name="build-number" content="170"><title>Editor Actions | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"node_factories","level":0,"title":"Node Factories","anchor":"#node_factories"},{"id":"pastewrappers","level":0,"title":"Paste wrappers","anchor":"#pastewrappers"},{"id":"copy-pastehandlers","level":0,"title":"Copy-paste handlers","anchor":"#copy-pastehandlers"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Editor Actions | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/editor-actions.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Editor Actions | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/editor-actions.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/editor-actions.html",
    "name": "Editor Actions | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="editor-actions" data-main-title="Editor Actions" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///language-definition.topic|Language-definition///editor.topic|Editor"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="editor-actions" id="editor-actions.topic">Editor Actions</h1><p id="-87bzjr_1">MPS editor has quite sensible defaults in completion actions, node creation policy. But when you want to customize them, you have to work with the actions language.</p><section class="chapter"><h2 id="node_factories" data-toc="node_factories">Node Factories</h2><p id="-87bzjr_2">When a node is replaced with another one, it may be useful to parametrize the process of creation of the replacing node with values held by the node that is being replaced, or perhaps also to reflect the future position of the replacing node in the model.&nbsp;<b id="-87bzjr_3">Node Factories</b> give you exactly that. You write a set of handlers that get invoked whenever a new node needs to be created in a <b id="-87bzjr_4">substitution action</b> or through one of the&nbsp;<b id="-87bzjr_5">new initialized node&lt;&gt;</b> ,&nbsp;<b id="-87bzjr_6">set new initialized node&lt;&gt;</b> ,&nbsp;<b id="-87bzjr_7">add new initialized node&lt;&gt;</b> ,&nbsp;<b id="-87bzjr_8">replace with new initialized node&lt;&gt;</b> and <b id="-87bzjr_9">new initialized instance&lt;&gt;</b> methods.</p><p id="-87bzjr_10">In brief, <b id="-87bzjr_11">Node Factories</b> allow you to customize instantiation of new nodes. In order to create node factory, you first have to create a new <b id="-87bzjr_12">Node Factories</b> root node. Inside of this root you can create node factories for concepts. Each node factory consists of node creation block which has the following parameters: newNode (the created node), sampleNode (the currently substituted node; can be null), enclosing node (a node which will be the parent of newNode in the model), and a model. The node factory handler is invoked <b id="-87bzjr_13">before the new node gets inserted into the model</b>.</p><p id="-87bzjr_14">You can leverage the concept inheritance hierarchy in&nbsp;<b id="-87bzjr_15">Node Factories</b> to reduce repetition.</p><figure id="-87bzjr_16"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Ac6.png" class="lightbox"><img alt="Ac6.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Ac6.png" title="Ac6.png" width="500" height="312"></a></figure><aside class="prompt" data-type="tip" data-title="" id="-87bzjr_17"><p id="-87bzjr_18">To leverage node factories when creating nodes from code, use the "<b id="-87bzjr_19">initialized</b>" variants of "<em id="-87bzjr_20">replace with ...</em>"&nbsp;<em id="-87bzjr_21">smodel</em>&nbsp;language constructs. For more information, refer to&nbsp;<a href="smodel-language-modification-operations.html" id="-87bzjr_22">SModel language Modification operations</a>&nbsp;.</p><p id="-87bzjr_23">A node factory will be called, whenever:</p><ul class="list _bullet" id="-87bzjr_24"><li class="list__item" id="-87bzjr_25"><p>using the code completion menu to create such a node or to replace another one</p></li><li class="list__item" id="-87bzjr_26"><p>calling&nbsp;<b id="-87bzjr_27">add new initialized</b> ,&nbsp;<b id="-87bzjr_28">set new initialized</b> ,&nbsp;<b id="-87bzjr_29">replace new initialized</b>, etc.</p></li><li class="list__item" id="-87bzjr_30"><p>creating such node as a root from the context menu in the project view.</p></li></ul><p id="-87bzjr_31">A node factory is</p><ul class="list _bullet" id="-87bzjr_32"><li class="list__item" id="-87bzjr_33"><p><b id="-87bzjr_34">not</b>&nbsp;called when using quotations&nbsp;<code class="code" id="-87bzjr_35">&lt;Car()&gt;</code></p></li><li class="list__item" id="-87bzjr_36"><p><b id="-87bzjr_37">not</b>&nbsp;called when just showing it in the editor</p></li><li class="list__item" id="-87bzjr_38"><p><b id="-87bzjr_39">not</b>&nbsp;called when adding it as a root with&nbsp;<code class="code" id="-87bzjr_40">model.add root(&lt;Car()&gt;)</code></p></li><li class="list__item" id="-87bzjr_41"><p><b id="-87bzjr_42">not</b>&nbsp;called when adding it as a root with&nbsp;<code class="code" id="-87bzjr_43">model.add new root(Car)</code></p></li></ul></aside></section><section class="chapter"><h2 id="pastewrappers" data-toc="pastewrappers">Paste wrappers</h2><p id="-87bzjr_44">These allow you to customize pasting of nodes into other contexts. For example, if you copy a&nbsp;<em id="-87bzjr_45">LocalVariableDeclaration</em> in&nbsp;<em id="-87bzjr_46">BaseLanguage</em> and paste it into a&nbsp;<em id="-87bzjr_47">ClassConcept</em> to make it a field of the class, a simple transformation must be triggered that will create a new&nbsp;<em id="-87bzjr_48">FieldDeclaration</em> out of the Local<em id="-87bzjr_49">VariableDeclaration</em>.</p><figure id="-87bzjr_50"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Ac10.png" class="lightbox"><img alt="Ac10.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Ac10.png" title="Ac10.png" width="500" height="270"></a></figure></section><section class="chapter"><h2 id="copy-pastehandlers" data-toc="copy-pastehandlers">Copy-paste handlers</h2><p id="-87bzjr_51">These give you the possibility to customize the part of the models that is being copied to or pasted from the clipboard.</p><figure id="-87bzjr_52"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Ac11.png" class="lightbox"><img alt="Ac11.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Ac11.png" title="Ac11.png" width="500" height="69"></a></figure><p id="-87bzjr_53">The <em id="-87bzjr_54">copy</em> parameter in a <b id="-87bzjr_55">copy pre processor</b> block gets contains an exact deep copy of the&nbsp;<em id="-87bzjr_56">original</em> parameter node. Unlike&nbsp;<em id="-87bzjr_57">original</em> ,&nbsp;<em id="-87bzjr_58">copy</em> is detached from the model and so has no parent node.</p><figure id="-87bzjr_59"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/Ac12.png" class="lightbox"><img alt="Ac12.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/Ac12.png" title="Ac12.png" width="500" height="80"></a></figure><p id="-87bzjr_60">The task for the&nbsp;<b id="-87bzjr_61">paste post processor</b> typically is to re-resolve references so that they point to declarations valid in the new context.</p></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="editor.html" class="navigation-links__prev">Editor</a><a href="transformation-menu-language.html" class="navigation-links__next">Transformation Menu Language</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>