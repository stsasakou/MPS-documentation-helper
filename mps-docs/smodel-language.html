<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/smodel-language.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:24.176308288"><meta name="build-number" content="170"><title>SModel language | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"treatmentofnullvalues","level":0,"title":"Treatment of null values","anchor":"#treatmentofnullvalues"},{"id":"operationparameters","level":0,"title":"Operation parameters","anchor":"#operationparameters"},{"id":"accesslanguage","level":0,"title":"Managing concurrent access","anchor":"#accesslanguage"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="SModel language | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/smodel-language.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="SModel language | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/smodel-language.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/smodel-language.html",
    "name": "SModel language | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="smodel-language" data-main-title="SModel language" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///platform-languages.topic|Platform-languages"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="smodel-language" id="smodel-language.topic">SModel language</h1><p id="-n9fccq_1">The purpose of SModel language is to query and modify MPS models. It allows you to investigate nodes, attributes, properties, links and many other essential qualities of your models. The language is needed to encode several different aspects of your languages - actions, refactorings, generator, to name the most prominent ones. You typically use the <em id="-n9fccq_2">jetbrains.mps.lang.smodel</em> language in combination with <em id="-n9fccq_3">BaseLanguage</em>.</p><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_4"><p id="-n9fccq_5">MPS allows you to down-cast from the concepts of the&nbsp;<em id="-n9fccq_6">smodel</em>&nbsp;concepts to the underlying Java API (Open API), may you need more power when manipulating the model.&nbsp;For more information, refer to <a href="open-api-accessing-models-from-code.html" id="-n9fccq_7">Open API documentation</a>.</p></aside><section class="chapter"><h2 id="treatmentofnullvalues" data-toc="treatmentofnullvalues">Treatment of null values</h2><p id="-n9fccq_8">SModel language treats null values in a very safe manner. It is pretty common, in OO-languages, such as Java or C#, to have a lot of checks for null values in the form of <em id="-n9fccq_9">expr == null</em> and <em id="-n9fccq_10">expr != null</em> statements scattered across the code. These are necessary to prevent null pointer exceptions. However, they at the same time increase code clutter and often make the code more difficult to read. In order to alleviate this problem, MPS treats null values in a liberal way. For example, if you ask a <em id="-n9fccq_11">null node</em> for a property, you will get back a default&nbsp;value for the type of the property. If you ask a <em id="-n9fccq_12">null node</em> for its children list, you will get <em id="-n9fccq_13">empty list</em>, etc. If you call a behavior method on a null node, a null value is returned, provided the return type of the invoked method is a ClassifierType or a StringType. For a PrimitiveType, the default value of that type is returned. This should make your life as a language designer easier.</p></section><section class="chapter"><h2 id="operationparameters" data-toc="operationparameters">Operation parameters</h2><p id="-n9fccq_14">A lot of the operations in the SModel language accept parameters. The parameters can be specified once you open the parameter list by entering &lt; at the end of an operation. E.g. <em id="-n9fccq_15">myNode.ancestors&lt;concept = IfStatement, concept = ForStatement&gt;</em>.</p><p id="-n9fccq_16">The "+" symbol as a parameter to these operations means "include myself". That is, when the node, on which the operation is being invoked, matches the condition, "+" ensures that the node will also be included in the returned result - e.g.&nbsp;<em id="-n9fccq_17">myNode.ancestors&lt;concept = IfStatement, +&gt;</em> may return&nbsp;<em id="-n9fccq_18">myNode</em>, if it is an&nbsp;<em id="-n9fccq_19">IfStatement</em>.</p></section><section class="chapter"><h2 id="accesslanguage" data-toc="accesslanguage">Managing concurrent access</h2><p id="-n9fccq_20">The <em id="-n9fccq_21">jetbrains.mps.lang.access</em> language eases the use of the <a href="open-api-accessing-models-from-code.html" id="-n9fccq_22">model access API</a>, namely its <a href="open-api-accessing-models-from-code.html#concurrentaccess" id="-n9fccq_23">concurrent access</a> part. You can think of this language as a syntax sugar on top of the <b id="-n9fccq_24">model access API</b> and examples are provided of corresponding low-level code that accesses the API directly. <br> To access MPS models, appropriate lock must be obtained by the thread, otherwise the read or write operation will not be permitted. The <em id="-n9fccq_26">jetbrains.mps.lang.access</em> language must be imported for these statements to be available The language contains the following commands:</p><ul class="list _bullet" id="-n9fccq_27"><li class="list__item" id="-n9fccq_28"><p><em id="-n9fccq_29">write action with</em></p></li><li class="list__item" id="-n9fccq_30"><p><em id="-n9fccq_31">read action with</em></p></li><li class="list__item" id="-n9fccq_32"><p><em id="-n9fccq_33">command with</em></p></li><li class="list__item" id="-n9fccq_34"><p><em id="-n9fccq_35">execute command in EDT with</em></p></li><li class="list__item" id="-n9fccq_36"><p><em id="-n9fccq_37">execute in EDT with</em></p></li><li class="list__item" id="-n9fccq_38"><p><em id="-n9fccq_39">undo-transparent command with</em></p></li></ul><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_40"><p>They all require a single parameter of type SRepository. It can be obtained, for example, by calling <em id="-n9fccq_41">Project.getRepository()</em> or <em id="-n9fccq_42">EditorContext.getRepository()</em>.</p></aside><figure id="-n9fccq_43"><img alt="Example of obtaining a lock" src="https://resources.jetbrains.com/help/img/idea/2024.1/WriteRepo1.png" title="Example of obtaining a lock" width="500" height="119"></figure><p> Some kind of locks can only be obtained by EDT. The platform provides API to schedule a task to be executed in the context of EDT through the <em id="-n9fccq_44">ApplicationManager</em> class: </p><figure id="-n9fccq_45"><img alt="Example of scheduling a command on EDT" src="https://resources.jetbrains.com/help/img/idea/2024.1/WriteRepo2.png" title="Example of scheduling a command on EDT" width="500" height="128"></figure><div class="table-wrapper"><table class="no_header wide" id="-n9fccq_46"><tbody><tr id="-n9fccq_47"><td id="-n9fccq_48"><p><em id="-n9fccq_49">write action with</em></p></td><td id="-n9fccq_50"><p id="-n9fccq_51"><b id="-n9fccq_52">Synchronous model write:</b></p><p id="-n9fccq_53">Modifications to models can only be performed from within managed actions, which hold the appropriate write lock. The method obtains such a lock and executes the provided action. It should not be invoked from EDT (Event dispatching thread), otherwise, a UI freeze may occur. A lock cannot be upgraded. When owning the read lock, it is not allowed to ask for the write lock through this command.</p><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_54"><p>This is a shortcut for <em id="-n9fccq_55">SRepository.getModelAccess().runWriteAction(Runnable p1)</em>.</p></aside></td></tr><tr id="-n9fccq_56"><td id="-n9fccq_57"><p><em id="-n9fccq_58">read action with</em></p></td><td id="-n9fccq_59"><p id="-n9fccq_60"><b id="-n9fccq_61">Synchronous model read:</b></p><p id="-n9fccq_62">Querying properties of models can only be performed from within managed actions, which hold the appropriate read lock. The method obtains such a lock and executes the provided action.</p><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_63"><p>This is a shortcut for <em id="-n9fccq_64">SRepository.getModelAccess().runReadAction(Runnable p1)</em>.</p></aside></td></tr><tr id="-n9fccq_65"><td id="-n9fccq_66"><p><em id="-n9fccq_67">command with</em></p></td><td id="-n9fccq_68"><p id="-n9fccq_69"><b id="-n9fccq_70">Synchronous model command:</b></p><p id="-n9fccq_71">It represents a write action executed with respect to the platform undo mechanism. This method should be invoked from EDT thread only. Unlike execute command in EDT, this method executes synchronously.</p><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_72"><p>This is a shortcut for <em id="-n9fccq_73">SRepository.getModelAccess().executeCommand(Runnable p1)</em>.</p></aside></td></tr><tr id="-n9fccq_74"><td id="-n9fccq_75"><p><em id="-n9fccq_76">execute command in EDT with</em></p></td><td id="-n9fccq_77"><p id="-n9fccq_78"><b id="-n9fccq_79">Schedule command to run from EDT asynchronously:</b></p><p id="-n9fccq_80">It represents a write action executed with respect to the platform undo mechanism and runs asynchronously from EDT thread. This method may be invoked from any thread.</p><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_81"><p>This is a shortcut for <em id="-n9fccq_82">SRepository.getModelAccess().executeCommandInEDT(Runnable p1)</em>.</p></aside></td></tr><tr id="-n9fccq_83"><td id="-n9fccq_84"><p><em id="-n9fccq_85">execute in EDT with</em></p></td><td id="-n9fccq_86"><p id="-n9fccq_87"><b id="-n9fccq_88">Schedule asynchronous model read from EDT:</b></p><p id="-n9fccq_89">Querying properties of models can only be performed from within managed actions, which hold the appropriate read lock. The method obtains such a lock and executes the provided action asynchronously on the EDT UI thread. Inside the action, it is safe to touch any UI elements and perform other EDT-bound actions of the IntelliJ platform.</p><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_90"><p>This is a shortcut for <em id="-n9fccq_91">SRepository.getModelAccess().runReadInEDT(Runnable p1)</em>.</p></aside></td></tr><tr id="-n9fccq_92"><td id="-n9fccq_93"><p><em id="-n9fccq_94">undo-transparent command with</em></p></td><td id="-n9fccq_95"><p id="-n9fccq_96"><b id="-n9fccq_97">Undo-transparent command:</b></p><p id="-n9fccq_98">The executed code has model write access and is treated as a command. The only difference is that changes from the transparent action will be merged with that of the previous undoable command and so it will not be possible to undo this action separately.</p><aside class="prompt" data-type="tip" data-title="" id="-n9fccq_99"><p>This is a shortcut for <em id="-n9fccq_100">SRepository.getModelAccess().executeUndoTransparentCommand(Runnable p1)</em>.</p></aside></td></tr></tbody></table></div></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="xml-language.html" class="navigation-links__prev">XML language</a><a href="smodel-language-modification-operations.html" class="navigation-links__next">SModel language Modification operations</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>