<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/editor-language-generation-api.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:21.634819485"><meta name="build-number" content="170"><title>Editor language generation API | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"api:Â editorcellÂ contract","level":0,"title":"API:Â EditorCellÂ contract","anchor":"#api:Â editorcellÂ contract"},{"id":"api:editorcellfactoryÂ isnowavailableonlywithinÂ updatesession","level":0,"title":"API: EditorCellFactoryÂ is now available only withinÂ UpdateSession","anchor":"#api:editorcellfactoryÂ isnowavailableonlywithinÂ updatesession"},{"id":"languageruntime:Â abstracteditorbuilder","level":0,"title":"Language Runtime:Â AbstractEditorBuilder","anchor":"#languageruntime:Â abstracteditorbuilder"},{"id":"generator:Â editorbuilderÂ classes","level":0,"title":"Generator:Â EditorBuilderÂ classes","anchor":"#generator:Â editorbuilderÂ classes"},{"id":"contextualparametersavailableforcellbuilders","level":0,"title":"Contextual parameters available for cell builders","anchor":"#contextualparametersavailableforcellbuilders"},{"id":"cellfactorycontextclass","level":0,"title":"CellFactoryContextClass","anchor":"#cellfactorycontextclass"},{"id":"genericcellcreationcontext","level":0,"title":"GenericCellCreationContext","anchor":"#genericcellcreationcontext"},{"id":"newsignatureforÂ createcell()Â methods","level":0,"title":"New signature forÂ createCell()Â methods","anchor":"#newsignatureforÂ createcell()Â methods"},{"id":"automaticmigrationscriptfornewÂ createcell()Â methods","level":0,"title":"Automatic migration script for newÂ createCell()Â methods","anchor":"#automaticmigrationscriptfornewÂ createcell()Â methods"},{"id":"mappinglabels","level":0,"title":"Mapping labels","anchor":"#mappinglabels"},{"id":"celllayoutconstructorswitchintroduced","level":0,"title":"CellLayoutConstructor switch introduced","anchor":"#celllayoutconstructorswitchintroduced"},{"id":"newgeneratorforrefcellcellprovidersub-classes","level":0,"title":"New generator for RefCellCellProvider sub-classes","anchor":"#newgeneratorforrefcellcellprovidersub-classes"},{"id":"inlinecellproviderreplacedwitheditorbuildersub-class","level":0,"title":"InlineCellProvider replaced with EditorBuilder sub-class","anchor":"#inlinecellproviderreplacedwitheditorbuildersub-class"},{"id":"editorstylesgenerator","level":0,"title":"Editor Styles generator","anchor":"#editorstylesgenerator"},{"id":"styleclassitemÂ constraintsmodification","level":0,"title":"StyleClassItemÂ constraints modification","anchor":"#styleclassitemÂ constraintsmodification"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Editor language generation API | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/editor-language-generation-api.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Editor language generation API | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/editor-language-generation-api.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/editor-language-generation-api.html",
    "name": "Editor language generation API | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="editor-language-generation-api" data-main-title="Editor language generation API" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///language-definition.topic|Language-definition///editor.topic|Editor"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="editor-language-generation-api" id="editor-language-generation-api.topic">Editor language generation API</h1><p id="i223hna_1">The editor language is supposed to be extended by numerous MPS users, so we designed the generator for the Editor language for ease of use - straightforward templates, human-readable generated code&nbsp;and use of meta-information more at the generation-time than at run-time. If any of your languages extend the editor language in order to provide new cell types, this document is for you.</p><section class="chapter"><h2 id="api:&nbsp;editorcell&nbsp;contract" data-toc="api:&nbsp;editorcell&nbsp;contract">API:&nbsp;EditorCell&nbsp;contract</h2><p id="i223hna_2">The contract of&nbsp;<em id="i223hna_3">EditorCell.setBig()/.getBig()</em>&nbsp;methods was slightly changed. For more information, refer to javadoc.</p></section><section class="chapter"><h2 id="api:editorcellfactory&nbsp;isnowavailableonlywithin&nbsp;updatesession" data-toc="api:editorcellfactory&nbsp;isnowavailableonlywithin&nbsp;updatesession">API: EditorCellFactory&nbsp;is now available only within&nbsp;UpdateSession</h2><p id="i223hna_4">We made the&nbsp;<em id="i223hna_5">EditorCellFactory</em>&nbsp;instance controlled by the current&nbsp;<em id="i223hna_6">UpdateSession</em>. At the same time we put some caches inside the&nbsp;<em id="i223hna_7">EditorCellFactory</em>&nbsp;implementation, making the editor building process faster in some situations. The&nbsp;<em id="i223hna_8">EditorContext.getCellFactory()</em>&nbsp;method was deprecated and will be removed in the next release.</p></section><section class="chapter"><h2 id="languageruntime:&nbsp;abstracteditorbuilder" data-toc="languageruntime:&nbsp;abstracteditorbuilder">Language Runtime:&nbsp;AbstractEditorBuilder</h2><p id="i223hna_9"><em id="i223hna_10">AbstractEditorBuilder</em>&nbsp;runtime class was introduced and should be used as a common super-class of any classes containing cell factory methods. This class implements common utility methods and provides access to generic contextual parameters of editor cell creation process like:</p><ul class="list _bullet" id="i223hna_11"><li class="list__item" id="i223hna_12"><p>editorContext</p></li><li class="list__item" id="i223hna_13"><p>node</p></li><li class="list__item" id="i223hna_14"><p>CellFactory</p></li><li class="list__item" id="i223hna_15"><p>UpdateSession</p></li></ul><p id="i223hna_16"><em id="i223hna_17">AbstractEditorBuilder</em>&nbsp;is used to capture some context of cell creation process and execute consequent cell factory methods within this context.</p></section><section class="chapter"><h2 id="generator:&nbsp;editorbuilder&nbsp;classes" data-toc="generator:&nbsp;editorbuilder&nbsp;classes">Generator:&nbsp;EditorBuilder&nbsp;classes</h2><p id="i223hna_18">A separate sub-class of&nbsp;<em id="i223hna_19">AbstractEditorBuilder</em>&nbsp;class will be generated now as a root class for each of available editor declaration hierarchies:</p><ul class="list _bullet" id="i223hna_20"><li class="list__item" id="i223hna_21"><p><em id="i223hna_22">ConceptEditorDeclaration.cellModel</em></p></li><li class="list__item" id="i223hna_23"><p><em id="i223hna_24">ConceptEditorDeclaration.inspectedCellModel</em></p></li><li class="list__item" id="i223hna_25"><p><em id="i223hna_26">EditorComponentDeclaration</em></p></li><li class="list__item" id="i223hna_27"><p><em id="i223hna_28">InlineEditorComponent</em></p></li></ul><p id="i223hna_29">The MPS editor generator will continue creating classes, implementing&nbsp;<em id="i223hna_30">ConceptEditor</em>&nbsp;&amp;&nbsp;<em id="i223hna_31">ConceptEditorComponent</em>. These classes were used&nbsp;earlier as containers for cell&nbsp;factory methods. In the new version of MPS these classes are used as descriptors providing access to the contextual hints information &amp; instantiating actual&nbsp;<em id="i223hna_32">EditorBuilders</em>. Descriptor classes may be cached by the&nbsp;<em id="i223hna_33">EditorCellFactory</em>&nbsp;implementation.</p></section><section class="chapter"><h2 id="contextualparametersavailableforcellbuilders" data-toc="contextualparametersavailableforcellbuilders">Contextual parameters available for cell builders</h2><p id="i223hna_34">The code, generated as a part of&nbsp;<em id="i223hna_35">AbstractEditorBuilder</em>&nbsp;sub-classes may access contextual parameters by using existing methods of&nbsp;<em id="i223hna_36">AbstractEditorBuilder</em>&nbsp;class. In addition to that, all available meta-information is used to generate private fields with more specific types than those available in the method signatures of&nbsp;<em id="i223hna_37">AbstractEditorBuilder</em>. For now each sub-class of&nbsp;<em id="i223hna_38">AbstractEditorBuilder</em>&nbsp;will hold private&nbsp;<em id="i223hna_39">node&lt;TheConcept&gt;&nbsp;myNode</em>&nbsp;field, where&nbsp;<em id="i223hna_40">TheConcept</em>&nbsp;is the actual concept associated with this&nbsp;<em id="i223hna_41">AbstractEditorBuilder</em>. This means that any cell factory method may use such a private field in order to get typed access to the contextual node and directly access available properties, links and other information from the contextual node using s-model language.</p></section><section class="chapter"><h2 id="cellfactorycontextclass" data-toc="cellfactorycontextclass">CellFactoryContextClass</h2><p id="i223hna_42"><em id="i223hna_43">CellFactoryContextClass</em>&nbsp;is a handy utility class providing necessary context for templates, generating the code included into one of the generated&nbsp;<em id="i223hna_44">AbstractEditorBuilder</em>&nbsp;sub-classes. By using this class as a contextual class template authors will automatically obtain all available methods and fields, the code generation environment will be supported by MPS platform, and so it's not necessary to reconstruct it for each and every editor template anymore. At the same time,&nbsp;<em id="i223hna_45">CellFactoryContextClass</em>&nbsp;can be used as a marker interface highlighting templates, which will generate code for one of the&nbsp;<em id="i223hna_46">EditorBuilders</em>, simplifying the process of locating such code &amp; supporting it in the future.</p></section><section class="chapter"><h2 id="genericcellcreationcontext" data-toc="genericcellcreationcontext">GenericCellCreationContext</h2><p id="i223hna_47">The<em id="i223hna_48">GenericCellCreationContext</em>&nbsp;interface provides limited subset of contextual information, which is always available for the code called either as a part of&nbsp;<em id="i223hna_49">EditorBuilders</em>&nbsp;or from a separate class, executed as a part of cell creation (editor update) process. This interface should be used as a template context instead of&nbsp;<em id="i223hna_50">CellFactoryContextClass</em>&nbsp;in those cases, when template authors are going to reuse the same template across the&nbsp;<em id="i223hna_51">EditorBuilders</em>&nbsp;generation process and some other places. For example, query methods which may be generated either inside&nbsp;<em id="i223hna_52">EditorBuilders</em>&nbsp;or within some style class.</p></section><section class="chapter"><h2 id="newsignaturefor&nbsp;createcell()&nbsp;methods" data-toc="newsignaturefor&nbsp;createcell()&nbsp;methods">New signature for&nbsp;createCell()&nbsp;methods</h2><p id="i223hna_53">In the previous version of MPS, the cell factory methods were always generated with two additional parameters specifying the context of cell creation:&nbsp;<em id="i223hna_54">EditorContext</em>&nbsp;&amp;&nbsp;<em id="i223hna_55">node&lt;&gt;</em>. From now on it's not necessary to specify these parameters any more - the generated code can always access this information (as well as any other contextual info) by calling methods from the containing&nbsp;<em id="i223hna_56">EditorBuilder</em>&nbsp;class. The new editor generator will generate cell factory methods without any parameters.</p></section><section class="chapter"><h2 id="automaticmigrationscriptfornew&nbsp;createcell()&nbsp;methods" data-toc="automaticmigrationscriptfornew&nbsp;createcell()&nbsp;methods">Automatic migration script for new&nbsp;createCell()&nbsp;methods</h2><p id="i223hna_57">For compatibility with the existing generators, we provide a migration script patching available templates and introducing the new&nbsp;<em id="i223hna_58">createCell()</em>&nbsp;methods, which delegate to the old ones (with the two additional parameters) as a fallback. We recommend to execute this script first and then check all modifications and verify, if the modified generator still works correctly. The provided automatic migration supports only most frequent situations, so in some specific cases you may need to manually modify your generator in order to make it work again. The template, which generates the compatibility methods is called&nbsp;<em id="i223hna_59">template_cellFactoryCompatibility</em>. If you later modify your generator to generate directly the new&nbsp;<em id="i223hna_60">createCellMethods</em>, you should remove any calls to&nbsp;<em id="i223hna_61">template_cellFactoryCompatibility</em>. We do recommend to review all existing generators &amp; patch obsolete templates generating the legacy&nbsp;<em id="i223hna_62">createCell(...)</em>&nbsp;methods in the scope of the current MPS release - we are going to drop the compatibility template in the next version.</p></section><section class="chapter"><h2 id="mappinglabels" data-toc="mappinglabels">Mapping labels</h2><p id="i223hna_63">Several mapping labels were introduced into the Editor generator (<em id="i223hna_64">MAPPING_main</em>) and may be used to simplify code generation:</p><section class="chapter"><h3 id="cellfactory.class.concept" data-toc="cellfactory.class.concept">cellFactory.class.concept</h3><p id="i223hna_65"><em id="i223hna_66">cellFactory.class.concept : ConceptEditorDeclaration -&gt; ClassConcept</em></p><p id="i223hna_67">This label expose a java class, generated for the&nbsp;<em id="i223hna_68">EditorBuilder</em>&nbsp;of&nbsp;<em id="i223hna_69">ConceptEditorDeclaration.cellModel</em></p></section><section class="chapter"><h3 id="cellfactory.class.inspector" data-toc="cellfactory.class.inspector">cellFactory.class.inspector</h3><p id="i223hna_70"><em id="i223hna_71">cellFactory.class.inspector : ConceptEditorDeclaration -&gt; ClassConcept</em></p><p id="i223hna_72">This label exposes a java class, generated for the&nbsp;<em id="i223hna_73">EditorBuilder</em>&nbsp;of&nbsp;<em id="i223hna_74">ConceptEditorDeclaration.inspectedCellModel</em></p></section><section class="chapter"><h3 id="cellfactory.class.component" data-toc="cellfactory.class.component">cellFactory.class.component</h3><p id="i223hna_75"><em id="i223hna_76">cellFactory.class.component : EditorComponentDeclaration -&gt; ClassConcept</em></p><p id="i223hna_77">This label exposes a java class, generated for the&nbsp;<em id="i223hna_78">EditorBuilder</em>&nbsp;of&nbsp;<em id="i223hna_79">EditorComponentDeclaration</em></p></section><section class="chapter"><h3 id="cellfactory.constructor" data-toc="cellfactory.constructor">cellFactory.constructor</h3><p id="i223hna_80"><em id="i223hna_81">cellFactory.constructor : EditorCellModel -&gt; ConstructorDeclaration</em></p><p id="i223hna_82">Used to mark the constructor of the generated&nbsp;<em id="i223hna_83">EditorBuilder</em>&nbsp;class.</p></section><section class="chapter"><h3 id="cellfactory.factorymethod" data-toc="cellfactory.factorymethod">cellFactory.factoryMethod</h3><p id="i223hna_84"><em id="i223hna_85">cellFactory.factoryMethod : EditorCellModel -&gt; InstanceMethodDeclaration</em></p><p id="i223hna_86">The replacement for obsolete&nbsp;<em id="i223hna_87">cellFactoryMethod</em>&nbsp;label, containing the new&nbsp;<em id="i223hna_88">cellFactory</em>&nbsp;methods. This label should be used instead of&nbsp;<em id="i223hna_89">cellFactoryMethod</em>&nbsp;at the moment of modification of existing templates making them generating new&nbsp;<em id="i223hna_90">cellFactory</em>methods.</p></section><section class="chapter"><h3 id="generated.constructor" data-toc="generated.constructor">generated.constructor</h3><p id="i223hna_91"><em id="i223hna_92">generated.constructor : &lt;no input concept&gt; -&gt; ConstructorDeclaration</em></p><p id="i223hna_93">This label may be used together with existing&nbsp;<em id="i223hna_94">generatedClass</em>&nbsp;one to mark generated constructor instances. This label may be used to avoid the ugly code for locating first constructor instance inside&nbsp;<em id="i223hna_95">node&lt;ClassConcept&gt;</em>, returned from the&nbsp;<em id="i223hna_96">generatedClass</em>&nbsp;mapping.</p></section></section><section class="chapter"><h2 id="celllayoutconstructorswitchintroduced" data-toc="celllayoutconstructorswitchintroduced">CellLayoutConstructor switch introduced</h2><p id="i223hna_97">This template switch is used to instantiate proper cell layout while creating a collection cell. The previously used static&nbsp;<em id="i223hna_98">createxxx()</em>&nbsp;methods inside&nbsp;<em id="i223hna_99">EditorCell_Collection</em>&nbsp;class have been deprecated and will be removed.</p></section><section class="chapter"><h2 id="newgeneratorforrefcellcellprovidersub-classes" data-toc="newgeneratorforrefcellcellprovidersub-classes">New generator for RefCellCellProvider sub-classes</h2><p id="i223hna_100">The generator for&nbsp;<em id="i223hna_101">CellModel_RefCell</em>&nbsp;has been modified. The newly generated anonymous inner classes for&nbsp;<em id="i223hna_102">RefCellCellProvider</em>&nbsp;do not use the logic located inside&nbsp;<em id="i223hna_103">RefCellCellProvider.createRefCell()</em>&nbsp;runtime method. The meta-information, available at generation-time, are used in oder to create complete content of this method. If you do generate sub-classes of&nbsp;<em id="i223hna_104">RefCellCellProvider</em>&nbsp;within your generators, you should consider reviewing such places and aligning your templates with the templates from MPS.</p></section><section class="chapter"><h2 id="inlinecellproviderreplacedwitheditorbuildersub-class" data-toc="inlinecellproviderreplacedwitheditorbuildersub-class">InlineCellProvider replaced with EditorBuilder sub-class</h2><p id="i223hna_105"><em id="i223hna_106">InlineCellProvider</em>&nbsp;is not being used by the MPS generator anymore. MPS uses the generated sub-classes of&nbsp;<em id="i223hna_107">AbstractEditorBuilder</em>&nbsp;instead.&nbsp;Nevertheless, we modified some constraints inside&nbsp;<em id="i223hna_108">InlineCellProvider</em>&nbsp;in order to make the lifecycle more transparent. We recommend to check the javadoc for&nbsp;<em id="i223hna_109">InlineCellProvider</em>, if you are still using it.</p></section><section class="chapter"><h2 id="editorstylesgenerator" data-toc="editorstylesgenerator">Editor Styles generator</h2><p id="i223hna_110">A separate static inner class will be generated for each entry inside&nbsp;<em id="i223hna_111">StyleSheet</em>&nbsp;&amp;&nbsp;<em id="i223hna_112">StyleKeyPack</em>&nbsp;instances. The provided&nbsp;<em id="i223hna_113">applyStyleClass</em>&nbsp;template may be used to properly instantiate &amp; call the new&nbsp;<em id="i223hna_114">Style</em>&nbsp;classes. Legacy static . <em id="i223hna_115">applyxxx()</em>&nbsp;methods should be removed in the next release.</p></section><section class="chapter"><h2 id="styleclassitem&nbsp;constraintsmodification" data-toc="styleclassitem&nbsp;constraintsmodification">StyleClassItem&nbsp;constraints modification</h2><p id="i223hna_116">We removed the&nbsp;<em id="i223hna_117">canBeChild</em>&nbsp;constraints from the&nbsp;<em id="i223hna_118">StyleClassItem</em>&nbsp;concept. These constraints were replaced with&nbsp;<em id="i223hna_119">canBeParent</em>&nbsp;constraints of the node, containing the&nbsp;<em id="i223hna_120">StyleClassItem</em>. In addition to that&nbsp;<em id="i223hna_121">isApplicableToCell(node&lt;EditorCellModel&gt; cellModel)</em>&nbsp;behaviour method has been deprecated and is not used anymore. Instead we have introduced the following methods:</p><ul class="list _bullet" id="i223hna_122"><li class="list__item" id="i223hna_123"><p><em id="i223hna_124">isApplicableToCellConcept()</em></p></li><li class="list__item" id="i223hna_125"><p><em id="i223hna_126">isApplicableForLayout()</em></p></li><li class="list__item" id="i223hna_127"><p><em id="i223hna_128">isApplicableInLayout()</em></p></li></ul><p id="i223hna_129">We recommend you to check the javadoc of&nbsp;<em id="i223hna_130">StyleClassItem</em>&nbsp;behavior methods, if you are implementing any custom&nbsp;<em id="i223hna_131">StyleClassItem</em>&nbsp;in your language.</p></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="diagramming-editor.html" class="navigation-links__prev">Diagramming Editor</a><a href="constraints.html" class="navigation-links__next">Constraints</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>