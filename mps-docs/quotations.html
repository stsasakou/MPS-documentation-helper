<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/quotations.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:24.087498017"><meta name="build-number" content="170"><title>Quotations | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"antiquotations","level":0,"title":"Antiquotations","anchor":"#antiquotations"},{"id":"lightquotations_quotationbuilders","level":0,"title":"Light quotations (quotation builders)","anchor":"#lightquotations_quotationbuilders"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Quotations | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/quotations.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Quotations | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/quotations.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/quotations.html",
    "name": "Quotations | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="quotations" data-main-title="Quotations" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///platform-languages.topic|Platform-languages"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="quotations" id="quotations.topic">Quotations</h1><p id="i62b9cp_1">A quotation is a language construct that lets you easily create a node with a required structure. Of course, you can create a node using the&nbsp;<em id="i62b9cp_2">smodelLanguage</em>&nbsp;and then populate it with appropriate children, properties and references by hand, using the same&nbsp;<em id="i62b9cp_3">smodelLanguage</em>. However, there's a simpler - and more visual - way to accomplish this.</p><p id="i62b9cp_4">The two following constructs will build identical nodes, the first one uses quotation, the second plan&nbsp;<em id="i62b9cp_5">model</em> API:</p><div class="code-block" data-lang="none">node&lt;IntegerType&gt; node = &lt;int&gt;;
node&lt;IntegerType&gt; node2 = new node&lt;IntegerType&gt;();
</div><aside class="prompt" data-type="tip" data-title="" id="i62b9cp_7"><p id="i62b9cp_8">When creating a quotation, type the left angle bracket symbol '&lt;' and pick 'quotation' from the completion menu.</p><figure id="i62b9cp_9"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/quot1.png" class="lightbox"><img alt="quot1.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/quot1.png" title="quot1.png" width="700" height="162"></a></figure><p id="i62b9cp_10">Alternatively, typing '&lt;q' followed by <em id="i62b9cp_11">Control + Space</em>&nbsp;will be even faster.</p><p id="i62b9cp_12">When specifying the top-most concept for the quotation, use the concept name, e.g. <em id="i62b9cp_13">IntegerType</em>, not its alias, e.g. <em id="i62b9cp_14">int</em>.</p><figure id="i62b9cp_15"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/quot2.png" class="lightbox"><img alt="quot2.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/quot2.png" title="quot2.png" width="500" height="189"></a></figure></aside><p id="i62b9cp_16">Quotations as well as light quotations are defined int&nbsp;the&nbsp;<em id="i62b9cp_17">jetbrains.mps.lang.quotation</em>&nbsp;language. You need this language to be set as a <b id="i62b9cp_18">used language</b>&nbsp;in order to be able to use it in your models.</p><p id="i62b9cp_19">A quotation is an expression, whose value is the MPS node written inside the quotation. Think about a quotation as a "node literal", a construction similar to numeric constants and string literals. That is, you write a literal if you statically know what value do you mean. So inside a quotation you don't write an expression, which evaluates to a node, you rather write the node itself. For instance, an expression&nbsp;<code class="code" id="i62b9cp_20">2 + 3</code>&nbsp;evaluates to&nbsp;<code class="code" id="i62b9cp_21">5</code>, an expression&nbsp;<code class="code" id="i62b9cp_22">&lt; 2 + 3 &gt;</code>&nbsp;(angled braces being quotation braces) evaluates to a node&nbsp;<em id="i62b9cp_23">PlusExpression</em> with <em id="i62b9cp_24">leftOperand</em> being an <em id="i62b9cp_25">IntegerConstant 2</em> and <em id="i62b9cp_26">rightOperand</em> being an <em id="i62b9cp_27">IntegerConstant 3</em>.</p><p id="i62b9cp_28">The following two constructs again create the same AST, now the quotation approach yields clear benefits in code brevity:</p><div class="code-block" data-lang="none">node&lt;PlusExpression&gt; node3 = &lt;2 + 3&gt;;&nbsp;
&nbsp;
node&lt;PlusExpression&gt; node4 = new node&lt;PlusExpression&gt;();&nbsp;
node4.leftExpression = new node&lt;IntegerConstant&gt;();&nbsp;
node4.leftExpression : IntegerConstant.value = 2;&nbsp;
node4.rightExpression = new node&lt;IntegerConstant&gt;();&nbsp;
node4.rightExpression : IntegerConstant.value = 3;
</div><p id="i62b9cp_30">Note that using quotation like&nbsp;<code class="code" id="i62b9cp_31">&lt;Car()&gt;</code>&nbsp;<b id="i62b9cp_32">does</b>&nbsp;<b id="i62b9cp_33">not</b>&nbsp;call the behavior constructor, while using the smodel constructor like&nbsp;<code class="code" id="i62b9cp_34">new node&lt;Car&gt;()</code>&nbsp;will&nbsp;<b id="i62b9cp_35">do</b>&nbsp;call it.</p><section class="chapter"><h2 id="antiquotations" data-toc="antiquotations">Antiquotations</h2><p id="i62b9cp_36">For it is a literal, a value of quotation should be known statically. On the other hand, in cases when you know some parts (i.e. children, referents or properties) of your node only dynamically, i.e. those parts that can only be evaluated at runtime and are not known at design time, then you can't use just a quotation to create a node with such parts.</p><p id="i62b9cp_37">The good news, however, is that if you know the most part of a node statically and you want to replace only several parts by dynamically-evaluated nodes you can use&nbsp;<b id="i62b9cp_38">antiquotations</b>. An antiquotation can be of 4 types:&nbsp;<em id="i62b9cp_39">child</em> ,&nbsp;<em id="i62b9cp_40">reference</em> ,&nbsp;<em id="i62b9cp_41">property</em>&nbsp;and&nbsp;<em id="i62b9cp_42">list</em>&nbsp;antiquotation. They all contain an expression, which evaluates dynamically to replace a part of the quoted node by its result. Child and referent antiquotations evaluate to a node, property antiquotation evaluates to string and list antiquotation evaluates to a list of nodes.</p><p id="i62b9cp_43">For instance, you want to create a&nbsp;<em id="i62b9cp_44">ClassifierType</em>&nbsp;with the class&nbsp;<em id="i62b9cp_45">ArrayList</em>, but its type parameter is known only dynamically, for instance by calling a method, say, "computeMyTypeParameter()".</p><p id="i62b9cp_46">Thus, you write the following expression:&nbsp;<em id="i62b9cp_47">&lt; ArrayList &lt; %( computeMyTypeParameter() )% &gt; &gt;</em>. The construction&nbsp;<em id="i62b9cp_48">%(...)%</em>&nbsp;here is a node antiquotation.</p><p id="i62b9cp_49">You may also antiquotate reference targets and property values, with&nbsp;<em id="i62b9cp_50">^(...)^</em>&nbsp;and&nbsp;<em id="i62b9cp_51">$(...)$</em>, respectively; or a list of children of one role, using&nbsp;<em id="i62b9cp_52">*(...)*</em>.</p><p id="i62b9cp_53">a) If you want to replace a node somewhere inside a quoted node with a node evaluated by an expression, you use node antiquotation, that is %( )%. As you may guess there's no sense to replace the whole quoted node with an antiquotation with an expression inside, because in such cases you could instead write such an expression directly in your program.</p><p id="i62b9cp_54">So node antiquotations are used to replace children, grandchildren, great-grandchildren and other descendants of a quoted node. Thus, an expression inside of antiquotation should return a node. To write such an antiquotation, place the caret in a cell for a child and type "%".</p><p id="i62b9cp_55">b) If you want to replace a target of a reference from somewhere inside a quoted node with a node evaluated by an expression, you use reference antiquotation, that is ^(...)^ . To write such an antiquotation, place the caret in a cell for a referent and type "^".</p><p id="i62b9cp_56">c) If you want to replace a child (or some more deeply located descendant), which is of a multiple-cardinality role, and if for that reason you may want to replace it not with a single node but rather with several ones, then use child list (simply list for brevity) antiquotations, *( ) <b id="i62b9cp_57">. An expression inside a list antiquotation should return a list of nodes, that is of type * *</b> <b id="i62b9cp_58"><em id="i62b9cp_59">nlist&lt;..&gt;</em></b> <b id="i62b9cp_60">* * or compatible type (i.e.* **{</b>} <em id="i62b9cp_61">list&lt;node&lt;..&gt;&gt;</em>* * is ok, too, as well as some others). To write such an antiquotation, place the caret in a cell for a child inside a child collection and type "<b id="i62b9cp_62">" . You cannot use it on an empty child collection, so before you press "</b>" you have to enter a single child inside it.</p><p id="i62b9cp_63">d) If you want to replace a property value of a quoted node by a dynamically calculated value, use property antiquotation $( )$. An expression inside a quotation should return string, which will be a value for an antiquoted property of a quoted node. To write such an antiquotation, place the caret in a cell for a property and type "$".</p></section><section class="chapter"><h2 id="lightquotations_quotationbuilders" data-toc="lightquotations_quotationbuilders">Light quotations (quotation builders)</h2><p id="i62b9cp_64">However powerful and convenient quotations are, using them has its downsides. For example, if you're creating quotations of a language in its own definition, you're creating a bootstrapping cycle that needs special treatment during language compilation (See <a href="removing-bootstrapping-dependency-problems.html" id="i62b9cp_65">Removing Bootstrapping Dependency</a>). Additionally, it might be inconvenient to create quotations for nodes whose editor doesnât correspond one-to-one to the concept structure. <b id="i62b9cp_66">Light quotations</b>&nbsp;provide an alternative approach that will help you eliminate such issues.</p><figure id="i62b9cp_67"><a href="https://resources.jetbrains.com/help/img/idea/2024.1/quot3.png" class="lightbox"><img alt="quot3.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/quot3.png" title="quot3.png" width="700" height="168"></a></figure><p id="i62b9cp_68">The following two constructs, one using a quotation and the second using a light quotation are equivalent:</p><div class="code-block" data-lang="none">node&lt;IntegerType&gt; node1 = &lt;int&gt;;&nbsp;
node&lt;IntegerType&gt; node2 = &lt;IntegerType()&gt;;
</div><p id="i62b9cp_70">Unlike direct&nbsp;<em id="i62b9cp_71">model</em>&nbsp;API usage,&nbsp;<b id="i62b9cp_72">Light quotations</b> remain conveniently usable for deeper hierarchies:</p><div class="code-block" data-lang="none">node&lt;PlusExpression&gt; node3 = &lt;2 + 3&gt;;&nbsp;
node&lt;PlusExpression&gt; node4 = &lt;PlusExpression(&nbsp;
&nbsp; leftExpression: IntegerConstant(value: 2),&nbsp;
&nbsp; rightExpression: IntegerConstant(value: 3))&gt;;
</div></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="logging.html" class="navigation-links__prev">Logging</a><a href="icon-description.html" class="navigation-links__next">Icon description</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>