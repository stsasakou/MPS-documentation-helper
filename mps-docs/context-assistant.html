<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><link rel="canonical" href="https://www.jetbrains.com/help/mps/context-assistant.html" data-react-helmet="true"/><meta charset="UTF-8"></meta><meta name="built-on" content="2024-08-08T15:14:21.529608211"><meta name="build-number" content="170"><title>Context Assistant | MPS Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"overview","level":0,"title":"Overview","anchor":"#overview"}]</script><script type="application/json" id="topic-shortcuts">{"jetbrains.mps.ide.editor.actions.JumpToContextAssistant_Action":{"Windows":{"keystrokes":[{"keys":["mod-Control","mod-Alt","key-Enter"]}],"platform":"PC"},"Emacs":{"keystrokes":[{"keys":["mod-Control","mod-Alt","key-Enter"]}],"platform":"PC"},"GNOME":{"keystrokes":[{"keys":["mod-Control","mod-Alt","key-Enter"]}],"platform":"PC"},"KDE":{"keystrokes":[{"keys":["mod-Control","mod-Alt","key-Enter"]}],"platform":"PC"},"Sublime Text":{"keystrokes":[{"keys":["mod-Control","mod-Alt","key-Enter"]}],"platform":"PC"},"XWin":{"keystrokes":[{"keys":["mod-Control","mod-Alt","key-Enter"]}],"platform":"PC"},"macOS":{"keystrokes":[{"keys":["mod-Command","mod-Alt","key-Enter"]}],"platform":"MAC"},"Sublime Text (macOS)":{"keystrokes":[{"keys":["mod-Command","mod-Alt","key-Enter"]}],"platform":"MAC"}}}</script><link href="https://resources.jetbrains.com/storage/help-app/v6/app.css" rel="stylesheet"><link rel="manifest" href="https://www.jetbrains.com/site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- Open Graph --><meta property="og:title" content="Context Assistant | MPS"><meta property="og:description" content=""><meta property="og:image" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><meta property="og:site_name" content="MPS Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="https://www.jetbrains.com/help/mps/context-assistant.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@jetbrains_MPS"><meta name="twitter:title" content="Context Assistant | MPS"><meta name="twitter:description" content=""><meta name="twitter:creator" content="@jetbrains_MPS"><meta name="twitter:image:src" content="https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png"><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "https://www.jetbrains.com/help/mps/context-assistant.html#webpage",
    "url": "https://www.jetbrains.com/help/mps/context-assistant.html",
    "name": "Context Assistant | MPS",
    "description": "",
    "image": "https://resources.jetbrains.com/storage/products/mps/img/meta/preview.png",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "https://www.jetbrains.com/help/mps/#website",
    "url": "https://www.jetbrains.com/help/mps/",
    "name": "MPS Help"
}</script><!-- End Schema.org --><script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0], j = d.createElement(s), dl = l != 'dataLayer' ? '&amp;l=' + l : '';
        j.async = true;
        j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5P98');
</script>
<script src="https://resources.jetbrains.com/storage/help-app/v6/analytics.js"></script>
</head><body data-id="context-assistant" data-main-title="Context Assistant" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="mps-user-s-guide.topic|MPS User's Guide///language-definition.topic|Language-definition///editor.topic|Editor///transformation-menu-language.topic|Transformation Menu Language"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>MPS 2024.1 Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="context-assistant" id="context-assistant.topic">Context Assistant</h1><section class="chapter"><h2 id="overview" data-toc="overview">Overview</h2><p id="xlzmlc_1">MPS provides several mechanisms for performing an action in a context: completion, intentions, refactorings, and various other popup menus. These mechanisms have in common that they are not immediately visible to new, inexperienced users. They also usually offer many possible choices and reveal the entire available functionality, which helps advanced users but may overwhelm the beginners.</p><p id="xlzmlc_2">To better guide the new users through the process of creating a script in your DSL, the <em id="xlzmlc_3">context assistant</em>&nbsp;has become available. A context assistant shows a dynamically constructed menu with actions that are the most appropriate for a given context. The language author specifies where the menu should be shown by putting placeholders in the editor definition. The placeholders reserve screen space for the menu in advance so that the edited content does not shift around as the menu is being shown and hidden.</p><p id="xlzmlc_4">As an example consider the <b id="xlzmlc_5">RobotKaja</b> sample language which is bundled with MPS. The initial editor for a new script looks as follows (without a context assistant):</p><figure id="xlzmlc_6"><img alt="image2016-2-2-12-30-59.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/image2016-2-2-12-30-59.png" title="image2016-2-2-12-30-59.png" width="151" height="63"></figure><p id="xlzmlc_7">With a context assistant this initial UI might look like this:</p><figure id="xlzmlc_8"><img alt="image2016-2-3-14-40-34.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/image2016-2-3-14-40-34.png" title="image2016-2-3-14-40-34.png" width="332" height="61"></figure><p id="xlzmlc_9">and the menu now suggests several possible next steps to the user.</p><section class="chapter"><h3 id="description" data-toc="description">Description</h3><p id="xlzmlc_10">The context assistant is a menu for invoking specific actions on particular big cell&nbsp;(cells whose parents are of a different concept).&nbsp;It's the same everywhere inside a big&nbsp;cell.</p><p id="xlzmlc_11">It's shown in a fixed position of the big&nbsp;cell&nbsp;(there may be multiple such positions though, then only the closest is shown).</p><p id="xlzmlc_12">The menu is not available, if there is no content for it. Besides straight actions the menu can contain hierarchical sub-menus.</p><aside class="prompt" data-type="tip" data-title="" id="xlzmlc_13"><p id="xlzmlc_14">We've also shot a short <a href="https://youtu.be/5tVjgqvTwZc" id="xlzmlc_15" data-external="true" rel="noopener noreferrer">video illustrating use and definition of Context Assistant</a>. You might also like to check out a <a href="https://youtu.be/tZC_Sf6F958" id="xlzmlc_16" data-external="true" rel="noopener noreferrer">screencast</a> on how context assistant is being utilized for the language definition languages.</p></aside></section><section class="chapter"><h3 id="usingcontextassistantui" data-toc="usingcontextassistantui">Using Context Assistant UI</h3><p id="xlzmlc_17">If there is a context assistant available for your current caret position, show it with <kbd id="xlzmlc_18" data-key="jetbrains.mps.ide.editor.actions.JumpToContextAssistant_Action">Ctrl+Alt+Enter</kbd> &nbsp;or wait for 2 seconds.</p><ul class="list _bullet" id="xlzmlc_19"><li class="list__item" id="xlzmlc_20"><p>Jump to the context assistant by pressing <kbd id="xlzmlc_21" data-key="jetbrains.mps.ide.editor.actions.JumpToContextAssistant_Action">Ctrl+Alt+Enter</kbd>.</p></li><li class="list__item" id="xlzmlc_22"><p>Navigate through the menu by using arrow keys, <em id="xlzmlc_23">Tab</em> or mouse.</p></li><li class="list__item" id="xlzmlc_24"><p>Invoke the selected menu item using <em id="xlzmlc_25">Space</em> or <em id="xlzmlc_26">Enter</em>. or mouse click.</p></li><li class="list__item" id="xlzmlc_27"><p>Unlike the intentions menu, there is no typing-based item selection.</p></li><li class="list__item" id="xlzmlc_28"><p>Press <em id="xlzmlc_29">Escape</em> to jump back to the editor.</p></li><li class="list__item" id="xlzmlc_30"><p>Unlike other menus, context assistant does not prevent typing into the document while open (except for when an item in the menu is selected).</p></li></ul></section><section class="chapter"><h3 id="usingcontextassistantframework" data-toc="usingcontextassistantframework">Using Context Assistant Framework</h3><p id="xlzmlc_31">To add context assistant to a language, you as the language author have to do two things:</p><ol class="list _decimal" id="xlzmlc_32" type="1"><li class="list__item" id="xlzmlc_33"><p>Place&nbsp;<em id="xlzmlc_34">context assistant placeholders</em> (a special kind of cell) at appropriate spots in the editor. The context assistant menus will be shown in these placeholders.</p></li><li class="list__item" id="xlzmlc_35"><p>Define the menu hierarchy using the&nbsp;<a href="transformation-menu-language.html" id="xlzmlc_36">Transformation Menu Language</a>&nbsp;(specifying location <b id="xlzmlc_37">context assistant</b>).</p></li></ol><p id="xlzmlc_38">The MPS editor runtime will take care of building the appropriate menu at the appropriate point in time and showing it in the appropriate context assistant placeholder.</p><section class="chapter"><h4 id="placeholdercells" data-toc="placeholdercells">Placeholder Cells</h4><p id="xlzmlc_39">Placeholder cells are added by choosing "context assistant menu placeholder" from the substitution menu when adding a new cell:</p><figure id="xlzmlc_40"><img alt="image2016-2-18-17-57-44.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/image2016-2-18-17-57-44.png" title="image2016-2-18-17-57-44.png" width="721" height="143"></figure><p id="xlzmlc_41">The placeholder cell reserves a certain amount of vertical screen space, about the size of one empty line, so that a menu can be shown in its place without shifting surrounding cells around. However, it&nbsp;doesn't reserve any horizontal space. It is therefore best to put the placeholder on a separate line or at the end of a short (or empty) line of text. For example, in the RobotKaja sample the placeholder is added after an empty line in the editor for the EmptyLine concept:</p><figure id="xlzmlc_42"><img alt="image2016-2-18-17-54-57.png" src="https://resources.jetbrains.com/help/img/idea/2024.1/image2016-2-18-17-54-57.png" title="image2016-2-18-17-54-57.png" width="481" height="152"></figure></section><section class="chapter"><h4 id="menulookup" data-toc="menulookup">Menu Lookup</h4><p id="xlzmlc_43">The menu to display is looked up by traversing the cell hierarchy from the currently selected cell to the top. You may specify the menu to show explicitly for a given cell (by setting the&nbsp;<b id="xlzmlc_44">transformation menu</b>&nbsp;property in the Inspector). In this case that menu is used. Otherwise, if the cell is a&nbsp;<em id="xlzmlc_45">big cell</em> (a cell that has no parent or whose parent is associated with a different node), an attempt is made to look up the menu based on the cell's node. The node's concept inheritance hierarchy is traversed in breadth-first order. If a non-empty menu is defined for the node's concept or one of its super-concepts and super-interfaces, this menu is used.</p><p id="xlzmlc_46">For example, consider a BaseLanguage&nbsp;<code class="code" id="xlzmlc_47">PlusExpression</code>&nbsp;which extends&nbsp;<code class="code" id="xlzmlc_48">BinaryOperation</code>, which in turn extends&nbsp;<code class="code" id="xlzmlc_49">Expression</code>&nbsp;and implements&nbsp;<code class="code" id="xlzmlc_50">IBinaryLike</code>. If&nbsp;during the traversal we reach the big cell of a&nbsp;<code class="code" id="xlzmlc_51">PlusExpression</code>, then menus of&nbsp;<code class="code" id="xlzmlc_52">PlusExpression</code> ,&nbsp;<code class="code" id="xlzmlc_53">BinaryOperation</code> ,&nbsp;<code class="code" id="xlzmlc_54">Expression</code> ,&nbsp;<code class="code" id="xlzmlc_55">IBinaryLike</code>, and finally&nbsp;<code class="code" id="xlzmlc_56">BaseConcept</code>&nbsp;are checked, in that order, and the first non-empty menu definition is used. If all menu definitions are empty, the search continues from the parent cell of the big cell (if any).</p><p id="xlzmlc_57">Note that a non-empty menu definition, although chosen, may still produce an empty menu. This may happen if none of its menu parts produce any items (for example if no defined actions are currently applicable).</p></section><section class="chapter"><h4 id="placeholderlookup" data-toc="placeholderlookup">Placeholder Lookup</h4><p id="xlzmlc_58">The place where a menu should be displayed is looked up by traversing the cell hierarchy from the currently selected cell to the root until a collection cell is reached that contains a context assistant placeholder cell, either directly or indirectly (but only belonging to the same node as the collection).&nbsp;The first cell found during this search is chosen and the menu is displayed in this placeholder cell.</p></section></section></section><div class="last-modified">Last modified: 11 February 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="transformation-menu-language.html" class="navigation-links__prev">Transformation Menu Language</a><a href="context-actions-tool.html" class="navigation-links__next">Context actions tool</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/storage/help-app/v6/app.js"></script></body></html>